(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{UjWm:function(e,t,c){"use strict";c.r(t),c.d(t,"TaskManagerPanelModule",(function(){return lt}));var i=c("ofXK"),s=c("tyNb"),n=c("EY2u"),a=c("eIep"),r=c("Brg/"),o=c("fXoL"),l=c("jVv/"),d=c("S6We"),g=c("qmzK"),f=c("WLNs"),h=c("wZkO"),u=c("XiUz"),m=c("NFeN"),p=c("Wp6s"),b=c("PqYM"),v=c("l5mm"),x=c("vkgz"),O=c("znSr");function S(e,t){if(1&e&&(o.hc(0,"p"),o.Qc(1),o.gc()),2&e){const e=t.$implicit,c=t.index,i=o.tc(2);o.Ob(1),o.Tc("",e||0,"",i.extraTimeStringArray[c+1]?", ":""," ")}}function k(e,t){if(1&e&&(o.hc(0,"div",9),o.hc(1,"div",10),o.hc(2,"div",11),o.cc(3,"div",7),o.gc(),o.gc(),o.hc(4,"div",12),o.hc(5,"div",10),o.Qc(6," EXTRA TIME "),o.gc(),o.hc(7,"div",10),o.Qc(8," ("),o.Oc(9,S,2,2,"p",13),o.Qc(10,") "),o.gc(),o.gc(),o.gc()),2&e){const e=o.tc();o.Ob(1),o.Nc("width","100","%"),o.Ob(2),o.Nc("width",e.extraTimeProgress,"%"),o.Ob(6),o.zc("ngForOf",e.extraTimeStringArray)}}const w=function(){return{"font-size":"10px"}};let y=(()=>{class e{constructor(e){this.cdr=e,this.extraTimeProgress=50}ngOnChanges(e){e.taskSelected&&Object(b.a)().subscribe(()=>{this.timeLineProgressSubs&&this.timeLineProgressSubs.unsubscribe(),this.timeLineProgressSubs=this.calculateTimelineProgress().subscribe(),this.extraTimeSubs&&this.extraTimeSubs.unsubscribe(),this.extraTimeSubs=this.calculateExtraTime().subscribe(),this.calculateTimelineProgress(),this.cdr.detectChanges()})}calculateTimelineProgress(){const e=()=>{this.timelineProgress=this.taskSelected&&(new Date).getTime()>=this.taskSelected.startDate?this.taskSelected.validationTime?Math.round(100*(this.taskSelected.validationTime-this.taskSelected.startDate)/(this.taskSelected.endDate-this.taskSelected.startDate))<100?Math.ceil(100*(this.taskSelected.validationTime-this.taskSelected.startDate)/(this.taskSelected.endDate-this.taskSelected.startDate)):100:Math.round(100*((new Date).getTime()-this.taskSelected.startDate)/(this.taskSelected.endDate-this.taskSelected.startDate))<100?Math.ceil(100*((new Date).getTime()-this.taskSelected.startDate)/(this.taskSelected.endDate-this.taskSelected.startDate)):100:0};return e(),Object(v.a)(500).pipe(Object(x.a)(()=>{e()}))}calculateExtraTime(){const e=()=>{let e=0,t=0;switch(this.taskSelected.status){case"pending":this.taskSelected.extraTime&&(e=this.taskSelected.extraTime,(new Date).getTime()>this.taskSelected.endDate&&(t=100*((new Date).getTime()-this.taskSelected.endDate)/e));break;case"on review":this.taskSelected.extraTime?(e=this.taskSelected.extraTime+((new Date).getTime()-this.taskSelected.deliverDate),(new Date).getTime()>this.taskSelected.endDate&&(t=100*((new Date).getTime()-this.taskSelected.endDate)/e)):(e=(new Date).getTime()-this.taskSelected.deliverDate,(new Date).getTime()>this.taskSelected.endDate&&(t=100*((new Date).getTime()-this.taskSelected.endDate)/e));break;case"done":e=this.taskSelected.extraTime,(new Date).getTime()>this.taskSelected.endDate&&(t=100*(this.taskSelected.validationTime-this.taskSelected.endDate)/e)}this.extraTimeMilisec=e,this.extraTimeProgress=t>100?100:Math.ceil(t),this.extraTimeStringArray=r.b.milisecsToString(this.extraTimeMilisec).filter((e,t)=>!e.includes("seconds")),this.extraTimeStringArray=0===this.extraTimeStringArray.length?["< 1 minute"]:this.extraTimeStringArray};return e(),Object(v.a)(500).pipe(Object(x.a)(()=>{e()}))}ngOnDestroy(){this.extraTimeSubs.unsubscribe(),this.timeLineProgressSubs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.bc(o.i))},e.\u0275cmp=o.Vb({type:e,selectors:[["app-task-manager-progress"]],inputs:{taskSelected:"taskSelected"},features:[o.Mb],decls:23,vars:22,consts:[["fxLayout","column","fxLayout","column",1,"div-progress-container",3,"ngStyle.xs"],["fxShow.lt-md","","fxHide.gt-sm","","fxLayoutAlign","space-between"],["fxLayoutAlign","center",1,"div-date"],["fxLayoutGap","5px","fxLayout","row",1,"div-progress",3,"fxFlex"],["fxHide.lt-md","","fxShow.gt-sm","","fxLayoutAlign","center","fxFlex","15"],["fxFlex.gt-sm","70","fxFlex.lt-md","100","fxLayoutAlign","center"],["fxFlex","100","fxLayout","column",1,"progress-bar-container"],[1,"progress-bar"],["fxFlex","40","class","div-progress","fxLayout","column",4,"ngIf"],["fxFlex","40","fxLayout","column",1,"div-progress"],["fxLayoutAlign","center"],["fxFlex","60","fxLayout","column",1,"progress-bar-container"],["fxFlex","10","fxLayout","row","fxLayoutAlign","center",1,"div-extratime-info"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o.hc(0,"div",0),o.hc(1,"div",1),o.hc(2,"div",2),o.hc(3,"span"),o.Qc(4),o.uc(5,"date"),o.gc(),o.gc(),o.hc(6,"div",2),o.hc(7,"span"),o.Qc(8),o.uc(9,"date"),o.gc(),o.gc(),o.gc(),o.hc(10,"div",3),o.hc(11,"div",4),o.hc(12,"span"),o.Qc(13),o.uc(14,"date"),o.gc(),o.gc(),o.hc(15,"div",5),o.hc(16,"div",6),o.cc(17,"div",7),o.gc(),o.gc(),o.hc(18,"div",4),o.hc(19,"span"),o.Qc(20),o.uc(21,"date"),o.gc(),o.gc(),o.gc(),o.Oc(22,k,11,5,"div",8),o.gc()),2&e&&(o.zc("ngStyle.xs",o.Ac(21,w)),o.Ob(4),o.Rc(o.wc(5,9,t.taskSelected.startDate,"M/d/yy, H:mm ")),o.Ob(4),o.Sc(" ",o.wc(9,12,t.taskSelected.endDate,"M/d/yy, H:mm ")," "),o.Ob(2),o.zc("fxFlex",t.taskSelected.deliverDate?"40":"100"),o.Ob(3),o.Rc(o.wc(14,15,t.taskSelected.startDate,"M/d/yy, H:mm ")),o.Ob(4),o.Nc("width",t.timelineProgress,"%"),o.Ob(3),o.Sc(" ",o.wc(21,18,t.taskSelected.endDate,"M/d/yy, H:mm ")," "),o.Ob(2),o.zc("ngIf",t.extraTimeMilisec))},directives:[u.f,O.d,O.c,u.e,u.g,u.b,i.t,i.s],pipes:[i.f],styles:[".div-progress-container[_ngcontent-%COMP%]{width:100%;line-height:10pt;font-weight:bolder}.div-progress-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0!important;margin:0!important}.div-progress-container[_ngcontent-%COMP%]   .div-progress[_ngcontent-%COMP%]{margin-top:5px!important;width:100%;align-items:center}.div-progress-container[_ngcontent-%COMP%]   .div-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{height:18px;width:100%;background-color:wheat;border:1px solid #000;border-radius:5px}.div-progress-container[_ngcontent-%COMP%]   .div-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background-color:#7b87cc;height:100%;width:100%}.div-progress-container[_ngcontent-%COMP%]   .div-extratime-info[_ngcontent-%COMP%]{margin-top:10px!important}.div-progress-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{word-break:break-all}.div-progress-container[_ngcontent-%COMP%]   .div-date[_ngcontent-%COMP%]{margin:7px!important}"]}),e})();var M=c("Qu3c"),F=c("kmnG"),T=c("st1D");let I=(()=>{class e{constructor(){this.onActionResolved=new o.r}actionResolved(e){this.onActionResolved.emit(e),this.actionsRequired=this.actionsRequired.filter(t=>t.property!=Object.keys(e)[0])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Vb({type:e,selectors:[["app-actions-required-smart"]],inputs:{actionsRequired:"actionsRequired"},outputs:{onActionResolved:"onActionResolved"},decls:1,vars:1,consts:[[3,"actions","setAction"]],template:function(e,t){1&e&&(o.hc(0,"app-actions-required",0),o.pc("setAction",(function(e){return t.actionResolved(e)})),o.gc()),2&e&&o.zc("actions",t.actionsRequired)},directives:[T.a],encapsulation:2}),e})();function C(e,t){if(1&e&&(o.hc(0,"li",25),o.Qc(1),o.gc()),2&e){const e=t.$implicit;o.Ob(1),o.Rc(e.name)}}function z(e,t){if(1&e&&(o.hc(0,"li",25),o.Qc(1),o.gc()),2&e){const e=t.$implicit;o.Ob(1),o.Rc(e.name)}}function L(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",26),o.hc(1,"h4"),o.Qc(2," Actions required "),o.gc(),o.hc(3,"mat-icon",5),o.pc("click",(function(){return o.Hc(e),o.tc(2).showActionsRequired()})),o.Qc(4,"assignment_late"),o.gc(),o.gc()}}function _(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",27),o.hc(1,"h4"),o.Qc(2," Actions required "),o.gc(),o.hc(3,"app-actions-required-smart",28),o.pc("onActionResolved",(function(t){return o.Hc(e),o.tc(2).actionResolved.emit(t)})),o.gc(),o.gc()}if(2&e){const e=o.tc(2);o.Ob(1),o.Nc("color","red"),o.Ob(2),o.zc("actionsRequired",e.taskSelected.actionsRequired)}}const P=function(e){return{"icon-disabled":e}};function A(e,t){if(1&e){const e=o.ic();o.hc(0,"div",1),o.hc(1,"mat-card",2),o.hc(2,"div",3),o.hc(3,"h4",4),o.Qc(4," Name: "),o.gc(),o.hc(5,"p",4),o.Qc(6),o.gc(),o.gc(),o.hc(7,"div",3),o.hc(8,"h4",4),o.Qc(9," Description: "),o.gc(),o.hc(10,"div",4),o.hc(11,"mat-icon",5),o.pc("click",(function(){return o.Hc(e),o.tc().showDescription()})),o.Qc(12,"pageview"),o.gc(),o.gc(),o.gc(),o.gc(),o.hc(13,"mat-card",6),o.hc(14,"div",3),o.hc(15,"h4",4),o.Qc(16," Status: "),o.gc(),o.hc(17,"p",4),o.Qc(18),o.gc(),o.gc(),o.hc(19,"div",3),o.hc(20,"h4",4),o.Qc(21," Priority: "),o.gc(),o.hc(22,"p",4),o.Qc(23),o.gc(),o.gc(),o.gc(),o.hc(24,"mat-card",7),o.hc(25,"h4",8),o.Qc(26," Progress "),o.gc(),o.cc(27,"app-task-manager-progress",9),o.gc(),o.hc(28,"mat-card",10),o.hc(29,"h4",11),o.Qc(30," Options "),o.gc(),o.hc(31,"div",12),o.hc(32,"div",13),o.hc(33,"div",14),o.hc(34,"mat-icon",15),o.pc("click",(function(){return o.Hc(e),o.tc().toggleStat()})),o.Qc(35),o.gc(),o.gc(),o.hc(36,"mat-label",16),o.Qc(37," TOGGLE STATUS "),o.gc(),o.gc(),o.hc(38,"div",13),o.hc(39,"div",14),o.hc(40,"mat-icon",17),o.pc("click",(function(){o.Hc(e);const t=o.tc();return t.taskService.canBeEdited(t.taskSelected)?t.editTask.emit():null})),o.Qc(41,"edit"),o.gc(),o.gc(),o.hc(42,"mat-label",16),o.Qc(43," EDIT "),o.gc(),o.gc(),o.hc(44,"div",13),o.hc(45,"div",14),o.hc(46,"mat-icon",18),o.pc("click",(function(){o.Hc(e);const t=o.tc();return t.taskService.taskTimeStarted(t.taskSelected)?null:t.deleteTask.emit()})),o.Qc(47,"delete"),o.gc(),o.gc(),o.hc(48,"mat-label",16),o.Qc(49," DELETE TASK "),o.gc(),o.gc(),o.gc(),o.gc(),o.hc(50,"mat-card",19),o.hc(51,"div",20),o.hc(52,"h4",21),o.Qc(53,"Participants"),o.gc(),o.hc(54,"ul"),o.Oc(55,C,2,1,"li",22),o.gc(),o.gc(),o.hc(56,"div",20),o.hc(57,"h4",21),o.Qc(58,"Reviewers"),o.gc(),o.hc(59,"ul"),o.Oc(60,z,2,1,"li",22),o.gc(),o.gc(),o.gc(),o.Oc(61,L,5,0,"mat-card",23),o.Oc(62,_,4,3,"mat-card",24),o.gc()}if(2&e){const e=o.tc();o.Ob(6),o.Sc(" ",e.taskSelected.name," "),o.Ob(12),o.Sc(" ",e.taskSelected.status.toUpperCase()," "),o.Ob(5),o.Sc(" ",1===e.taskSelected.priority?"LOW":2===e.taskSelected.priority?"MEDIUM":"HIGH"," "),o.Ob(4),o.zc("taskSelected",e.taskSelected),o.Ob(7),o.zc("matTooltip","on review"===e.taskSelected.status?"Task is currently on review":"")("ngClass",o.Bc(13,P,!e.taskService.taskTimeStarted(e.taskSelected))),o.Ob(1),o.Sc(" ","pending"===e.taskSelected.status?"move_to_inbox":"on review"===e.taskSelected.status?"hourglass_full":"assignment_turned_in"," "),o.Ob(5),o.zc("ngClass",o.Bc(15,P,!e.taskService.canBeEdited(e.taskSelected))),o.Ob(6),o.zc("ngClass",o.Bc(17,P,e.taskService.taskTimeStarted(e.taskSelected))),o.Ob(9),o.zc("ngForOf",e.taskSelected.participants),o.Ob(5),o.zc("ngForOf",e.taskSelected.reviewers),o.Ob(1),o.zc("ngIf",e.hasActsRequired),o.Ob(1),o.zc("ngIf",e.hasActsRequired)}}let Q=(()=>{class e{constructor(e,t,c,i){this.taskService=e,this.authService=t,this.lpDialogsService=c,this.dialogsService=i,this.deleteTask=new o.r,this.toggleStatus=new o.r,this.editTask=new o.r,this.actionResolved=new o.r,this.hasActsRequired=!1,this.display=!1}ngOnInit(){}ngOnChanges(e){e.taskSelected&&this.taskSelected&&(this.hasActsRequired=!!(this.taskSelected.actionsRequired&&this.taskSelected.actionsRequired.length>0&&this.taskSelected.actionsRequired.find(e=>e.usersTo.map(e=>e._id).includes(this.authService.userOnline._id))))}toggleStat(){let e;switch(this.taskSelected.status){case"pending":e="on review";break;case"done":e="pending"}e&&this.taskService.taskTimeStarted(this.taskSelected)&&this.toggleStatus.emit(e)}showDescription(){this.lpDialogsService.openInfoDialog(this.taskSelected.description,"TASK DESCRIPTION")}showActionsRequired(){this.dialogsService.showActionsRequired(this.taskSelected.actionsRequired).subscribe(e=>{this.actionResolved.emit(e)})}}return e.\u0275fac=function(t){return new(t||e)(o.bc(d.a),o.bc(l.a),o.bc(f.b),o.bc(g.a))},e.\u0275cmp=o.Vb({type:e,selectors:[["app-task-manager-info"]],inputs:{taskSelected:"taskSelected"},outputs:{deleteTask:"deleteTask",toggleStatus:"toggleStatus",editTask:"editTask",actionResolved:"actionResolved"},features:[o.Mb],decls:1,vars:1,consts:[["class","div-info-container","fxLayout","column",4,"ngIf"],["fxLayout","column",1,"div-info-container"],["fxLayout","row","fxFlex","8 "],["fxLayout","row","fxFlex","50"],["fxFlex.gt-sm","50","fxLayout.gt-sm","column","fxLayoutAlign","center"],["color","primary",3,"click"],["fxLayout","row","fxFlex","8"],["fxLayout","column","fxFlex.gt-sm","hasActsRequired ? 26: 36","fxFlex.lt-md","42"],["fxLayout.gt-sm","column","fxLayoutAlign","center"],[3,"taskSelected"],["fxFlex.gt-sm","hasActsRequired ? 10: 20","fxFlex.lt-md","35"],["fxFlex.gt-xs","15","fxFlex.xs","50"],["fxFlex","80","fxLayout","row"],["fxFlex.gt-xs","20","fxFlex.xs","33","fxLayout","row"],["fxLayoutAlign","center"],["color","primary",3,"matTooltip","ngClass","click"],["fxHide.lt-md","",1,"label-action"],["color","primary",3,"ngClass","click"],["color","warn",3,"ngClass","click"],["fxLayout","row","fxFlex.gt-sm","hasActsRequired ? 15: 30","fxFlex.lt-md","30"],["fxLayout.gt-sm","row","fxLayout.lt-md","column","fxFlex","50"],["fxLayout.gt-sm","column","fxLayoutAlign.lt-md","center"],["role","listitem",4,"ngFor","ngForOf"],["fxLayoutAlign","center","fxHide.gt-sm","","fxLayout","row","fxFlex","10",4,"ngIf"],["fxHide.lt-md","","fxLayout","column","fxFlex","35",4,"ngIf"],["role","listitem"],["fxLayoutAlign","center","fxHide.gt-sm","","fxLayout","row","fxFlex","10"],["fxHide.lt-md","","fxLayout","column","fxFlex","35"],[3,"actionsRequired","onActionResolved"]],template:function(e,t){1&e&&o.Oc(0,A,63,19,"div",0),2&e&&o.zc("ngIf",t.taskSelected)},directives:[i.t,u.f,p.a,u.b,u.e,m.a,y,M.a,i.q,O.a,F.g,O.c,i.s,I],styles:[".div-info-container[_ngcontent-%COMP%]{height:82vh}.div-info-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px}.div-info-container[_ngcontent-%COMP%]   .icon-disabled[_ngcontent-%COMP%]{cursor:auto;opacity:.3}.div-info-container[_ngcontent-%COMP%]   .div-task-name[_ngcontent-%COMP%]{background-color:#7b87cc;color:#f5f5f5;height:25px;font-weight:bolder}.div-info-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#7b87cc;margin:0;padding:0 0 0 25px}.div-info-container[_ngcontent-%COMP%]   .label-action[_ngcontent-%COMP%]{font-weight:700;font-size:12px;text-align:center;margin-top:5px}.div-info-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{padding:0}.div-info-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:5px}.div-info-container[_ngcontent-%COMP%]   .div-description[_ngcontent-%COMP%]{max-width:100%;overflow-x:hidden;overflow-y:none;cursor:pointer}@media (max-width:1279px){h4[_ngcontent-%COMP%]{padding-left:5px!important}.div-info-container[_ngcontent-%COMP%]{height:77vh}}"]}),e})();var D=c("XNiG"),R=c("tk/3"),E=c("lJxs"),H=c("IZH3"),U=c("KwZR");let j=(()=>{class e{constructor(e,t){this.http=e,this.wsService=t,this.messagesSource=new D.a,this.messages$=this.messagesSource.asObservable()}getMessages(e,t,c=10){const i=new R.d({skip:t.toString(),limit:c.toString()});return this.http.get(`${H.a}messages/${e}`,{headers:i}).pipe(Object(E.a)(e=>({count:e.data.count,messages:e.data.messages})))}postMessage(e,t){e.date=(new Date).getTime();const c=new FormData;return e.files.forEach((e,t)=>{c.append(t,e,e.name)}),Object.keys(e).forEach(t=>{"files"!=t&&c.append(t,e[t])}),this.http.post(`${H.a}message/${t}`,c).pipe(Object(E.a)(e=>e.message))}deleteMessage(e){return this.http.delete(`${H.a}message/${e}`).pipe(Object(x.a)(e=>{this.messagesSource.next({message:e.message,order:"delete"})}))}listenningMessages(){return this.wsService.listen("message-in")}}return e.\u0275fac=function(t){return new(t||e)(o.lc(R.b),o.lc(U.a))},e.\u0275prov=o.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var N=c("LRne"),q=c("x1eN");let $=(()=>{class e{constructor(e,t,c){this.http=e,this.lpDialogsService=t,this.loadSpinnerService=c,this.textFormats=["pdf"],this.fileSrc=new D.a,this.file$=this.fileSrc.asObservable()}getDbFile(e){return this.http.get(`${H.a}file/${e}`,{responseType:"blob"})}spreadFile(e,t){this.fileSrc.next({order:t,file:e})}deleteFile(e){const t=this.http.delete(`${H.a}delete-file/${e._id}`).pipe(Object(E.a)(e=>e.file),Object(x.a)(e=>this.spreadFile(e,"DELETE")));return this.lpDialogsService.openConfirmDialog("FILE DELETION",`The file ${e.title} will be deleted`).pipe(Object(a.a)(e=>e?t:Object(n.b)()))}getFileById(e){return this.http.get(`${H.a}searchById/file/${e}`).pipe(Object(E.a)(e=>e.file))}downloadFile(e){const{src:t,file:c}=e;return this.lpDialogsService.openConfirmDialog("DOWNLOAD FILE?",c.title).pipe(Object(a.a)(e=>e?(t.includes("blob")?Object(N.a)({src:t,title:c.title}).pipe(Object(x.a)(()=>this.loadSpinnerService.state.next(!1))):this.getDbFile(c.name).pipe(Object(E.a)(e=>({src:URL.createObjectURL(e),title:c.title})))).pipe(Object(x.a)(e=>{const t=document.createElement("a");t.href=e.src,t.download=e.title,document.body.appendChild(t),t.click()})):Object(n.b)()))}}return e.\u0275fac=function(t){return new(t||e)(o.lc(R.b),o.lc(f.b),o.lc(q.a))},e.\u0275prov=o.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var V=c("2Vo4"),B=c("0IaG"),K=c("qFsG"),G=c("ihCf"),W=c("3Pt+"),X=c("bTqV"),Y=c("jhN1");let Z=(()=>{class e{constructor(e,t){this.filesService=e,this.domSanitizer=t,this.textFormats=[{icon:"word",mime:"application/msword"},{icon:"odt",mime:"application/vnd.oasis.opendocument.text"},{icon:"xml",mime:"text/xml"},{icon:"pdf",mime:"application/pdf"},{icon:"word",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{icon:"xml",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{icon:"text",mime:"text/plain"}]}transform(e){let t=this.textFormats.find(t=>t.mime===e.type);return t?Object(N.a)(`../../../assets/icons/files/${t.icon}.png`):e instanceof File?Object(N.a)(this.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e))):this.filesService.getDbFile(e.name).pipe(Object(E.a)(e=>this.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e))))}}return e.\u0275fac=function(t){return new(t||e)(o.bc($),o.bc(Y.b))},e.\u0275pipe=o.ac({name:"fileIcon",type:e,pure:!0}),e})();function J(e,t){if(1&e&&(o.hc(0,"div",1),o.cc(1,"img",7),o.uc(2,"async"),o.uc(3,"fileIcon"),o.hc(4,"div",8),o.Qc(5),o.gc(),o.gc()),2&e){const e=t.$implicit;o.Ob(1),o.zc("src",o.vc(2,2,o.vc(3,4,e)),o.Ic),o.Ob(4),o.Sc(" ",e.name," ")}}function ee(e,t){if(1&e){const e=o.ic();o.hc(0,"div",1),o.hc(1,"div",2),o.Oc(2,J,6,6,"div",3),o.gc(),o.hc(3,"div"),o.hc(4,"mat-form-field",4),o.hc(5,"mat-label"),o.Qc(6,"You can write a message"),o.gc(),o.hc(7,"textarea",5),o.pc("ngModelChange",(function(t){return o.Hc(e),o.tc().text=t})),o.gc(),o.gc(),o.gc(),o.hc(8,"div"),o.hc(9,"button",6),o.pc("click",(function(){return o.Hc(e),o.tc().accept()})),o.Qc(10,"OK"),o.gc(),o.hc(11,"button",6),o.pc("click",(function(){return o.Hc(e),o.tc().cancel()})),o.Qc(12,"cancel"),o.gc(),o.gc(),o.gc()}if(2&e){const e=o.tc();o.Ob(2),o.zc("ngForOf",e.files),o.Ob(5),o.Nc("margin-top","10px"),o.zc("ngModel",e.text)}}let te=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.files=t.files}accept(){this.dialogRef.close({accepted:!0,text:this.text})}cancel(){this.dialogRef.close({accepted:!1})}}return e.\u0275fac=function(t){return new(t||e)(o.bc(B.i),o.bc(B.a))},e.\u0275cmp=o.Vb({type:e,selectors:[["app-chat-files-dialog"]],decls:1,vars:1,consts:[["fxLayout","column",4,"ngIf"],["fxLayout","column"],["fxLayout","row",1,"div-files"],["fxLayout","column",4,"ngFor","ngForOf"],[1,"mat-form-full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMaxRows","3","rows","3","cols","40",1,"textarea",3,"ngModel","ngModelChange"],["fxFlex","50","mat-raised-button","",3,"click"],["alt","",1,"file-icon-temp",3,"src"],[1,"div-file-title"]],template:function(e,t){1&e&&o.Oc(0,ee,13,4,"div",0),2&e&&o.zc("ngIf",t.files)},directives:[i.t,u.f,i.s,F.c,F.g,K.b,G.c,W.d,W.o,W.r,X.b,u.b],pipes:[i.b,Z],styles:[".div-files[_ngcontent-%COMP%]{margin:8px;max-width:250px;overflow-x:scroll;font-size:9px}.div-files[_ngcontent-%COMP%]   .file-icon-temp[_ngcontent-%COMP%]{height:70px;width:70px}textarea[_ngcontent-%COMP%]{padding:0!important}"]}),e})();class ce{constructor(e,t,c,i){this.text=e,this.files=t,this.date=c,this._id=i}}const ie=[{format:".gif",mimeType:"image/gif"},{format:".jpeg",mimeType:"image/jpeg"},{format:".png",mimeType:"image/png"},{format:".doc",mimeType:"application/msword"},{format:".odt",mimeType:"application/vnd.oasis.opendocument.text"},{format:".txt",mimeType:"text/plain"},{format:".pdf",mimeType:"application/pdf"},{format:".docx",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{format:"xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}];var se=c("41FU"),ne=c("zP0r");const ae=["fileInput"],re=["fileInputCtrl"];let oe=(()=>{class e{constructor(){this.config={},this.propagateChange=e=>{}}validate(){return this.errors}ngAfterViewInit(){if(!this.trigger)throw new Error("Component needs a trigger");this.trigger.nativeElement.addEventListener("click",()=>{this.fileInput.nativeElement.click()}),this.fileInputController.valueChanges.pipe(Object(ne.a)(1)).subscribe(()=>{let e=this.fileInputController.control.errors;e?(this.errors=e,this.propagateChange(null)):(this.errors=null,this.propagateChange(this.fileInput.nativeElement.files)),this.fileInput.nativeElement.files=null,this.fileInput.nativeElement.value=null})}writeValue(e){}registerOnChange(e){this.propagateChange=e}registerOnTouched(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Vb({type:e,selectors:[["lp-files-uploader"]],viewQuery:function(e,t){var c;1&e&&(o.Mc(ae,!0),o.Mc(re,!0)),2&e&&(o.Ec(c=o.qc())&&(t.fileInput=c.first),o.Ec(c=o.qc())&&(t.fileInputController=c.first))},inputs:{config:"config",trigger:"trigger"},features:[o.Nb([{provide:W.m,useExisting:Object(o.hb)(()=>e),multi:!0},{provide:W.l,useExisting:Object(o.hb)(()=>e),multi:!0}])],decls:5,vars:5,consts:[["form","ngForm"],["hidden","","ngModel","","name","files-input","type","file","lpFilesUploader","",2,"display","none",3,"multiple","allowedMimeTypes","notAllowedMimeTypes","maxSizeKb","maxNameLength"],["fileInput","","fileInputCtrl","ngModel"]],template:function(e,t){1&e&&(o.hc(0,"form",null,0),o.cc(2,"input",1,2),o.gc()),2&e&&(o.Ob(2),o.zc("multiple",t.config.multiple)("allowedMimeTypes",t.config.allowedMimeTypes)("notAllowedMimeTypes",t.config.notAllowedMimeTypes)("maxSizeKb",t.config.maxSizeKb)("maxNameLength",t.config.maxNameLength))},directives:function(){return[W.E,W.p,W.q,W.d,W.o,W.r,le]},encapsulation:2}),e})(),le=(()=>{class e{constructor(e){this.el=e}validate(){let e=this.el.nativeElement.files;return this.validateTypes(e)?this.validateTypes(e):this.validateSize(e)?this.validateSize(e):this.validateNameLength(e)?this.validateNameLength(e):null}validateTypes(e){let t=null;return Array.from(e).forEach(e=>{this.allowedMimeTypes&&this.allowedMimeTypes.indexOf(e.type)<0&&(t={invalidMimeType:!0})}),this.notAllowedMimeTypes&&Array.from(e).forEach(e=>{this.notAllowedMimeTypes.indexOf(e.type)>=0&&(t={invalidMimeType:!0})}),t}validateSize(e){let t=null;return this.maxSizeKb&&Array.from(e).forEach(e=>{e.size/1024>this.maxSizeKb&&(t={invalidFileSize:!0})}),t}validateNameLength(e){let t=null;return this.maxNameLength&&Array.from(e).forEach(e=>{e.name.length>this.maxNameLength&&(t={invalidNameLength:!0})}),t}}return e.\u0275fac=function(t){return new(t||e)(o.bc(o.o))},e.\u0275dir=o.Wb({type:e,selectors:[["","lpFilesUploader",""]],inputs:{allowedMimeTypes:"allowedMimeTypes",notAllowedMimeTypes:"notAllowedMimeTypes",maxSizeKb:"maxSizeKb",maxNameLength:"maxNameLength"},features:[o.Nb([{provide:W.l,useExisting:Object(o.hb)(()=>e),multi:!0}])]}),e})(),de=(()=>{class e{}return e.\u0275mod=o.Zb({type:e}),e.\u0275inj=o.Yb({factory:function(t){return new(t||e)},imports:[[i.c,W.i,W.y]]}),e})();const ge=["fileUploader"];let fe=(()=>{class e{constructor(e){this.lpSnackbarNotificationsService=e,this.files=new o.r,this.showUsers=new o.r,this.imgValidationConfig={allowedMimeTypes:ie.map(e=>e.mimeType),maxSizeKb:3e3,maxNameLength:150,multiple:!0}}ngOnInit(){this.filesInfo=`Allowed formats: ${ie.reduce((e,t)=>(this.imgValidationConfig.allowedMimeTypes.indexOf(t.mimeType)>=0&&(e+=""+(e?", "+t.format:t.format)),e),"")}\nmax size kb: ${this.imgValidationConfig.maxSizeKb}\nmax name length: ${this.imgValidationConfig.maxNameLength}`}ngAfterViewInit(){this.filesUploaderChanges=this.fileUploader.valueChanges.subscribe(()=>{if(this.fileUploader.errors)switch(Object.keys(this.fileUploader.errors)[0]){case"invalidMimeType":this.lpSnackbarNotificationsService.validationError("INVALID FILE FORMAT");break;case"invalidFileSize":this.lpSnackbarNotificationsService.validationError("INVALID FILE SIZE");break;case"invalidNameLength":this.lpSnackbarNotificationsService.validationError("INVALID FILE NAME LENGTH")}})}setFiles(e){if(null!=e){const t=[];Array.from(e).forEach(e=>{t.push(e)}),this.files.emit(t)}}ngOnDestroy(){this.filesUploaderChanges.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.bc(se.a))},e.\u0275cmp=o.Vb({type:e,selectors:[["chat-tools"]],viewQuery:function(e,t){var c;1&e&&o.Wc(ge,!0),2&e&&o.Ec(c=o.qc())&&(t.fileUploader=c.first)},outputs:{files:"files",showUsers:"showUsers"},decls:9,vars:3,consts:[["fxLayoutGap","20px",1,"card-tools"],[3,"color","click"],["color","primary"],["filesUploaderTrigger",""],["action",""],["ngModel","","name","files",3,"trigger","config","ngModelChange"],["fileUploader","ngModel"]],template:function(e,t){if(1&e&&(o.hc(0,"mat-card",0),o.hc(1,"mat-icon",1),o.pc("click",(function(){return t.showU=!t.showU,t.showUsers.emit(t.showU)})),o.Qc(2,"supervised_user_circle"),o.gc(),o.hc(3,"mat-icon",2,3),o.Qc(5," attach_file"),o.gc(),o.hc(6,"form",4),o.hc(7,"lp-files-uploader",5,6),o.pc("ngModelChange",(function(e){return t.setFiles(e)})),o.gc(),o.gc(),o.gc()),2&e){const e=o.Fc(4);o.Ob(1),o.zc("color",t.showU?"accent":"primary"),o.Ob(6),o.zc("trigger",e._elementRef)("config",t.imgValidationConfig)}},directives:[p.a,u.g,m.a,W.E,W.p,W.q,oe,W.o,W.r],styles:[".card-tools[_ngcontent-%COMP%]{height:15px!important}  .mat-tooltip{white-space:pre-line}"]}),e})();const he=["textArea"];let ue=(()=>{class e{constructor(e){this.dialog=e,this.message=new ce("",[],null),this.sendMsg=new o.r,this.showUsers=new o.r}ngOnInit(){}sendMessage(){this.sendMsg.emit(this.message),this.message=new ce("",[],null),this.textArea.nativeElement.focus()}setFiles(e){this.dialog.open(te,{data:{files:e}}).afterClosed().subscribe(t=>{t.accepted&&(this.message.text=t.text?t.text:"",this.message.files.push(...e),this.sendMessage())})}}return e.\u0275fac=function(t){return new(t||e)(o.bc(B.b))},e.\u0275cmp=o.Vb({type:e,selectors:[["chat-input"]],viewQuery:function(e,t){var c;1&e&&o.Wc(he,!0),2&e&&o.Ec(c=o.qc())&&(t.textArea=c.first)},outputs:{sendMsg:"sendMsg",showUsers:"showUsers"},decls:8,vars:6,consts:[["fxLayout","column"],["fxLayout","row"],["mat-raised-button","",3,"disabled","click"],["fxFlex","90",3,"files","showUsers"],[1,"mat-form-full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMaxRows","4","cdkAutosizeMinRows","4","cols","40","placeholder","write something",1,"textarea",3,"ngModel","ngModelChange"],["textArea",""]],template:function(e,t){1&e&&(o.hc(0,"div",0),o.hc(1,"div",1),o.hc(2,"button",2),o.pc("click",(function(){return t.sendMessage()})),o.Qc(3,"send"),o.gc(),o.hc(4,"chat-tools",3),o.pc("files",(function(e){return t.setFiles(e)}))("showUsers",(function(e){return t.showUsers.emit(e)})),o.gc(),o.gc(),o.hc(5,"mat-form-field",4),o.hc(6,"textarea",5,6),o.pc("ngModelChange",(function(e){return t.message.text=e})),o.gc(),o.gc(),o.gc()),2&e&&(o.Ob(2),o.Nc("width",100,"%"),o.zc("disabled",!t.message.text),o.Ob(4),o.Nc("margin-top","10px"),o.zc("ngModel",t.message.text))},directives:[u.f,X.b,fe,u.b,F.c,K.b,G.c,W.d,W.o,W.r],styles:["textarea[_ngcontent-%COMP%]{padding:0!important}"]}),e})();function me(e,t){if(1&e&&(o.hc(0,"div",2),o.hc(1,"p"),o.Qc(2),o.gc(),o.hc(3,"mat-icon",3),o.Qc(4,"face"),o.gc(),o.gc()),2&e){const e=t.$implicit;o.Ob(2),o.Rc(e.name),o.Ob(1),o.zc("color",e.connected?"primary":"accent")}}let pe=(()=>{class e{constructor(){this.users=[]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Vb({type:e,selectors:[["chat-users"]],inputs:{users:"users"},decls:2,vars:1,consts:[[1,"div-users"],["fxLayoutAlign","space-around","fxLayout","row",4,"ngFor","ngForOf"],["fxLayoutAlign","space-around","fxLayout","row"],[3,"color"]],template:function(e,t){1&e&&(o.hc(0,"div",0),o.Oc(1,me,5,2,"div",1),o.gc()),2&e&&(o.Ob(1),o.zc("ngForOf",t.users))},directives:[i.s,u.e,u.f,m.a],styles:[".div-users[_ngcontent-%COMP%]{margin:10px;overflow-y:scroll;max-height:55vh}.div-users[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (max-width:1279px){.div-users[_ngcontent-%COMP%]{max-height:100%;border-bottom:1px solid #d3d3d3}}"]}),e})();var be=c("Xa2L");const ve=["divMessages"];function xe(e,t){1&e&&o.cc(0,"mat-spinner",5),2&e&&o.zc("diameter",50)}function Oe(e,t){if(1&e){const e=o.ic();o.hc(0,"div",11),o.hc(1,"img",12,13),o.pc("click",(function(){o.Hc(e);const c=t.$implicit,i=o.Fc(2);return o.tc(3).downloadFile.emit({src:i.src,file:c})})),o.uc(3,"async"),o.uc(4,"fileIcon"),o.gc(),o.hc(5,"div",14),o.Qc(6),o.gc(),o.gc()}if(2&e){const e=t.$implicit;o.Ob(1),o.zc("src",o.vc(3,2,o.vc(4,4,e)),o.Ic),o.Ob(5),o.Sc(" ",e.title," ")}}function Se(e,t){if(1&e&&(o.hc(0,"div",9),o.Oc(1,Oe,7,6,"div",10),o.gc()),2&e){const e=o.tc().$implicit;o.Ob(1),o.zc("ngForOf",e.files)}}const ke=function(e){return{color:e}};function we(e,t){if(1&e&&(o.hc(0,"mat-card"),o.hc(1,"div",6),o.hc(2,"small"),o.Qc(3),o.uc(4,"date"),o.gc(),o.gc(),o.Oc(5,Se,2,1,"div",7),o.hc(6,"p",8),o.Qc(7),o.gc(),o.gc()),2&e){const e=t.$implicit,c=o.tc();o.Ob(1),o.zc("ngStyle",o.Bc(9,ke,e.user._id===c.userOnline._id?"#7b87cc":"#d1870c"))("fxLayoutAlign",e.user._id===c.userOnline._id?"flex-start":"flex-end"),o.Ob(2),o.Tc(" ",o.wc(4,6,e.date,"M/d/yy, h:mm a")," ",e.user.name,""),o.Ob(2),o.zc("ngIf",e.files.length>0),o.Ob(2),o.Rc(e.text)}}let ye=(()=>{class e{constructor(e){this.renderer=e,this.getMessages=new o.r,this.downloadFile=new o.r,this.showSpinner=!1,this.ngAfterViewCheckedTriggered=0}ngOnChanges(e){e.messages&&this.divMessages&&!e.messages.firstChange&&(this.showSpinner=!1,this.divMessages.nativeElement.scrollTop=5),e.newMessage&&this.newMessage&&(this.messages.push(this.newMessage),this.messagesCount++,Object(b.a)().subscribe(()=>{this.scrollToBottom()}))}ngAfterViewInit(){this.renderer.listen(this.divMessages.nativeElement,"scroll",e=>{0===e.target.scrollTop&&this.messages.length<this.messagesCount?(this.showSpinner=!0,this.getMessages.emit({from:this.messages.length})):this.showSpinner=!1})}ngAfterViewChecked(){this.ngAfterViewCheckedTriggered<2&&this.scrollToBottom()}scrollToBottom(){const e=this.divMessages;e.nativeElement.scrollTop=e.nativeElement.scrollHeight,this.ngAfterViewCheckedTriggered++}ngOnDestroy(){this.dialogSubs&&this.dialogSubs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.bc(o.Q))},e.\u0275cmp=o.Vb({type:e,selectors:[["chat-messages"]],viewQuery:function(e,t){var c;1&e&&o.Wc(ve,!0),2&e&&o.Ec(c=o.qc())&&(t.divMessages=c.first)},inputs:{messages:"messages",messagesCount:"messagesCount",userOnline:"userOnline",newMessage:"newMessage"},outputs:{getMessages:"getMessages",downloadFile:"downloadFile"},features:[o.Mb],decls:5,vars:2,consts:[[1,"div-messages"],["divMessages",""],["fxLayoutAlign","center"],[3,"diameter",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"diameter"],[3,"ngStyle","fxLayoutAlign"],["class","div-files","fxLayout","row",4,"ngIf"],[1,"p-message"],["fxLayout","row",1,"div-files"],["class","div-file","fxLayout","column",4,"ngFor","ngForOf"],["fxLayout","column",1,"div-file"],["alt","",1,"file-icon",3,"src","click"],["fileImg",""],[1,"div-file-title"]],template:function(e,t){1&e&&(o.hc(0,"div",0,1),o.hc(2,"div",2),o.Oc(3,xe,1,1,"mat-spinner",3),o.gc(),o.Oc(4,we,8,11,"mat-card",4),o.gc()),2&e&&(o.Ob(3),o.zc("ngIf",t.showSpinner),o.Ob(1),o.zc("ngForOf",t.messages))},directives:[u.e,i.t,i.s,be.c,p.a,i.w,O.d,u.f],pipes:[i.f,i.b,Z],styles:[".div-messages[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.div-messages[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.file-icon[_ngcontent-%COMP%]{height:70px;width:70px;cursor:pointer}.div-files[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden;max-height:500px}.div-files[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.div-file[_ngcontent-%COMP%]{width:100px;height:150px}.div-file[_ngcontent-%COMP%]   .div-file-title[_ngcontent-%COMP%]{max-height:20px;font-size:10px;word-break:break-all}.p-message[_ngcontent-%COMP%]{word-break:break-all}"],changeDetection:0}),e})();function Me(e,t){if(1&e&&o.cc(0,"chat-users",7),2&e){const e=o.tc(2);o.zc("users",e.users)}}function Fe(e,t){if(1&e&&(o.hc(0,"div",5),o.Oc(1,Me,1,1,"chat-users",6),o.gc()),2&e){const e=o.tc();o.Ob(1),o.zc("ngIf",e.showUsers)}}function Te(e,t){if(1&e){const e=o.ic();o.hc(0,"chat-messages",8),o.pc("getMessages",(function(t){return o.Hc(e),o.tc().getMessages.emit(t)}))("downloadFile",(function(t){return o.Hc(e),o.tc().downloadFile.emit(t)})),o.gc()}if(2&e){const e=o.tc();o.zc("userOnline",e.userOnline)("messages",e.messages)("newMessage",e.newMessage)("msg",e.msg)("messagesCount",e.messagesCount)}}let Ie=(()=>{class e{constructor(){this.users=[],this.sendMsg=new o.r,this.getMessages=new o.r,this.downloadFile=new o.r,this.msg=new V.a([]),this.showUsers=!1}sendMessage(e){this.sendMsg.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Vb({type:e,selectors:[["app-chat"]],inputs:{users:"users",messages:"messages",newMessage:"newMessage",messagesCount:"messagesCount",userOnline:"userOnline"},outputs:{sendMsg:"sendMsg",getMessages:"getMessages",downloadFile:"downloadFile"},decls:5,vars:4,consts:[["fxLayout.lt-md","column",1,"div-chat-container"],["fxFlex.lt-md","15","fxFlex.gt-sm","10",4,"ngIf"],["fxLayout","column",3,"fxFlex.lt-md","fxFlex.gt-sm"],["fxFlex","75",3,"userOnline","messages","newMessage","msg","messagesCount","getMessages","downloadFile",4,"ngIf"],["fxFlex","25",3,"sendMsg","showUsers"],["fxFlex.lt-md","15","fxFlex.gt-sm","10"],[3,"users",4,"ngIf"],[3,"users"],["fxFlex","75",3,"userOnline","messages","newMessage","msg","messagesCount","getMessages","downloadFile"]],template:function(e,t){1&e&&(o.hc(0,"div",0),o.Oc(1,Fe,2,1,"div",1),o.hc(2,"div",2),o.Oc(3,Te,1,5,"chat-messages",3),o.hc(4,"chat-input",4),o.pc("sendMsg",(function(e){return t.sendMessage(e)}))("showUsers",(function(e){return t.showUsers=e})),o.gc(),o.gc(),o.gc()),2&e&&(o.Ob(1),o.zc("ngIf",t.showUsers),o.Ob(1),o.zc("fxFlex.lt-md",t.showUsers?"85":"100")("fxFlex.gt-sm",t.showUsers?"90":"100"),o.Ob(1),o.zc("ngIf",t.messages))},directives:[u.f,i.t,u.b,ue,pe,ye],styles:[".div-chat-container[_ngcontent-%COMP%]{height:100%;overflow-y:hidden}"]}),e})(),Ce=(()=>{class e{constructor(e,t,c,i){this.chatService=e,this.taskService=t,this.filesService=c,this.authService=i,this.users=[]}ngOnInit(){this.listenningMessages(),this.listenningUsersConnected()}ngOnChanges(e){e.taskSelected&&this.taskSelected&&(this.messages=[],this.users=this.taskSelected.participants,this.getMessages(0))}sendMessage(e){this.chatService.postMessage(e,this.taskSelected._id).subscribe(e=>{this.newMessage=e})}getMessages(e){this.chatService.getMessages(this.taskSelected._id,e).subscribe(e=>{let t=this.messages?this.messages:[];t.unshift(...e.messages),this.messages=[...t.sort((e,t)=>e.date-t.date)],this.messagesCount=e.count})}listenningUsersConnected(){this.usersConnectedSubs&&this.usersConnectedSubs.unsubscribe(),this.usersConnectedSubs=this.taskService.usersConnected().subscribe(e=>{this.taskSelected.participants.forEach((t,c)=>{this.taskSelected.participants[c].connected=!!e.includes(t._id)}),this.users=[...this.taskSelected.participants]})}listenningMessages(){this.messagesSubs=this.chatService.listenningMessages().subscribe(e=>{this.newMessage=e,this.spreadFiles(e.files)})}spreadFiles(e){e.forEach(e=>{this.filesService.spreadFile(e,"POST")})}ngOnDestroy(){this.messagesSubs&&this.messagesSubs.unsubscribe(),this.usersConnectedSubs&&this.usersConnectedSubs.unsubscribe(),this.dialogSubs&&this.dialogSubs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.bc(j),o.bc(d.a),o.bc($),o.bc(l.a))},e.\u0275cmp=o.Vb({type:e,selectors:[["app-task-manager-chat"]],inputs:{taskSelected:"taskSelected"},features:[o.Mb],decls:2,vars:5,consts:[[1,"div-container"],[3,"messages","newMessage","messagesCount","userOnline","users","sendMsg","getMessages","downloadFile"]],template:function(e,t){1&e&&(o.hc(0,"div",0),o.hc(1,"app-chat",1),o.pc("sendMsg",(function(e){return t.sendMessage(e)}))("getMessages",(function(e){return t.getMessages(e.from)}))("downloadFile",(function(e){return t.filesService.downloadFile(e).subscribe()})),o.gc(),o.gc()),2&e&&(o.Ob(1),o.zc("messages",t.messages)("newMessage",t.newMessage)("messagesCount",t.messagesCount)("userOnline",t.authService.userOnline)("users",t.users))},directives:[Ie],styles:[".div-container[_ngcontent-%COMP%]{height:82vh}@media (max-width:1279px){.div-container[_ngcontent-%COMP%]{height:74vh}}"]}),e})();function ze(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+1]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+1])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+1])),o.Ic),o.Ob(7),o.Rc(t.files[e+1].title)}}function Le(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+2]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+2])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+2])),o.Ic),o.Ob(7),o.Rc(t.files[e+2].title)}}function _e(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+3]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+3])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+3])),o.Ic),o.Ob(7),o.Rc(t.files[e+3].title)}}function Pe(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+4]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+4])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+4])),o.Ic),o.Ob(7),o.Rc(t.files[e+4].title)}}function Ae(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+5]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+5])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+5])),o.Ic),o.Ob(7),o.Rc(t.files[e+5].title)}}function Qe(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+6]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+6])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+6])),o.Ic),o.Ob(7),o.Rc(t.files[e+6].title)}}function De(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+7]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+7])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+7])),o.Ic),o.Ob(7),o.Rc(t.files[e+7].title)}}function Re(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+8]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+8])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+8])),o.Ic),o.Ob(7),o.Rc(t.files[e+8].title)}}function Ee(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",5),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+9]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+9])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+9])),o.Ic),o.Ob(7),o.Rc(t.files[e+9].title)}}function He(e,t){if(1&e){const e=o.ic();o.hc(0,"div",4),o.hc(1,"mat-card",5),o.hc(2,"div",6),o.hc(3,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(4),c=o.tc().$implicit;return o.tc().filesService.downloadFile({src:t.src,file:c}).subscribe()})),o.uc(5,"async"),o.uc(6,"fileIcon"),o.gc(),o.hc(7,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc().$implicit;return o.tc().deleteFile(t)})),o.Qc(8,"delete"),o.gc(),o.gc(),o.hc(9,"p",10),o.Qc(10),o.gc(),o.gc(),o.Oc(11,ze,10,6,"mat-card",11),o.Oc(12,Le,10,6,"mat-card",11),o.Oc(13,_e,10,6,"mat-card",11),o.Oc(14,Pe,10,6,"mat-card",11),o.Oc(15,Ae,10,6,"mat-card",11),o.Oc(16,Qe,10,6,"mat-card",11),o.Oc(17,De,10,6,"mat-card",11),o.Oc(18,Re,10,6,"mat-card",11),o.Oc(19,Ee,10,6,"mat-card",11),o.gc()}if(2&e){const e=o.tc(),t=e.$implicit,c=e.index,i=o.tc();o.Ob(3),o.zc("src",o.vc(5,11,o.vc(6,13,t)),o.Ic),o.Ob(7),o.Rc(t.title),o.Ob(1),o.zc("ngIf",c+1<i.files.length),o.Ob(1),o.zc("ngIf",c+2<i.files.length),o.Ob(1),o.zc("ngIf",c+3<i.files.length),o.Ob(1),o.zc("ngIf",c+4<i.files.length),o.Ob(1),o.zc("ngIf",c+5<i.files.length),o.Ob(1),o.zc("ngIf",c+6<i.files.length),o.Ob(1),o.zc("ngIf",c+7<i.files.length),o.Ob(1),o.zc("ngIf",c+8<i.files.length),o.Ob(1),o.zc("ngIf",c+9<i.files.length)}}function Ue(e,t){if(1&e&&(o.hc(0,"div"),o.Oc(1,He,20,15,"div",3),o.gc()),2&e){const e=t.index;o.Ob(1),o.zc("ngIf",e%10==0)}}function je(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",12),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+1]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+1])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+1])),o.Ic),o.Ob(7),o.Rc(t.files[e+1].title)}}function Ne(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",12),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+2]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+2])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+2])),o.Ic),o.Ob(7),o.Rc(t.files[e+2].title)}}function qe(e,t){if(1&e){const e=o.ic();o.hc(0,"mat-card",12),o.hc(1,"div",6),o.hc(2,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(3),c=o.tc(2).index,i=o.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+3]}).subscribe()})),o.uc(4,"async"),o.uc(5,"fileIcon"),o.gc(),o.hc(6,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc(2).index,c=o.tc();return c.deleteFile(c.files[t+3])})),o.Qc(7,"delete"),o.gc(),o.gc(),o.hc(8,"p",10),o.Qc(9),o.gc(),o.gc()}if(2&e){const e=o.tc(2).index,t=o.tc();o.Ob(2),o.zc("src",o.vc(4,2,o.vc(5,4,t.files[e+3])),o.Ic),o.Ob(7),o.Rc(t.files[e+3].title)}}function $e(e,t){if(1&e){const e=o.ic();o.hc(0,"div",4),o.hc(1,"mat-card",12),o.hc(2,"div",6),o.hc(3,"img",7,8),o.pc("click",(function(){o.Hc(e);const t=o.Fc(4),c=o.tc().$implicit;return o.tc().filesService.downloadFile({src:t.src,file:c}).subscribe()})),o.uc(5,"async"),o.uc(6,"fileIcon"),o.gc(),o.hc(7,"mat-icon",9),o.pc("click",(function(){o.Hc(e);const t=o.tc().$implicit;return o.tc().deleteFile(t)})),o.Qc(8,"delete"),o.gc(),o.gc(),o.hc(9,"p",10),o.Qc(10),o.gc(),o.gc(),o.Oc(11,je,10,6,"mat-card",13),o.Oc(12,Ne,10,6,"mat-card",13),o.Oc(13,qe,10,6,"mat-card",13),o.gc()}if(2&e){const e=o.tc(),t=e.$implicit,c=e.index,i=o.tc();o.Ob(3),o.zc("src",o.vc(5,5,o.vc(6,7,t)),o.Ic),o.Ob(7),o.Rc(t.title),o.Ob(1),o.zc("ngIf",c+1<i.files.length),o.Ob(1),o.zc("ngIf",c+2<i.files.length),o.Ob(1),o.zc("ngIf",c+3<i.files.length)}}function Ve(e,t){if(1&e&&(o.hc(0,"div"),o.Oc(1,$e,14,9,"div",3),o.gc()),2&e){const e=t.index;o.Ob(1),o.zc("ngIf",e%4==0)}}let Be=(()=>{class e{constructor(e,t){this.filesService=e,this.taskService=t,this.from=0,this.total=0}ngOnInit(){this.fileSubscription=this.filesService.file$.subscribe(e=>{switch(e.order){case"POST":this.files.push(e.file);break;case"DELETE":this.files=this.files.filter(t=>t._id!=e.file._id)}})}ngOnChanges(e){e.taskSelected&&this.taskSelected&&this.taskService.getTaskFiles(this.taskSelected._id,0,100).subscribe(e=>{this.files=e})}deleteFile(e){this.filesService.deleteFile(e).subscribe(e=>{e&&(this.files=this.files.filter(t=>t._id!=e._id),this.filesService.spreadFile(e,"DELETE"))})}ngOnDestroy(){this.fileSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.bc($),o.bc(d.a))},e.\u0275cmp=o.Vb({type:e,selectors:[["app-task-manager-files"]],inputs:{taskSelected:"taskSelected"},features:[o.Mb],decls:4,vars:2,consts:[["fxShow.gt-md","","fxHide.lt-lg","",1,"div-files"],[4,"ngFor","ngForOf"],["fxHide.gt-md","","fxShow.lt-lg","",1,"div-files"],["fxLayout","row",4,"ngIf"],["fxLayout","row"],["fxLayout","column","fxFlex","10"],["fxFlex","80"],["fxFlex","80","alt","",3,"src","click"],["img",""],["color","warn","fxFlex","20",3,"click"],["fxFlex","20"],["fxLayout","column","fxFlex","10",4,"ngIf"],["fxLayout","column","fxFlex","25"],["fxLayout","column","fxFlex","25",4,"ngIf"]],template:function(e,t){1&e&&(o.hc(0,"div",0),o.Oc(1,Ue,2,1,"div",1),o.gc(),o.hc(2,"div",2),o.Oc(3,Ve,2,1,"div",1),o.gc()),2&e&&(o.Ob(1),o.zc("ngForOf",t.files),o.Ob(2),o.zc("ngForOf",t.files))},directives:[O.c,i.s,i.t,u.f,p.a,u.b,m.a],pipes:[i.b,Z],styles:[".div-files[_ngcontent-%COMP%]{height:80vh;overflow-x:hidden;overflow-y:auto}.div-files[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:14vh;padding:5px!important}.div-files[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:0}.div-files[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}@media (max-width:1279px){.div-files[_ngcontent-%COMP%]{height:75vh!important}}"]}),e})();function Ke(e,t){1&e&&(o.Qc(0," Task info "),o.hc(1,"mat-icon",7),o.Qc(2,"poll"),o.gc())}function Ge(e,t){if(1&e){const e=o.ic();o.hc(0,"app-task-manager-info",8),o.pc("deleteTask",(function(){return o.Hc(e),o.tc(2).deleteTask()}))("toggleStatus",(function(t){return o.Hc(e),o.tc(2).toggleStatus(t)}))("editTask",(function(){return o.Hc(e),o.tc(2).editTask()}))("actionResolved",(function(t){return o.Hc(e),o.tc(2).resolveTaskAction(t)})),o.gc()}if(2&e){const e=o.tc(2);o.zc("taskSelected",e.taskSelected)}}function We(e,t){1&e&&(o.Qc(0," Chat "),o.hc(1,"mat-icon",7),o.Qc(2," chat"),o.gc())}function Xe(e,t){if(1&e&&o.cc(0,"app-task-manager-chat",9),2&e){const e=o.tc(2);o.zc("users",e.users)("taskSelected",e.taskSelected)}}function Ye(e,t){1&e&&(o.Qc(0," Files "),o.hc(1,"mat-icon",7),o.Qc(2,"folder"),o.gc())}function Ze(e,t){if(1&e&&o.cc(0,"app-task-manager-files",10),2&e){const e=o.tc(2);o.zc("taskSelected",e.taskSelected)}}function Je(e,t){if(1&e){const e=o.ic();o.fc(0),o.hc(1,"mat-tab-group",1,2),o.pc("selectedIndexChange",(function(t){return o.Hc(e),o.tc().tabNav(t)})),o.hc(3,"mat-tab"),o.Oc(4,Ke,3,0,"ng-template",3),o.Oc(5,Ge,1,1,"app-task-manager-info",4),o.gc(),o.hc(6,"mat-tab"),o.Oc(7,We,3,0,"ng-template",3),o.Oc(8,Xe,1,2,"app-task-manager-chat",5),o.gc(),o.hc(9,"mat-tab"),o.Oc(10,Ye,3,0,"ng-template",3),o.Oc(11,Ze,1,1,"app-task-manager-files",6),o.gc(),o.gc(),o.ec()}if(2&e){const e=o.tc();o.Ob(1),o.zc("selectedIndex",e.tabIndex),o.Ob(4),o.zc("ngIf",0===e.tabIndex),o.Ob(3),o.zc("ngIf",1===e.tabIndex),o.Ob(3),o.zc("ngIf",2===e.tabIndex)}}let et=[{path:":tab",component:(()=>{class e{constructor(e,t,c,i,s,n){this.authService=e,this.taskService=t,this.dialogsService=c,this.ar=i,this.lpDialogsService=s,this.router=n}ngOnInit(){this.ar.parent.paramMap.subscribe(e=>{const t=this.ar.snapshot.paramMap.get("tab");this.setTabIndex(t);const c=e.get("id");(!this.taskSelected||this.taskSelected&&c!==this.taskSelected._id)&&this.getTaskById(c).then(()=>{this.getUsersInTask()})}),this.listenTaskChanges()}listenTaskChanges(){this.taskSubscription=this.taskService.task$.subscribe(e=>{if(e)switch(e.action){case"PUT":e.task._id===this.taskSelected._id&&(this.taskSelected=e.task)}})}setTabIndex(e){switch(e){case"info":this.tabIndex=0;break;case"chat":this.tabIndex=1;break;case"files":this.tabIndex=2}r.c.set("state-data",e,"task-manager-tab")}getUsersInTask(){this.taskService.userInTask(this.taskSelected._id).then(e=>{this.taskSelected.participants.forEach((t,c)=>{this.taskSelected.participants[c].connected=!!e.includes(t._id)})})}getTaskById(e){return new Promise((t,c)=>{this.taskService.getTaskById(e).subscribe(e=>{this.taskSelected=e,t(!0)})})}toggleStatus(e){this.lpDialogsService.openConfirmDialog("ARE YOU SURE?",`The task status will switch to "${e}" status`).pipe(Object(a.a)(t=>t?this.taskService.putTask({status:e},this.taskSelected._id):Object(n.b)())).subscribe()}editTask(){this.dialogsService.openEditCreateTaskDialog(this.taskSelected._id)}deleteTask(){this.taskService.deleteTask(this.taskSelected._id).subscribe()}resolveTaskAction(e){this.taskService.putTask({[Object.keys(e)[0]]:e[Object.keys(e)[0]]},e.itemId).subscribe()}tabNav(e){const t=0===e?"info":1===e?"chat":2===e?"files":"info";this.router.navigate([t],{relativeTo:this.ar.parent}).then(()=>{this.setTabIndex(t)})}ngOnDestroy(){this.taskSelected&&this.taskService.userOutTask(this.taskSelected._id),this.taskSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.bc(l.a),o.bc(d.a),o.bc(g.a),o.bc(s.a),o.bc(f.b),o.bc(s.d))},e.\u0275cmp=o.Vb({type:e,selectors:[["app-task-manager-panel"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-stretch-tabs","","fxFlex","100","mat-align-tabs","center",3,"selectedIndex","selectedIndexChange"],["tabGroup",""],["mat-tab-label",""],[3,"taskSelected","deleteTask","toggleStatus","editTask","actionResolved",4,"ngIf"],[3,"users","taskSelected",4,"ngIf"],[3,"taskSelected",4,"ngIf"],["color","primary"],[3,"taskSelected","deleteTask","toggleStatus","editTask","actionResolved"],[3,"users","taskSelected"],[3,"taskSelected"]],template:function(e,t){1&e&&o.Oc(0,Je,12,4,"ng-container",0),2&e&&o.zc("ngIf",null!==t.tabIndex&&t.taskSelected)},directives:[i.t,h.c,u.b,h.a,h.d,m.a,Q,Ce,Be],styles:[".mat-tab-group[_ngcontent-%COMP%]{height:100%;width:100%}.div-task-name[_ngcontent-%COMP%]{background-color:#7b87cc;color:#f5f5f5;height:25px;font-weight:bolder}  .mat-tab-body-wrapper{height:100%!important;margin:0!important}  .mat-tab-header,   .mat-tab-labels{height:6vh!important}  .mat-tab-label{height:6vh!important;padding:0!important}"]}),e})()}],tt=(()=>{class e{}return e.\u0275mod=o.Zb({type:e}),e.\u0275inj=o.Yb({factory:function(t){return new(t||e)},imports:[[i.c,s.g.forChild(et)],s.g]}),e})();var ct=c("YUcS"),it=c("+Mmm"),st=c("9Xeq"),nt=c("jAig"),at=c("mvOm");let rt=(()=>{class e{}return e.\u0275mod=o.Zb({type:e}),e.\u0275inj=o.Yb({factory:function(t){return new(t||e)},imports:[[i.c,ct.a,W.i,de,nt.a,st.a,at.a]]}),e})();var ot=c("CDL9");let lt=(()=>{class e{}return e.\u0275mod=o.Zb({type:e}),e.\u0275inj=o.Yb({factory:function(t){return new(t||e)},imports:[[i.c,tt,it.a,W.i,rt,nt.a,ct.a,st.a,tt,ot.a]]}),e})()}}]);