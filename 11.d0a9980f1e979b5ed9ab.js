(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"1LmZ":function(t,e,i){"use strict";i.d(e,"a",(function(){return V}));var c=i("fXoL"),n=i("SV+Y"),a=i("XiUz"),o=i("bTqV"),s=i("NFeN");let r=(()=>{class t{constructor(t){this.mdService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(c.bc(n.a))},t.\u0275cmp=c.Vb({type:t,selectors:[["app-notifications-info"]],decls:21,vars:3,consts:[["fxLayout","column"],[1,"div-task-checked"],["fxLayoutAlign","center"],["fxLayout","row"],["fxLayout","column","fxLayoutAlign","center","mat-raised-button",""],["color","warn"]],template:function(t,e){1&t&&(c.hc(0,"div",0),c.hc(1,"div"),c.cc(2,"div",1),c.hc(3,"div",2),c.Pc(4,"** TASK CHECKED **"),c.gc(),c.gc(),c.hc(5,"div",0),c.hc(6,"div",3),c.hc(7,"button",4),c.hc(8,"mat-icon"),c.Pc(9,"done"),c.gc(),c.gc(),c.Pc(10,"CLICK TO CHANGE NOTIFICATION STATUS AS CHECKED "),c.gc(),c.hc(11,"div",3),c.hc(12,"button",4),c.hc(13,"mat-icon",5),c.Pc(14,"assignment_late"),c.gc(),c.gc(),c.Pc(15,"CLICK TO SEE REQUIRED ASSIGNMENT DETAIL"),c.gc(),c.hc(16,"div",3),c.hc(17,"button",4),c.hc(18,"mat-icon"),c.Pc(19),c.gc(),c.gc(),c.Pc(20,"CLICK TO SEE NOTIFICATION ITEM DETAIL"),c.gc(),c.gc(),c.gc()),2&t&&(c.Ob(1),c.Mc("margin-bottom","10px"),c.Ob(18),c.Qc(e.mdService.desktop?"launch":"info"))},directives:[a.c,a.b,o.a,s.a],styles:[".div-task-checked[_ngcontent-%COMP%]{background-color:#fcebcd;width:100%;height:50px}"]}),t})();var d=i("PqYM"),h=i("Brg/"),l=i("tyNb"),p=i("Yt/C"),f=i("ofXK"),m=i("znSr"),u=i("own3"),g=i("wZkO"),b=i("LRne"),v=i("lJxs"),S=i("JIr8"),x=i("EY2u"),O=i("S6We"),k=i("T1xj"),C=i("Wp6s"),j=i("O31/"),I=i("qmzK"),w=i("RCfm");let P=(()=>{class t{constructor(t,e,i,c){this.taskService=t,this.cdr=e,this.authService=i,this.dialogsService=c,this.date=(new Date).getTime()}restoreVersion(t){let e=h.d.copyObject(t.taskChanges);t.taskChanges.user=this.authService.userOnline._id,t.taskChanges.participants&&(t.taskChanges.participants=t.taskChanges.participants.map(t=>t._id)),this.taskService.putTask(t.taskChanges,t.id).subscribe(t=>{this.taskSelected=h.d.mergeObjects(t,e),this.cdr.detectChanges()})}editTask(t){this.dialogsService.openEditCreateTaskDialog(t)}}return t.\u0275fac=function(e){return new(e||t)(c.bc(O.a),c.bc(c.i),c.bc(j.a),c.bc(I.a))},t.\u0275cmp=c.Vb({type:t,selectors:[["app-task-detail-smart"]],inputs:{taskSelected:"taskSelected",date:"date"},decls:1,vars:2,consts:[[3,"taskSelected","date","restoreVersion","editTask"]],template:function(t,e){1&t&&(c.hc(0,"app-task-detail",0),c.pc("restoreVersion",(function(t){return e.restoreVersion(t)}))("editTask",(function(t){return e.editTask(t)})),c.gc()),2&t&&c.zc("taskSelected",e.taskSelected)("date",e.date)},directives:[w.a],encapsulation:2}),t})();var T=i("HlmG");let y=(()=>{class t{constructor(t,e,i,c){this.authService=t,this.projectService=e,this.cdr=i,this.dialogsService=c,this.date=(new Date).getTime()}restoreVersion(t){let e=h.d.copyObject(t.projectChanges);t.projectChanges.user=this.authService.userOnline._id,t.projectChanges.participants&&(t.projectChanges.participants=t.projectChanges.participants.map(t=>t._id)),this.projectService.putProject(t.projectChanges,this.projectSelected._id).pipe(Object(v.a)(t=>t.project)).subscribe(t=>{this.projectSelected=h.d.mergeObjects(t,e),this.cdr.detectChanges()})}editProject(){this.dialogsService.openEditProjectDialog(this.projectSelected)}}return t.\u0275fac=function(e){return new(e||t)(c.bc(j.a),c.bc(k.a),c.bc(c.i),c.bc(I.a))},t.\u0275cmp=c.Vb({type:t,selectors:[["app-project-detail-smart"]],inputs:{date:"date",projectSelected:"projectSelected"},decls:1,vars:2,consts:[[3,"date","projectSelected","editProject","restoreVersion"]],template:function(t,e){1&t&&(c.hc(0,"app-project-detail",0),c.pc("editProject",(function(){return e.editProject()}))("restoreVersion",(function(t){return e.restoreVersion(t)})),c.gc()),2&t&&c.zc("date",e.date)("projectSelected",e.projectSelected)},directives:[T.a],encapsulation:2}),t})();function N(t,e){if(1&t&&(c.hc(0,"div",6),c.cc(1,"app-task-detail-smart",7),c.gc()),2&t){const t=c.tc(2);c.Ob(1),c.zc("taskSelected",t.itemSelected)("date",t.notification.date)}}function E(t,e){if(1&t&&(c.hc(0,"div",6),c.cc(1,"app-project-detail-smart",8),c.gc()),2&t){const t=c.tc(2);c.Ob(1),c.zc("date",t.notification.date)("projectSelected",t.itemSelected)}}function _(t,e){if(1&t&&(c.hc(0,"div",9),c.hc(1,"p"),c.Pc(2),c.gc(),c.gc()),2&t){const t=c.tc(2);c.Mc("margin-top","30px"),c.Ob(1),c.Mc("color","red"),c.Ob(1),c.Tc(" ",t.notification.type," ",t.notification.prevItem.name," has been deleted by ",t.notification.userFrom.name," ")}}function M(t,e){if(1&t){const t=c.ic();c.hc(0,"mat-card",1),c.Nc(1,N,2,2,"div",2),c.Nc(2,E,2,2,"div",2),c.hc(3,"div",3),c.hc(4,"mat-icon",4),c.pc("click",(function(){return c.Hc(t),c.tc().unselectNotification.emit()})),c.Pc(5,"highlight_off"),c.gc(),c.gc(),c.Nc(6,_,3,7,"div",5),c.gc()}if(2&t){const t=c.tc();c.Ob(1),c.zc("ngIf",t.itemSelected&&"Task"===t.notification.type&&!t.itemSelected.deleted),c.Ob(1),c.zc("ngIf",t.itemSelected&&"Project"===t.notification.type&&!t.itemSelected.deleted),c.Ob(4),c.zc("ngIf",t.itemSelected&&t.itemSelected.deleted)}}let L=(()=>{class t{constructor(t,e,i){this.taskService=t,this.projectService=e,this.cdr=i,this.unselectNotification=new c.r}ngOnChanges(t){if(t.notification&&this.notification){let t;switch(this.itemSelected=void 0,this.getItems(this.notification),this.itemSubscription&&this.itemSubscription.unsubscribe(),this.notification.type){case"Task":t=this.taskService.task$;break;case"Project":t=this.projectService.project$}this.itemSubscription=t.subscribe(t=>{if(t){const e=t.task?t.task:t.project;if(e._id===this.itemSelected._id){switch(t.action){case"PUT":this.itemSelected=e;break;case"DELETE":this.itemSelected=this.notification.prevItem,this.itemSelected.deleted=!0}this.cdr.detectChanges()}}})}}getItems(t){let e;switch(t.type){case"Task":e="DELETE"!=t.method?this.taskService.getTaskById(t.item._id?t.item._id:t.item):Object(b.a)(t.prevItem).pipe(Object(v.a)(t=>(t.deleted=!0,t)));break;case"Project":e="DELETE"!=t.method?this.projectService.getProjectById(t.item._id?t.item._id:t.item):Object(b.a)(t.prevItem)}e.pipe(Object(S.a)(e=>(this.itemSelected=t.prevItem,this.itemSelected.deleted=!0,Object(x.b)()))).subscribe(t=>{this.itemSelected=null!=t?t:this.itemSelected})}ngOnDestroy(){this.itemSubscription&&this.itemSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.bc(O.a),c.bc(k.a),c.bc(c.i))},t.\u0275cmp=c.Vb({type:t,selectors:[["app-notification-change-detail"]],inputs:{notification:"notification"},outputs:{unselectNotification:"unselectNotification"},features:[c.Mb],decls:1,vars:1,consts:[["class","mat-card-notification-detail",4,"ngIf"],[1,"mat-card-notification-detail"],["fxFlex","90",4,"ngIf"],["fxFlex","10","fxLayoutAlign","flex-end"],["color","warn",1,"mat-icon-close",3,"click"],["fxLayoutAlign","center",3,"margin-top",4,"ngIf"],["fxFlex","90"],[3,"taskSelected","date"],[3,"date","projectSelected"],["fxLayoutAlign","center"]],template:function(t,e){1&t&&c.Nc(0,M,7,3,"mat-card",0),2&t&&c.zc("ngIf",e.notification)},directives:[f.l,C.a,a.a,a.b,s.a,P,y],styles:[".mat-card-notification-detail[_ngcontent-%COMP%]{height:78vh;width:100%;margin:20px 0 0}@media (max-width:1279px){.mat-card-notification-detail[_ngcontent-%COMP%]{height:60vh}}mat-icon[_ngcontent-%COMP%]{font-size:30px!important}.mat-icon-close[_ngcontent-%COMP%]{margin-right:13px}"]}),t})();function z(t,e){1&t&&(c.hc(0,"span"),c.Pc(1,"NOTIFICATIONS TO CHECK"),c.gc())}function A(t,e){1&t&&(c.hc(0,"span"),c.Pc(1,"NOTIFICATIONS RECORD"),c.gc())}function F(t,e){if(1&t){const t=c.ic();c.hc(0,"div",9),c.hc(1,"app-notification-change-detail",10),c.pc("unselectNotification",(function(){return c.Hc(t),c.tc().unselectNotification()})),c.gc(),c.gc()}if(2&t){const t=c.tc();c.Mc("margin-top","5vh"),c.Ob(1),c.zc("notification",t.notificationSelected)}}const D=function(t){return{"div-info-icon-desktop-without-task":t}};let V=(()=>{class t{constructor(t,e,i,c,n){this.ar=t,this.router=e,this.cdr=i,this.notificationService=c,this.mdService=n,this.infoComponent=r}ngOnInit(){this.notificationSubs=this.notificationService.notificationSelected$.subscribe(t=>{this.notificationSelected=t,this.selecTab()})}ngAfterViewInit(){this.childPath=this.router.url.split("/")[3],h.c.set("state-data",this.childPath,"home-path"),this.tabIndex="new"===this.childPath?0:1,this.cdr.detectChanges()}navigate(t){this.selecTab();let e=0===t?"new":"record";e+=this.notificationSelected?"/"+this.notificationSelected._id:"",this.router.navigate([e],{relativeTo:this.ar}).then(()=>{this.childPath=0===t?"new":"record",h.c.set("state-data",this.childPath,"home-path")})}unselectNotification(){this.notificationService.selectNotification(),this.navigate("new"===this.childPath?0:1)}selecTab(){this.tabIndex="new"===this.childPath?1:0,this.cdr.detectChanges(),Object(d.a)().subscribe(()=>{this.tabIndex="new"===this.childPath?0:1})}ngOnDestroy(){this.notificationSubs&&this.notificationSubs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.bc(l.a),c.bc(l.b),c.bc(c.i),c.bc(p.a),c.bc(n.a))},t.\u0275cmp=c.Vb({type:t,selectors:[["app-home"]],decls:16,vars:11,consts:[[1,"div-info-icon",3,"ngClass"],[3,"componentToShow"],["fxLayout.gt-sm","row","fxLayout.lt-md","column",1,"div-home"],["fxLayout","column","fxFlex.lt-md","100",3,"fxFlex.gt-md","fxFlex.md"],["mat-stretch-tabs","","mat-tab-nav-bar",""],["mat-tab-link","",3,"active","click"],[4,"ngIf"],["fxFlex","90"],["fxShow.gt-sm","","fxHide.lt-md","","fxFlex.gt-md","28","fxFlex.md","40","fxFlex.lt-md","30",3,"margin-top",4,"ngIf"],["fxShow.gt-sm","","fxHide.lt-md","","fxFlex.gt-md","28","fxFlex.md","40","fxFlex.lt-md","30"],[3,"notification","unselectNotification"]],template:function(t,e){1&t&&(c.hc(0,"div",0),c.cc(1,"lp-bottom-sheet-info",1),c.gc(),c.hc(2,"div",2),c.hc(3,"div",3),c.hc(4,"nav",4),c.hc(5,"a",5),c.pc("click",(function(){return e.navigate(0)})),c.hc(6,"mat-icon"),c.Pc(7,"notification_important"),c.gc(),c.Nc(8,z,2,0,"span",6),c.gc(),c.hc(9,"a",5),c.pc("click",(function(){return e.navigate(1)})),c.hc(10,"mat-icon"),c.Pc(11,"folder"),c.gc(),c.Nc(12,A,2,0,"span",6),c.gc(),c.gc(),c.hc(13,"div",7),c.cc(14,"router-outlet"),c.gc(),c.gc(),c.Nc(15,F,2,3,"div",8),c.gc()),2&t&&(c.zc("ngClass",c.Bc(9,D,!e.notificationSelected)),c.Ob(1),c.zc("componentToShow",e.infoComponent),c.Ob(2),c.zc("fxFlex.gt-md",e.notificationSelected?"70":"100")("fxFlex.md",e.notificationSelected?"60":"100"),c.Ob(2),c.zc("active",0===e.tabIndex),c.Ob(3),c.zc("ngIf",e.mdService.desktop),c.Ob(1),c.zc("active",1===e.tabIndex),c.Ob(3),c.zc("ngIf",e.mdService.desktop),c.Ob(3),c.zc("ngIf",e.notificationSelected))},directives:[f.j,m.a,u.a,a.c,a.a,g.e,g.d,s.a,f.l,l.f,m.b,L],styles:[".div-home[_ngcontent-%COMP%]{height:87vh}  .mat-tab-list .mat-tab-label{flex-basis:1;flex-grow:1}.mat-tab-link[_ngcontent-%COMP%]{height:5vh}mat-icon[_ngcontent-%COMP%]{margin:5px}.div-info-icon[_ngcontent-%COMP%]{top:65px}.div-info-icon-desktop-without-task[_ngcontent-%COMP%]{top:19%}@media (min-width:600px) and (max-width:959px){.div-info-icon[_ngcontent-%COMP%], .div-info-icon-desktop-without-task[_ngcontent-%COMP%]{top:17vh!important}}@media (min-width:0px) and (max-width:600px){.div-home[_ngcontent-%COMP%]{height:90vh}.div-info-icon[_ngcontent-%COMP%], .div-info-icon-desktop-without-task[_ngcontent-%COMP%]{top:18.7vh!important}}"]}),t})()},"99Un":function(t,e,i){"use strict";i.r(e),i.d(e,"HomeModule",(function(){return v}));var c=i("ofXK"),n=i("tyNb"),a=i("1LmZ"),o=i("Brg/"),s=i("fXoL");let r=[{path:"",component:a.a,canActivate:[(()=>{class t{constructor(t,e){this.router=t,this.ar=e}canActivate(){let t=o.c.get("state-data","home-path");return!t||(o.c.remove("state-data","home-path"),void this.router.navigate(["pages/home/"+t]))}}return t.\u0275fac=function(e){return new(e||t)(s.lc(n.b),s.lc(n.a))},t.\u0275prov=s.Xb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()],children:[{path:"",redirectTo:"new",pathMatch:"full"},{path:"record",loadChildren:()=>Promise.all([i.e(0),i.e(2)]).then(i.bind(null,"atIr")).then(t=>t.NotificationsListModule)},{path:"new",loadChildren:()=>Promise.all([i.e(0),i.e(2)]).then(i.bind(null,"atIr")).then(t=>t.NotificationsListModule)}]}],d=(()=>{class t{}return t.\u0275mod=s.Zb({type:t}),t.\u0275inj=s.Yb({factory:function(e){return new(e||t)},imports:[[c.c,n.e.forChild(r)],n.e]}),t})();var h=i("YUcS"),l=i("jAig"),p=i("zAIM"),f=i("yGOH"),m=i("3Pt+"),u=i("DXCE");let g=(()=>{class t{}return t.\u0275mod=s.Zb({type:t}),t.\u0275inj=s.Yb({factory:function(e){return new(e||t)},imports:[[c.c,l.a,h.a,f.a,m.g,u.a]]}),t})();var b=i("own3");let v=(()=>{class t{}return t.\u0275mod=s.Zb({type:t}),t.\u0275inj=s.Yb({factory:function(e){return new(e||t)},imports:[[c.c,d,l.a,h.a,p.a,g,b.b]]}),t})()}}]);