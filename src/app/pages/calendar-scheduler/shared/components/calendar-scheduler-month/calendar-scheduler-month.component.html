


<div [style.margin]="'20px'">
    <div fxLayout="row">
        <div fxFlex="14" *ngFor="let label of labels">
            <p fxLayoutAlign="center"  fxHide.xs>
                {{label.toUpperCase()}}
            </p>
            <p fxLayoutAlign="center"  fxHide.gt-xs fxShow.xs>
                {{label.charAt(0)}}
            </p>
        </div>
    </div>
    <div *ngIf="dayRows" fxLayout="column" >
        <div *ngFor="let row of dayRows" fxLayout="row">
             <div fxFlex="14"  *ngFor="let label of labels ; let i=index"> 
                    <mat-card>
                        <mat-card-content fxLayout="column">
                            <ng-template let-day="aVariable" [ngTemplateOutletContext]="{ aVariable: getDayOfWeek(row,i)  }" [ngTemplateOutlet]="selfie" #selfie>
                                <div>
                                    <div>
                                        <p class="day" [ngClass]="{'day-unactive': checkDayActive(day.date) }"  >{{day.date | date:'d'}}</p>
                                    </div>
                                    <div class="div-events" fxShow.gt-xs fxHide.xs>
                                        <ng-container *ngFor="let event of day.events" >
                                            <mat-icon [matMenuTriggerFor]="menuPc" [matTooltip]="event.name" class="event" [class.event-recursive]="event.recursive"[class.event-task]="event.task"> trip_origin</mat-icon>
                                            <mat-menu #menuPc="matMenu">
                                                <button (click)="checkEvent.emit(event._id)" mat-menu-item>View details</button>
                                                <div  appIsAdm [matTooltip]="eventsService.editionBanned(event) ? 'The event can not be edited because already started': null">
                                                    <button [disabled]="!event.editable" (click)="putEvent.emit(event._id)" mat-menu-item>Edit</button>
                                                </div>
                                                <div appIsAdm [matTooltip]="!event.editable ? 'The event can not be deleted because already started': null">
                                                    <button [disabled]="!event.editable" (click)="deleteEvent.emit(event._id)" mat-menu-item>Delete</button>
                                                </div>
                                            </mat-menu>
                                        </ng-container>
                                    </div>
                                    <p fxLayoutAlign="center" fxHide.gt-xs fxShow.xs>
                                        <mat-icon (click)="checkEvents.emit(day.date)" color="primary" >event</mat-icon>
                                    </p>
                                </div>
                            </ng-template>
                        </mat-card-content>
                    </mat-card>  
            </div>                                      
        </div>
    </div>
    
