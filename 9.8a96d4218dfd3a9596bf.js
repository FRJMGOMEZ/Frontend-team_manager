(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Dx4h:function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));var i=c("fXoL"),n=c("ofXK");function a(t,e){if(1&t&&(i.hc(0,"div"),i.hc(1,"div",1),i.hc(2,"h4"),i.Pc(3,"NAME"),i.gc(),i.hc(4,"p"),i.Pc(5),i.gc(),i.gc(),i.hc(6,"div",1),i.hc(7,"h4"),i.Pc(8,"EMAIL"),i.gc(),i.hc(9,"p"),i.Pc(10),i.gc(),i.gc(),i.hc(11,"div",1),i.hc(12,"h4"),i.Pc(13,"ROLE"),i.gc(),i.hc(14,"p"),i.Pc(15),i.gc(),i.gc(),i.hc(16,"div",1),i.hc(17,"h4"),i.Pc(18,"STATUS"),i.gc(),i.hc(19,"p"),i.Pc(20),i.gc(),i.gc(),i.gc()),2&t){const t=i.tc();i.Ob(5),i.Qc(t.user.name),i.Ob(5),i.Qc(t.user.email),i.Ob(5),i.Qc(t.user.role),i.Ob(5),i.Qc(t.user.status?"active":"deactivated")}}let r=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Vb({type:t,selectors:[["app-user-info"]],inputs:{user:"user"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"div-user-property"]],template:function(t,e){1&t&&i.Nc(0,a,21,4,"div",0),2&t&&i.zc("ngIf",e.user)},directives:[n.l],styles:[".img-user[_ngcontent-%COMP%]{width:15vh;height:15vh;margin:2rem}.div-user-property[_ngcontent-%COMP%]{margin:15px}.div-user-property[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#7b87cc;text-align:center;margin-bottom:5px}.div-user-property[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),t})()},FU17:function(t,e,c){"use strict";c.d(e,"a",(function(){return p}));var i=c("fXoL"),n=c("Brg/"),a=c("3Pt+"),r=c("PqYM"),s=c("QibW"),o=c("ofXK");function l(t,e){if(1&t&&(i.hc(0,"mat-radio-button",3),i.Pc(1),i.gc()),2&t){const t=e.index;i.zc("value",t),i.Ob(1),i.Rc("v",t+1,"")}}let p=(()=>{class t{constructor(){this.prevVersion=new i.r,this.currentVersion=new i.r,this.propagateChange=t=>{}}ngOnInit(){}ngOnChanges(t){t.date&&this.date&&(t.date.firstChange?Object(r.a)(250).subscribe(()=>{this.selectVersion()}):this.selectVersion())}writeValue(t){t&&(this.item?(this.generateVersions(t),this.propagateChange(this.item)):(this.item=n.d.copyObject(t),this.generateVersions(t)))}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}generateVersions(t){this.itemVersions=[],this.itemVersions.push(t||this.item);for(let e=t?t.prevStates.length:this.item.prevStates.length;e>=1;e--)this.itemVersions.unshift(this.getVersion(this.itemVersions[0],t?t.prevStates[e-1].changes:this.item.prevStates[e-1].changes))}getVersion(t,e){return n.d.mergeObjects(t,e)}selectVersion(t){void 0===t&&(this.item.prevStates.forEach((e,c)=>{this.date>e.date&&(t=c+1)}),void 0===t&&(t=0)),this.item=this.itemVersions[t],this.itemV=t,this.prevVersion.emit(this.itemVersions[t-1]?this.itemVersions[t-1]:{}),this.currentVersion.emit(this.itemV),this.propagateChange(this.item)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Vb({type:t,selectors:[["app-item-versions"]],inputs:{item:"item",date:"date"},outputs:{prevVersion:"prevVersion",currentVersion:"currentVersion"},features:[i.Nb([{provide:a.j,useExisting:Object(i.hb)(()=>t),multi:!0}]),i.Mb],decls:3,vars:2,consts:[["fxLayout","row",1,"div-radio-group"],["fxLayout","row","aria-label","Select an option",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(i.hc(0,"div",0),i.hc(1,"mat-radio-group",1),i.pc("change",(function(t){return e.selectVersion(t.value)}))("ngModelChange",(function(t){return e.itemV=t})),i.Nc(2,l,2,2,"mat-radio-button",2),i.gc(),i.gc()),2&t&&(i.Ob(1),i.zc("ngModel",e.itemV),i.Ob(1),i.zc("ngForOf",e.itemVersions))},directives:[s.b,a.l,a.o,o.k,s.a],styles:[".div-radio-group[_ngcontent-%COMP%]{max-height:7.8vh;width:100%;background-color:#f1f1f1;overflow-x:none;overflow-y:scroll;border-radius:8px;color:#7b87cc;font-weight:bolder}.div-radio-group[_ngcontent-%COMP%]::-webkit-scrollbar{display:none!important}.mat-radio-button[_ngcontent-%COMP%]{height:30px;width:60px}.mat-radio-group[_ngcontent-%COMP%]{overflow-x:scroll}"]}),t})()},HlmG:function(t,e,c){"use strict";c.d(e,"a",(function(){return P}));var i=c("fXoL"),n=c("Brg/"),a=c("T1xj"),r=c("WLNs"),s=c("ofXK"),o=c("XiUz"),l=c("3Pt+"),p=c("FU17"),d=c("znSr"),h=c("NFeN");function u(t,e){if(1&t){const t=i.ic();i.hc(0,"mat-icon",20),i.pc("click",(function(){return i.Hc(t),i.tc(3).back.emit()})),i.Pc(1,"keyboard_backspace"),i.gc()}}function g(t,e){if(1&t){const t=i.ic();i.hc(0,"mat-icon",20),i.pc("click",(function(){return i.Hc(t),i.tc(3).restore()})),i.Pc(1,"settings_backup_restore"),i.gc()}}function m(t,e){if(1&t){const t=i.ic();i.hc(0,"mat-icon",20),i.pc("click",(function(){return i.Hc(t),i.tc(3).editProject.emit()})),i.Pc(1,"edit"),i.gc()}}function f(t,e){if(1&t&&(i.hc(0,"small",21),i.Pc(1),i.gc()),2&t){const t=i.tc(3);i.Ob(1),i.Sc("",0===t.currentVersion?"created by":"edited by"," ",0===t.currentVersion?t.projectSelected.createdBy.name:t.projectSelected.prevStates&&t.projectSelected.prevStates[t.currentVersion-1]?t.projectSelected.prevStates[t.currentVersion-1].user.name:"","")}}function b(t,e){1&t&&(i.hc(0,"small",22),i.Pc(1,"*current state*"),i.gc()),2&t&&i.Mc("color","#7b87cc")}function v(t,e){if(1&t&&(i.hc(0,"li",23),i.Pc(1),i.gc()),2&t){const t=e.$implicit,c=i.tc(3);i.Qb(c.propertyHasChanged("participants")?"property-changed":""),i.Ob(1),i.Qc(t.name)}}function k(t,e){if(1&t&&(i.hc(0,"li",23),i.Pc(1),i.gc()),2&t){const t=e.$implicit,c=i.tc(3);i.Qb(c.propertyHasChanged("administrators")?"property-changed":""),i.Ob(1),i.Qc(t.name)}}const O=function(t){return{color:t}};function S(t,e){if(1&t&&(i.hc(0,"div",7),i.hc(1,"div",8),i.Nc(2,u,2,0,"mat-icon",9),i.Nc(3,g,2,0,"mat-icon",9),i.Nc(4,m,2,0,"mat-icon",9),i.gc(),i.hc(5,"div",10),i.Nc(6,f,2,2,"small",11),i.Nc(7,b,2,2,"small",12),i.gc(),i.hc(8,"div",13),i.hc(9,"h3",1),i.Pc(10),i.gc(),i.gc(),i.hc(11,"div",13),i.hc(12,"div",14),i.hc(13,"div",15),i.hc(14,"h5"),i.Pc(15," Participants: "),i.gc(),i.hc(16,"ul",16),i.Nc(17,v,2,3,"li",17),i.gc(),i.gc(),i.hc(18,"div",15),i.hc(19,"h5"),i.Pc(20," Administrators: "),i.gc(),i.hc(21,"ul",16),i.Nc(22,k,2,3,"li",17),i.gc(),i.gc(),i.gc(),i.hc(23,"div",18),i.hc(24,"h5"),i.Pc(25," Status: "),i.gc(),i.hc(26,"p",19),i.Pc(27),i.gc(),i.gc(),i.gc(),i.gc()),2&t){const t=i.tc(2);i.Ob(1),i.Mc("margin-left","20","px"),i.Ob(1),i.zc("ngIf",t.isDialog),i.Ob(1),i.zc("ngIf",t.versionIsDifferent()&&!t.isLastVersion),i.Ob(1),i.zc("ngIf",t.isLastVersion),i.Ob(2),i.zc("ngIf",null!==t.currentVersion),i.Ob(1),i.zc("ngIf",t.isLastVersion),i.Ob(2),i.Qb(t.propertyHasChanged("name")?"property-changed":""),i.Ob(1),i.Qc(t.projectSelected.name),i.Ob(7),i.zc("ngForOf",t.projectSelected.participants),i.Ob(5),i.zc("ngForOf",t.projectSelected.administrators),i.Ob(4),i.Qb(t.propertyHasChanged("status")?"property-changed":""),i.zc("ngStyle",i.Bc(16,O,t.projectSelected.status?"#6a74ad":"#ff0000")),i.Ob(1),i.Rc(" ",t.projectSelected.status?"ACTIVE":"UNACTIVE"," ")}}function j(t,e){if(1&t){const t=i.ic();i.hc(0,"div"),i.hc(1,"div",1),i.hc(2,"form",2),i.hc(3,"app-item-versions",3),i.pc("ngModelChange",(function(e){return i.Hc(t),i.tc().setVersion(e)}))("prevVersion",(function(e){return i.Hc(t),i.tc().prevProject=e}))("currentVersion",(function(e){return i.Hc(t),i.tc().currentVersion=e})),i.gc(),i.gc(),i.gc(),i.hc(4,"div",4),i.hc(5,"small",5),i.Pc(6,"*Property edited*"),i.gc(),i.gc(),i.Nc(7,S,28,18,"div",6),i.gc()}if(2&t){const t=i.tc();i.Ob(3),i.zc("ngModel",t.projectSelected)("date",t.date),i.Ob(1),i.Mc("margin","20px"),i.Ob(3),i.zc("ngIf",t.prevProject)}}let P=(()=>{class t{constructor(t,e){this.projectService=t,this.lpDialogsService=e,this.propertiesNoEditables=["prevStates","actionsRequired","__v","createdBy"],this.isDialog=!1,this.close=new i.r,this.back=new i.r,this.isLastVersion=!1,this.editProject=new i.r,this.restoreVersion=new i.r}ngOnChanges(t){t.projectSelected&&this.projectSelected&&(console.log(this.projectSelected),this.projectPristine=n.d.copyObject(this.projectSelected))}restore(){this.lpDialogsService.openConfirmDialog("THIS VERSION WILL REPLACE THE CURRENT ONE","Are you sure?").subscribe(t=>{t&&(this.restoreVersion.emit(this.checkChangesToEdit()),this.checkChangesToEdit())})}checkChangesToEdit(){const t=Object.keys(this.projectSelected).reduce((t,e)=>(!this.propertiesNoEditables.includes(e)&&(t[e]=this.projectSelected[e]),t),{}),e=Object.keys(this.projectPristine).reduce((t,e)=>(!this.propertiesNoEditables.includes(e)&&(t[e]=this.projectPristine[e]),t),{});let c=n.d.getObjectDifferences(e,t);return console.log({obj:c,projectSelected:t,projectPristine:e}),{projectChanges:c,id:this.projectSelected._id}}versionIsDifferent(){return!n.d.areEquals(this.prevProject,this.projectSelected)}propertyHasChanged(t){return 0!==this.currentVersion&&!!this.prevProject&&JSON.stringify(this.prevProject[t])!=JSON.stringify(this.projectSelected[t])}setVersion(t){this.projectSelected=t;const e=Object.keys(this.projectSelected).reduce((t,e)=>(!this.propertiesNoEditables.includes(e)&&(t[e]=this.projectSelected[e]),t),{}),c=Object.keys(this.projectPristine).reduce((t,e)=>(!this.propertiesNoEditables.includes(e)&&(t[e]=this.projectPristine[e]),t),{});this.isLastVersion=n.d.areEquals(e,c)}}return t.\u0275fac=function(e){return new(e||t)(i.bc(a.a),i.bc(r.b))},t.\u0275cmp=i.Vb({type:t,selectors:[["app-project-detail"]],inputs:{isDialog:"isDialog",date:"date",projectSelected:"projectSelected"},outputs:{close:"close",back:"back",editProject:"editProject",restoreVersion:"restoreVersion"},features:[i.Mb],decls:1,vars:1,consts:[[4,"ngIf"],["fxLayoutAlign","center"],["action",""],["name","projectSelected",3,"ngModel","date","ngModelChange","prevVersion","currentVersion"],["fxLayoutAlign","flex-start"],[1,"property-changed"],["fxLayout","column","fxLayoutAlign","center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center"],["fxLayoutAlign","flex-end"],[3,"click",4,"ngIf"],["fxLayoutAlign","space-between"],["class","small-user",4,"ngIf"],["class","small-current-state","fxLayoutAlign","center",3,"color",4,"ngIf"],["fxLayout","column"],["fxLayout","row"],["fxFlex","50","fxLayout","column",1,"category-div"],[1,"ul-users"],["role","listitem",3,"class",4,"ngFor","ngForOf"],["fxFlex","33","fxLayout","row","fxLayoutAlign","center","fxLayoutGap","50px",1,"category-div"],[3,"ngStyle"],[3,"click"],[1,"small-user"],["fxLayoutAlign","center",1,"small-current-state"],["role","listitem"]],template:function(t,e){1&t&&i.Nc(0,j,8,5,"div",0),2&t&&i.zc("ngIf",e.date&&e.projectSelected)},directives:[s.l,o.b,l.s,l.m,l.n,p.a,l.l,l.o,o.c,o.a,s.k,o.d,s.m,d.c,h.a],styles:[".category-div[_ngcontent-%COMP%]{margin-top:20px;width:100%}.category-div[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:bolder;margin-bottom:5px}.category-div[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .category-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.property-changed[_ngcontent-%COMP%]{color:#d1870c}.ul-users[_ngcontent-%COMP%]{max-height:100px;overflow-y:scroll}.ul-users[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.small-current-state[_ngcontent-%COMP%], .small-user[_ngcontent-%COMP%]{font-weight:bolder;color:#7b87cc}"]}),t})()},PyEr:function(t,e,c){"use strict";c.d(e,"a",(function(){return r})),c.d(e,"b",(function(){return n})),c.d(e,"c",(function(){return a}));var i=c("fXoL");let n=(()=>{class t{transform(t,e){let c;if(null===t)return null;switch(e){case"miliseconds":c=t.getTime();break;case"date":c=new Date(t)}return c}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.ac({name:"lpParseDate",type:t,pure:!0}),t})(),a=(()=>{class t{transform(t,e){if(null===t)return null;let c;switch(e){case"AM/PM":c=Number(t.split(":")[0])-12>0?`${Number(t.split(":")[0])-12}:${Number(t.split(":")[1])} PM`:t+" AM";break;case"24":c="AM"===t.split(" ")[t.split(" ").length-1]?""+t.split(" ")[0]:`${Number(t.split(" ")[0].split(":")[0])+12}:${t.split(" ")[0].split(":")[1]}`}return c}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.ac({name:"lpParseHour",type:t,pure:!0}),t})(),r=(()=>{class t{}return t.\u0275mod=i.Zb({type:t}),t.\u0275inj=i.Yb({factory:function(e){return new(e||t)},imports:[[]]}),t})()},RCfm:function(t,e,c){"use strict";c.d(e,"a",(function(){return P}));var i=c("fXoL"),n=c("Brg/"),a=c("S6We"),r=c("WLNs"),s=c("SV+Y"),o=c("ofXK"),l=c("XiUz"),p=c("3Pt+"),d=c("FU17"),h=c("NFeN");function u(t,e){if(1&t){const t=i.ic();i.hc(0,"mat-icon",24),i.pc("click",(function(){return i.Hc(t),i.tc(3).back.emit()})),i.Pc(1,"keyboard_backspace"),i.gc()}}function g(t,e){if(1&t){const t=i.ic();i.hc(0,"mat-icon",24),i.pc("click",(function(){i.Hc(t);const e=i.tc(3);return e.editTask.emit(e.taskSelected._id)})),i.Pc(1,"edit"),i.gc()}}function m(t,e){if(1&t){const t=i.ic();i.hc(0,"mat-icon",24),i.pc("click",(function(){return i.Hc(t),i.tc(3).restore()})),i.Pc(1,"settings_backup_restore"),i.gc()}}function f(t,e){if(1&t&&(i.hc(0,"div",22),i.Nc(1,u,2,0,"mat-icon",23),i.Nc(2,g,2,0,"mat-icon",23),i.Nc(3,m,2,0,"mat-icon",23),i.gc()),2&t){const t=i.tc(2);i.Ob(1),i.zc("ngIf",t.prevDialog),i.Ob(1),i.zc("ngIf",!t.prevDialog&&t.isCurrentVersion&&"done"!==t.taskPristine.status),i.Ob(1),i.zc("ngIf",!t.isCurrentVersion&&"done"!==t.taskPristine.status&&!t.propertyHasChanged("status"))}}function b(t,e){if(1&t&&(i.hc(0,"small",25),i.Pc(1),i.gc()),2&t){const t=i.tc(2);i.Ob(1),i.Sc("",0===t.currentVersion?"created by":"edited by"," ",0===t.currentVersion?t.taskSelected.createdBy.name:t.taskSelected.prevStates[t.currentVersion-1]?t.taskSelected.prevStates[t.currentVersion-1].user.name:"","")}}function v(t,e){1&t&&(i.hc(0,"small",26),i.Pc(1,"*current state*"),i.gc()),2&t&&i.Mc("color","#7b87cc")}function k(t,e){if(1&t&&(i.hc(0,"li",27),i.Pc(1),i.gc()),2&t){const t=e.$implicit,c=i.tc(2);i.Qb(c.propertyHasChanged("participants")?"property-changed":""),i.Ob(1),i.Qc(t.name)}}function O(t,e){if(1&t&&(i.hc(0,"li",27),i.Pc(1),i.gc()),2&t){const t=e.$implicit,c=i.tc(2);i.Qb(c.propertyHasChanged("reviewers")?"property-changed":""),i.Ob(1),i.Qc(t.name)}}function S(t,e){if(1&t&&(i.hc(0,"div",19),i.hc(1,"h5"),i.Pc(2," Extra time : "),i.gc(),i.hc(3,"p"),i.Pc(4),i.gc(),i.gc()),2&t){const t=i.tc(2);i.Ob(4),i.Qc(t.extraTime)}}function j(t,e){if(1&t){const t=i.ic();i.hc(0,"div",1),i.hc(1,"form",2),i.hc(2,"app-item-versions",3),i.pc("ngModelChange",(function(e){return i.Hc(t),i.tc().setVersion(e)}))("prevVersion",(function(e){return i.Hc(t),i.tc().prevTask=e}))("currentVersion",(function(e){return i.Hc(t),i.tc().currentVersion=e})),i.gc(),i.gc(),i.hc(3,"div",4),i.hc(4,"small",5),i.Pc(5,"*Property edited*"),i.gc(),i.Nc(6,f,4,3,"div",6),i.gc(),i.hc(7,"div",7),i.hc(8,"div",8),i.Nc(9,b,2,2,"small",9),i.Nc(10,v,2,2,"small",10),i.gc(),i.hc(11,"div",11),i.hc(12,"h3",12),i.Pc(13),i.gc(),i.gc(),i.hc(14,"div",13),i.hc(15,"div",14),i.hc(16,"div",15),i.hc(17,"h5"),i.Pc(18," Participants: "),i.gc(),i.hc(19,"ul"),i.Nc(20,k,2,3,"li",16),i.gc(),i.gc(),i.hc(21,"div",15),i.hc(22,"h5"),i.Pc(23," Reviewers: "),i.gc(),i.hc(24,"ul"),i.Nc(25,O,2,3,"li",16),i.gc(),i.gc(),i.gc(),i.hc(26,"div",17),i.hc(27,"div",18),i.hc(28,"h5"),i.Pc(29," Start date: "),i.gc(),i.hc(30,"p"),i.Pc(31),i.uc(32,"date"),i.gc(),i.gc(),i.hc(33,"div",18),i.hc(34,"h5"),i.Pc(35," End Date: "),i.gc(),i.hc(36,"p"),i.Pc(37),i.uc(38,"date"),i.gc(),i.gc(),i.gc(),i.hc(39,"div",17),i.hc(40,"div",15),i.hc(41,"h5"),i.Pc(42," Priority: "),i.gc(),i.hc(43,"p"),i.Pc(44),i.gc(),i.gc(),i.hc(45,"div",15),i.hc(46,"h5"),i.Pc(47," Status: "),i.gc(),i.hc(48,"p"),i.Pc(49),i.gc(),i.gc(),i.gc(),i.gc(),i.hc(50,"div",12),i.hc(51,"div",19),i.hc(52,"h5"),i.Pc(53," Description : "),i.gc(),i.hc(54,"div",12),i.hc(55,"mat-icon",20),i.pc("click",(function(){return i.Hc(t),i.tc().showDescription()})),i.Pc(56,"pageview"),i.gc(),i.gc(),i.gc(),i.Nc(57,S,5,1,"div",21),i.gc(),i.gc(),i.gc()}if(2&t){const t=i.tc();i.Ob(2),i.zc("ngModel",t.taskSelected)("date",t.date),i.Ob(1),i.Mc("margin","10px"),i.Ob(3),i.zc("ngIf",t.taskSelected&&t.prevTask),i.Ob(2),i.Mc("height","10px"),i.Ob(1),i.zc("ngIf",null!==t.currentVersion),i.Ob(1),i.zc("ngIf",t.isCurrentVersion),i.Ob(2),i.Qb(t.propertyHasChanged("name")?"property-changed":""),i.Ob(1),i.Qc(t.taskSelected.name),i.Ob(7),i.zc("ngForOf",t.taskSelected.participants),i.Ob(5),i.zc("ngForOf",t.taskSelected.reviewers),i.Ob(5),i.Qb(t.propertyHasChanged("startDate")?"property-changed":""),i.Ob(1),i.Rc(" ",i.wc(32,30,t.taskSelected.startDate,"M/d/yy, h:mm a")," "),i.Ob(5),i.Qb(t.propertyHasChanged("endDate")?"property-changed":""),i.Ob(1),i.Rc(" ",i.wc(38,33,t.taskSelected.endDate,"M/d/yy, h:mm a")," "),i.Ob(6),i.Qb(t.propertyHasChanged("priority")?"property-changed":""),i.Ob(1),i.Rc(" ",1===t.taskSelected.priority?"HIGH":2===t.taskSelected.priority?"MEDIUM":"LOW"," "),i.Ob(4),i.Qb(t.propertyHasChanged("status")?"property-changed":""),i.Ob(1),i.Rc(" ",t.taskSelected.status," "),i.Ob(6),i.Mc("font-size","30px"),i.zc("color",t.propertyHasChanged("description")?"accent":""),i.Ob(2),i.zc("ngIf",t.taskSelected.extraTime)}}let P=(()=>{class t{constructor(t,e,c){this.tasksService=t,this.lpDialogsService=e,this.mdService=c,this.back=new i.r,this.editTask=new i.r,this.restoreVersion=new i.r,this.propertiesNoEditables=["prevStates","deliverDate","extraTime","validationTime","actionsRequired","__v","createdBy"]}get extraTime(){const t=n.b.milisecsToString(this.taskSelected.extraTime);return t.reduce((e,c,i)=>e+(c+(t[i+1]?", ":"")),"")}ngOnChanges(t){t.taskSelected&&this.taskSelected&&(this.taskPristine=n.d.copyObject(this.taskSelected))}restore(){this.lpDialogsService.openConfirmDialog("THIS VERSION WILL REPLACE THE CURRENT ONE","Are you sure?").subscribe(t=>{t&&this.restoreVersion.emit(this.checkChangesToPatch())})}checkChangesToPatch(){const t=Object.keys(this.taskSelected).reduce((t,e)=>(!this.propertiesNoEditables.includes(e)&&(t[e]=this.taskSelected[e]),t),{}),e=Object.keys(this.taskPristine).reduce((t,e)=>(!this.propertiesNoEditables.includes(e)&&(t[e]=this.taskPristine[e]),t),{});return{taskChanges:n.d.getObjectDifferences(e,t),id:this.taskSelected._id}}versionIsDifferent(){return!n.d.areEquals(this.prevTask,this.taskSelected)}propertyHasChanged(t){return 0!=this.currentVersion&&!!this.prevTask&&JSON.stringify(this.prevTask[t])!=JSON.stringify(this.taskSelected[t])}setVersion(t){this.taskSelected=t;const e=Object.keys(this.taskSelected).reduce((t,e)=>(!this.propertiesNoEditables.includes(e)&&(t[e]=this.taskSelected[e]),t),{}),c=Object.keys(this.taskPristine).reduce((t,e)=>(!this.propertiesNoEditables.includes(e)&&(t[e]=this.taskPristine[e]),t),{});this.isCurrentVersion=n.d.areEquals(e,c)}showDescription(){this.lpDialogsService.openInfoDialog(this.taskSelected.description,"TASK DESCRIPTION")}}return t.\u0275fac=function(e){return new(e||t)(i.bc(a.a),i.bc(r.b),i.bc(s.a))},t.\u0275cmp=i.Vb({type:t,selectors:[["app-task-detail"]],inputs:{taskSelected:"taskSelected",date:"date",prevDialog:"prevDialog"},outputs:{back:"back",editTask:"editTask",restoreVersion:"restoreVersion"},features:[i.Mb],decls:1,vars:1,consts:[["fxLayoutAlign","center","fxLayout","column",4,"ngIf"],["fxLayoutAlign","center","fxLayout","column"],["fxFlex","10","fxLayoutAlign","center"],["name","taskSelected",3,"ngModel","date","ngModelChange","prevVersion","currentVersion"],["fxFlex","5","fxLayout","row","fxLayoutAlign","flex-start"],["fxFlex","70",1,"property-changed"],["class","div-labels","fxLayoutAlign","flex-end",4,"ngIf"],["fxFlex","85","fxLayout","column","fxLayoutAlign","center"],["fxLayoutAlign","space-between"],["class","small-user",4,"ngIf"],["class","small-current-state","fxLayoutAlign","center",3,"color",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","center"],["fxLayout.gt-xs","row","fxLayout.xs","column"],["fxLayoutAlign","center","fxFlex","33","fxLayout.gt-sm","column","fxLayout.lt-md","row"],["fxFlex.lt-md","50",1,"div-category"],["role","listitem",3,"class",4,"ngFor","ngForOf"],["fxFlex","33","fxLayout.gt-sm","column","fxLayout.lt-md","row"],["fxFlex.lt-md","50","fxLayout","column",1,"div-category"],["fxFlex","50","fxLayout","column",1,"div-category"],[3,"color","click"],["fxFlex","50","class","div-category","fxLayout","column",4,"ngIf"],["fxLayoutAlign","flex-end",1,"div-labels"],[3,"click",4,"ngIf"],[3,"click"],[1,"small-user"],["fxLayoutAlign","center",1,"small-current-state"],["role","listitem"]],template:function(t,e){1&t&&i.Nc(0,j,58,36,"div",0),2&t&&i.zc("ngIf",e.taskSelected)},directives:[o.l,l.b,l.c,p.s,p.m,p.n,l.a,d.a,p.l,p.o,o.k,h.a],pipes:[o.e],styles:["h3[_ngcontent-%COMP%]{margin:0;padding:0}h5[_ngcontent-%COMP%]{font-weight:bolder;margin-bottom:5px;text-align:center}.div-category[_ngcontent-%COMP%]{margin-top:10px;height:12vh;width:100%}.div-category[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.div-category[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px}@media (max-width:1279px){.div-category[_ngcontent-%COMP%]{margin-top:5px;height:12vh}}.property-changed[_ngcontent-%COMP%]{color:#d1870c}.div-labels[_ngcontent-%COMP%]{height:20px;width:100%}.p-description[_ngcontent-%COMP%]{max-width:100%!important;max-height:100%!important;word-break:break-all}.small-current-state[_ngcontent-%COMP%], .small-user[_ngcontent-%COMP%]{font-weight:bolder;color:#7b87cc}mat-dialog-content[_ngcontent-%COMP%]{margin-bottom:0!important;max-height:100vh!important}"],changeDetection:0}),t})()},S6We:function(t,e,c){"use strict";c.d(e,"a",(function(){return v}));var i=c("tk/3"),n=c("XNiG"),a=c("EY2u"),r=c("lJxs"),s=c("vkgz"),o=c("JIr8"),l=c("eIep"),p=c("IZH3"),d=c("Brg/"),h=c("fXoL"),u=c("z7jA"),g=c("WLNs"),m=c("KwZR"),f=c("0IaG"),b=c("O31/");let v=(()=>{class t{constructor(t,e,c,i,a,r){this.http=t,this.errorHandlerService=e,this.lpDialogsService=c,this.wsService=i,this.dialogRef=a,this.authService=r,this.taskSrc=new n.a,this.task$=this.taskSrc.asObservable()}postTask(t){return this.http.post(p.a+"task",t).pipe(Object(r.a)(t=>t.task),Object(s.a)(t=>{this.lpDialogsService.openInfoDialog("SUCESFULLY CREATED","CREATION",t.name),this.taskSrc.next({task:t,action:"POST"})}),Object(o.a)(t=>(this.lpDialogsService.openInfoDialog(t.error.err.message,"ERROR"),this.errorHandlerService.handleError(t))))}putTask(t,e){return this.http.patch(`${p.a}task/${e}`,{changes:t}).pipe(Object(r.a)(t=>t.task),Object(s.a)(t=>{t.participants.map(t=>t._id).includes(this.authService.userOnline._id)?(this.taskSrc.next({task:t,action:"PUT"}),this.lpDialogsService.openInfoDialog("SUCESFULLY UPDATED","EDITION",t.name)):(this.lpDialogsService.openInfoDialog("YOU ARE OUT THE TASK","EDITION",t.name),this.taskSrc.next({task:t,action:"DELETE"}),this.dialogRef.closeAll())}),Object(o.a)(t=>(this.lpDialogsService.openInfoDialog(t.error.err.message,"ERROR"),this.errorHandlerService.handleError(t))))}toggleStatus(t,e){return this.http.put(p.a+"task-status",{newStatus:t,taskId:e,frontTime:(new Date).getTime()}).pipe(Object(r.a)(t=>t.task),Object(s.a)(t=>{this.taskSrc.next({task:t,action:"PUT"}),this.lpDialogsService.openInfoDialog("SUCESFULLY UPDATED","EDITION",t.name)}),Object(o.a)(t=>(this.lpDialogsService.openInfoDialog(t.error.err.message,"ERROR"),this.errorHandlerService.handleError(t))))}getTasks(t,e,c=0,n=99999999){let a=`${p.a}tasks/${t}${e}`,r=new i.d({skip:c.toString(),limit:n.toString()});return this.http.get(a,{headers:r}).pipe(Object(o.a)(t=>this.errorHandlerService.handleError(t)))}deleteTask(t){let e=this.http.delete(`${p.a}task/${t}`).pipe(Object(r.a)(t=>t.task),Object(s.a)(t=>{this.lpDialogsService.openInfoDialog("SUCESFULLY DELETED","DELETION",t.name),this.taskSrc.next({task:t,action:"DELETE"})}),Object(o.a)(t=>(this.lpDialogsService.openInfoDialog(t.error.err.message,"ERROR"),this.errorHandlerService.handleError(t))));return this.lpDialogsService.openConfirmDialog().pipe(Object(l.a)(t=>t?e:Object(a.b)()))}getTaskById(t){return console.log(`${p.a}task-by-id/${t}`),this.http.get(`${p.a}task-by-id/${t}`).pipe(Object(r.a)(t=>t.task),Object(o.a)(t=>(console.log({err:t}),this.lpDialogsService.openInfoDialog(t.error.err.message,"ERROR"),this.errorHandlerService.handleError(t))))}getTaskFiles(t,e,c=30,i=""){return this.http.get(`${p.a}task-files/${t}?skip=${e}&limit=${c}&title=${i}`).pipe(Object(r.a)(t=>t.files),Object(o.a)(t=>(this.lpDialogsService.openInfoDialog(t.error.err.message,"ERROR"),this.errorHandlerService.handleError(t))))}userInTask(t){return new Promise((e,c)=>{this.wsService.emit("user-in-task",{taskId:t},t=>{e(t)})})}userOutTask(t){this.wsService.emit("user-out-task",{taskId:t})}usersConnected(){return this.wsService.listen("users-in-task")}taskTimeStarted(t){return t.startDate<=(new Date).getTime()}taskTimeEnded(t){return t.endDate<(new Date).getTime()}listenningTasksEvents(){this.wsService.listen("tasks-event").subscribe(t=>{const{method:e}=t,c=t.task,i=c.participants.map(t=>t._id);switch(e){case"POST":i.includes(this.authService.userOnline._id)&&this.taskSrc.next({task:c,action:"POST"});break;case"PUT":i.includes(this.authService.userOnline._id)?c.prevStates[c.prevStates.length-1].changes.participants&&!c.prevStates[c.prevStates.length-1].changes.participants.map(t=>t._id).includes(this.authService.userOnline._id)?this.taskSrc.next({task:c,action:"POST"}):this.taskSrc.next({task:c,action:"PUT"}):this.taskSrc.next({task:c,action:"DELETE"});break;case"DELETE":i.includes(this.authService.userOnline._id)&&this.taskSrc.next({task:c,action:"DELETE"});break;case"STATUS CHANGE":i.includes(this.authService.userOnline._id)&&this.taskSrc.next({task:c,action:"PUT"})}let n=d.c.get("state-data","task-on-screen");"PUT"!==e&&"DELETE"!==e||n!==c._id||this.dialogRef.closeAll()})}canBeEdited(t){return!("done"===t.status||"on review"===t.status)}}return t.\u0275fac=function(e){return new(e||t)(h.lc(i.b),h.lc(u.a),h.lc(g.b),h.lc(m.a),h.lc(f.b),h.lc(b.a))},t.\u0275prov=h.Xb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},T1xj:function(t,e,c){"use strict";c.d(e,"a",(function(){return v}));var i=c("vkgz"),n=c("lJxs"),a=c("JIr8"),r=c("eIep"),s=c("XNiG"),o=c("EY2u"),l=c("IZH3"),p=c("Brg/"),d=c("fXoL"),h=c("tk/3"),u=c("z7jA"),g=c("WLNs"),m=c("KwZR"),f=c("O31/"),b=c("0IaG");let v=(()=>{class t{constructor(t,e,c,n,a,r){this.http=t,this.errorHandlerService=e,this.lpDialogsService=c,this.wSService=n,this.authService=a,this.dialogRef=r,this.projectSrc=new s.a,this.project$=this.projectSrc.asObservable().pipe(Object(i.a)(t=>{if(this.selectedProject&&t.project._id===this.selectedProject._id)switch(t.action){case"PUT":this._selectedProject=t.project;break;case"DELETE":this.selectProject(null)}})),this.selectedProjectSrc=new s.a,this.selectedProject$=this.selectedProjectSrc.asObservable()}get selectedProject(){return this._selectedProject}getProjects(){return this.http.get(l.a+"projects").pipe(Object(n.a)(t=>t.projects),Object(a.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))))}getProjectById(t){return this.http.get(`${l.a}project/${t}`).pipe(Object(n.a)(t=>t.project),Object(a.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))))}getParticipants(t){return this.http.get(`${l.a}get-participants/${t}`).pipe(Object(n.a)(t=>t.participants),Object(a.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))))}selectProject(t){this._selectedProject=t,p.c.set("state-data",t._id,"project"),this.selectedProjectSrc.next(t)}postProject(t){return this.http.post(l.a+"project",t).pipe(Object(i.a)(t=>{this.projectSrc.next({project:t.project,action:"POST"}),this.lpDialogsService.openInfoDialog("SUCCESFULLY CREATED",null,t.project.name)}),Object(a.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))))}putProject(t,e){return this.http.put(`${l.a}project/${e}`,{project:t}).pipe(Object(i.a)(t=>{t.project.participants.map(t=>t._id).includes(this.authService.userOnline._id)?(this.projectSrc.next({project:t.project,action:"PUT"}),this.lpDialogsService.openInfoDialog("SUCCESFULLY UPDATED","PUT",t.project.name)):(this.projectSrc.next({project:t.project,action:"DELETE"}),this.lpDialogsService.openInfoDialog("IN ORDER TO GET ACCESS AGAIN TALK TO OTHER ADMNISTRATOR","REMOVAL",t.project.name),this.wSService.emit("user-out-project",{projectId:t.project._id}))}),Object(a.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))))}deleteProject(t){let e=this.http.delete(`${l.a}project/${t}`).pipe(Object(i.a)(t=>{this.projectSrc.next({project:t.project,action:"DELETE"}),this.lpDialogsService.openInfoDialog("SUCCESFULY DELETED","DELETION",t.project.name),this.wSService.emit("user-out-project",{projectId:t.project._id})}),Object(a.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))));return this.lpDialogsService.openConfirmDialog().pipe(Object(r.a)(t=>t?e:Object(o.b)()))}listenningProjectSockets(){this.wSService.listen("projects-events").subscribe(t=>{const{method:e,project:c,prevProject:i}=t,n=c.participants.map(t=>t._id?t._id:t);switch(e){case"POST":n.includes(this.authService.userOnline._id)&&(this.projectSrc.next({project:c,action:"POST"}),this.wSService.emit("user-in-project",{projectId:c._id}));break;case"PUT":n.includes(this.authService.userOnline._id)?i.participants.map(t=>t._id).includes(this.authService.userOnline._id)?this.projectSrc.next({project:c,action:"PUT"}):(this.projectSrc.next({project:c,action:"POST"}),this.wSService.emit("user-in-project",{projectId:c._id})):(this.projectSrc.next({project:c,action:"DELETE"}),this.wSService.emit("user-out-project",{projectId:c._id}));break;case"DELETE":n.includes(this.authService.userOnline._id)&&(this.projectSrc.next({project:c,action:"DELETE"}),this.wSService.emit("user-out-project",{projectId:c._id}))}p.c.get("state-data","project-on-screen")===c._id&&this.dialogRef.closeAll()})}}return t.\u0275fac=function(e){return new(e||t)(d.lc(h.b),d.lc(u.a),d.lc(g.b),d.lc(m.a),d.lc(f.a),d.lc(b.b))},t.\u0275prov=d.Xb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"Yt/C":function(t,e,c){"use strict";c.d(e,"a",(function(){return f}));var i=c("tk/3"),n=c("XNiG"),a=c("vkgz"),r=c("lJxs"),s=c("JIr8"),o=c("IZH3"),l=c("Brg/"),p=c("fXoL"),d=c("O31/"),h=c("41FU"),u=c("KwZR"),g=c("WLNs"),m=c("z7jA");let f=(()=>{class t{constructor(t,e,c,i,a,r){this.http=t,this.authService=e,this.lpSnackbarNotificationService=c,this.wsService=i,this.lpDialogsService=a,this.errorHandlerService=r,this.notificationSelectedSrc=new n.a,this.notificationSelected$=this.notificationSelectedSrc.asObservable(),this.notificationsUncheckedSrc=new n.a,this.notificationsUnchecked$=this.notificationsUncheckedSrc.asObservable(),this.notificationSrc=new n.a,this.notification$=this.notificationSrc.asObservable()}toggleNotification(t,e){return this.http.patch(o.a+"toggle-notification",{notificationId:t,itemId:e}).pipe(Object(a.a)(t=>{this.notificationsUncheckedSrc.next(!1)}),Object(r.a)(t=>t.notification),Object(s.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))))}getNotifications(t,e,c){const n=new i.d({skip:e.toString(),limit:c?c.toString():"9999999"});return this.http.get(`${o.a}notifications${t}`,{headers:n}).pipe(Object(s.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))))}getNotificationsUnchecked(t,e,c){let i="checked=false&userTo="+this.authService.userOnline._id;return this.getNotifications(t+=t?"&"+i:"?"+i,e,c)}getNotificationById(t){return this.http.get(`${o.a}notification/${t}`).pipe(Object(r.a)(t=>t.notification),Object(s.a)(t=>(this.lpDialogsService.openInfoDialog(t.message,t.status,"ERROR"),this.errorHandlerService.handleError(t))))}selectNotification(t){t?l.c.set("state-data",t._id,"notification-selected"):l.c.remove("state-data","notification-selected"),this.notificationSelectedSrc.next(t||void 0)}addSnackNotification(t){this.showSnackNot(t)}showSnackNot(t){const{method:e,item:c,prevItem:i}=t,n=t.userFrom,a="Project"===t.type?{name:""}:t.project;switch(e){case"POST":this.lpSnackbarNotificationService.showNotification("ADHESION",c.name,t.type,n.name,a.name);break;case"PUT":c.participants.includes(this.authService.userOnline._id)?this.lpSnackbarNotificationService.showNotification(e,i&&i.name?i.name:c.name,t.type,n.name,a.name):this.lpSnackbarNotificationService.showNotification("REMOVAL",i&&i.name?i.name:c.name,t.type,n.name,a.name);break;case"DELETE":this.lpSnackbarNotificationService.showNotification("DELETE",c.name,t.type,n.name,a.name);break;case"STATUS CHANGE":this.lpSnackbarNotificationService.showNotification(e,c.name,t.type,n.name,a.name,c.status)}}listenningNotificationsEvents(){this.wsService.listen("notification").subscribe(t=>{t.userFrom._id!==this.authService.userOnline._id&&this.addSnackNotification(t),t.usersTo.map(t=>t.user).includes(this.authService.userOnline._id)&&this.notificationsUncheckedSrc.next(!0),this.notificationSrc.next(t)})}}return t.\u0275fac=function(e){return new(e||t)(p.lc(i.b),p.lc(d.a),p.lc(h.a),p.lc(u.a),p.lc(g.b),p.lc(m.a))},t.\u0275prov=p.Xb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},bXur:function(t,e,c){"use strict";c.d(e,"a",(function(){return D}));var i=c("fXoL"),n=c("M9IT"),a=c("+0xr"),r=c("SV+Y"),s=c("ofXK"),o=c("znSr"),l=c("XiUz"),p=c("NFeN");function d(t,e){1&t&&(i.hc(0,"mat-header-cell",14),i.Pc(1," Name "),i.gc())}function h(t,e){if(1&t&&(i.hc(0,"a"),i.Pc(1),i.gc()),2&t){const t=i.tc().$implicit;i.Ob(1),i.Qc(t.name)}}function u(t,e){if(1&t&&(i.hc(0,"span"),i.Pc(1),i.gc()),2&t){const t=i.tc().$implicit;i.Ob(1),i.Qc(t.name)}}function g(t,e){if(1&t){const t=i.ic();i.hc(0,"mat-cell",15),i.pc("click",(function(){i.Hc(t);const c=e.$implicit;return i.tc().selectProject(c)})),i.Nc(1,h,2,1,"a",16),i.Nc(2,u,2,1,"span",16),i.gc()}if(2&t){const t=i.tc();i.Mc("color","blue")("cursor","pointer"),i.Ob(1),i.zc("ngIf",!t.mdService.desktop),i.Ob(1),i.zc("ngIf",t.mdService.desktop)}}function m(t,e){1&t&&(i.hc(0,"mat-header-cell",17),i.Pc(1," Administrators"),i.gc())}function f(t,e){if(1&t&&(i.hc(0,"mat-cell",18),i.Pc(1),i.gc()),2&t){const t=e.$implicit;i.Ob(1),i.Rc(" ",t.administrators.length," ")}}function b(t,e){1&t&&(i.hc(0,"mat-header-cell",17),i.Pc(1," Participants "),i.gc())}function v(t,e){if(1&t&&(i.hc(0,"mat-cell",18),i.Pc(1),i.gc()),2&t){const t=e.$implicit;i.Ob(1),i.Rc(" ",t.participants.length," ")}}function k(t,e){1&t&&(i.hc(0,"mat-header-cell",17),i.Pc(1," Status"),i.gc())}function O(t,e){if(1&t&&(i.hc(0,"mat-cell",18),i.Pc(1),i.gc()),2&t){const t=e.$implicit;i.Ob(1),i.Rc(" ",!0===t.status?"active":"unactive"," ")}}function S(t,e){1&t&&i.cc(0,"mat-header-cell",14)}function j(t,e){if(1&t){const t=i.ic();i.hc(0,"mat-cell",19),i.hc(1,"a",20),i.pc("click",(function(){i.Hc(t);const c=e.$implicit;return i.tc().putProject.emit(c)})),i.hc(2,"mat-icon",21),i.Pc(3,"edit"),i.gc(),i.gc(),i.hc(4,"a",20),i.pc("click",(function(c){i.Hc(t);const n=e.$implicit,a=i.tc();return c.stopPropagation(),a.deleteProject.emit(n._id)})),i.hc(5,"mat-icon"),i.Pc(6,"delete"),i.gc(),i.gc(),i.gc()}}function P(t,e){1&t&&i.cc(0,"mat-header-row")}function y(t,e){1&t&&i.cc(0,"mat-row")}const x=function(){return[3,6,12]};let D=(()=>{class t{constructor(t){this.mdService=t,this.projects=[],this.logout=new i.r,this.toggleSideMenu=new i.r,this.projectSelectedOut=new i.r,this.projectSelectedIn="",this.putProject=new i.r,this.postProject=new i.r,this.displayedColumns=["name","administrators","participants","status","actions"],this.dataSource=new a.k([]),this.deleteProject=new i.r}ngOnInit(){}ngOnChanges(t){t.projects&&(this.dataSource.data=this.projects,this.dataSource.paginator=this.paginator)}selectProject(t){this.projectSelectedOut.emit(t)}get projectSelected(){return this.projects.find(t=>t._id===this.projectSelectedIn)}}return t.\u0275fac=function(e){return new(e||t)(i.bc(r.a))},t.\u0275cmp=i.Vb({type:t,selectors:[["app-projects"]],viewQuery:function(t,e){var c;1&t&&i.Lc(n.a,!0),2&t&&i.Ec(c=i.qc())&&(e.paginator=c.first)},inputs:{projects:"projects",projectSelectedIn:"projectSelectedIn"},outputs:{logout:"logout",toggleSideMenu:"toggleSideMenu",projectSelectedOut:"projectSelectedOut",putProject:"putProject",postProject:"postProject",deleteProject:"deleteProject"},features:[i.Mb],decls:19,vars:7,consts:[[3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","mat-cell-selector","mat-cell","",3,"color","cursor","click",4,"matCellDef"],["matColumnDef","administrators"],["mat-header-cell","","fxShow","","fxHide.lt-sm","",4,"matHeaderCellDef"],["mat-cell","","fxShow","","fxShow","","fxHide.lt-sm","",4,"matCellDef"],["matColumnDef","participants"],["matColumnDef","status"],["matColumnDef","actions"],["fxLayoutAlign.lt-md","flex-end","mat-cell","",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell","",1,"mat-cell-selector",3,"click"],[4,"ngIf"],["mat-header-cell","","fxShow","","fxHide.lt-sm",""],["mat-cell","","fxShow","","fxShow","","fxHide.lt-sm",""],["fxLayoutAlign.lt-md","flex-end","mat-cell",""],[3,"click"],[1,"icon_options"]],template:function(t,e){1&t&&(i.hc(0,"mat-table",0),i.fc(1,1),i.Nc(2,d,2,0,"mat-header-cell",2),i.Nc(3,g,3,6,"mat-cell",3),i.ec(),i.fc(4,4),i.Nc(5,m,2,0,"mat-header-cell",5),i.Nc(6,f,2,1,"mat-cell",6),i.ec(),i.fc(7,7),i.Nc(8,b,2,0,"mat-header-cell",5),i.Nc(9,v,2,1,"mat-cell",6),i.ec(),i.fc(10,8),i.Nc(11,k,2,0,"mat-header-cell",5),i.Nc(12,O,2,1,"mat-cell",6),i.ec(),i.fc(13,9),i.Nc(14,S,1,0,"mat-header-cell",2),i.Nc(15,j,7,0,"mat-cell",10),i.ec(),i.Nc(16,P,1,0,"mat-header-row",11),i.Nc(17,y,1,0,"mat-row",12),i.gc(),i.cc(18,"mat-paginator",13)),2&t&&(i.zc("dataSource",e.dataSource),i.Ob(16),i.zc("matHeaderRowDef",e.displayedColumns),i.Ob(1),i.zc("matRowDefColumns",e.displayedColumns),i.Ob(1),i.zc("length",e.dataSource.data.length)("pageSize",3)("pageSizeOptions",i.Ac(6,x)))},directives:[a.j,a.c,a.e,a.b,a.g,a.i,n.a,a.d,a.a,s.l,o.b,l.b,p.a,a.f,a.h],styles:[""]}),t})()},dNRF:function(t,e,c){"use strict";c.d(e,"a",(function(){return l})),c.d(e,"b",(function(){return p}));var i=c("fXoL"),n=c("l5mm"),a=c("ofXK"),r=c("NFeN"),s=c("Xa2L");function o(t,e){if(1&t){const t=i.ic();i.hc(0,"div",1),i.cc(1,"mat-progress-spinner",2),i.hc(2,"mat-icon",3),i.pc("click",(function(){return i.Hc(t),i.tc().stopProgress()})),i.Pc(3,"cancel"),i.gc(),i.gc()}if(2&t){const t=i.tc();i.Mc("position","relative"),i.Ob(1),i.zc("value",t.progress)}}let l=(()=>{class t{constructor(){this.progress=0,this.show=!1,this.velocity=5,this.diameter=60,this.end=new i.r}ngOnInit(){}ngOnChanges(t){t.show&&this.show?this.timeSubscription=Object(n.a)(30*this.velocity).subscribe(()=>{this.progress<=100?this.progress++:(this.timeSubscription.unsubscribe(),this.progress=0,this.end.emit(!0))}):(this.timeSubscription&&this.timeSubscription.unsubscribe(),this.progress=0)}stopProgress(){this.timeSubscription.unsubscribe(),this.progress=0,this.end.emit(!1)}ngOnDestroy(){this.timeSubscription&&this.timeSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Vb({type:t,selectors:[["lp-thinking-time-progress"]],inputs:{progress:"progress",show:"show",velocity:"velocity",diameter:"diameter"},outputs:{end:"end"},features:[i.Mb],decls:1,vars:1,consts:[["class","div-thinking-time",3,"position",4,"ngIf"],[1,"div-thinking-time"],["diameter","60","color","primary","mode","determinate",3,"value"],[1,"mat-icon-progress-cancel",3,"click"]],template:function(t,e){1&t&&i.Nc(0,o,4,3,"div",0),2&t&&i.zc("ngIf",e.show)},directives:[a.l,s.a,r.a],styles:[".div-thinking-time[_ngcontent-%COMP%]{height:60px;width:60px}.mat-icon-progress-cancel[_ngcontent-%COMP%]{position:absolute!important;right:30%;top:30%;z-index:88888}"]}),t})(),p=(()=>{class t{}return t.\u0275mod=i.Zb({type:t}),t.\u0275inj=i.Yb({factory:function(e){return new(e||t)},imports:[[a.c,r.b,s.b]]}),t})()},dgmN:function(t,e,c){"use strict";c.r(e),c.d(e,"PagesModule",(function(){return tt}));var i=c("ofXK"),n=c("tyNb"),a=c("vkgz"),r=c("fXoL"),s=c("KwZR"),o=c("T1xj"),l=c("O31/"),p=c("qmzK"),d=c("S6We"),h=c("Yt/C"),u=c("WLNs"),g=c("SV+Y"),m=c("XhcP"),f=c("MutI"),b=c("XiUz"),v=c("Qu3c"),k=c("NFeN"),O=c("/t3+"),S=c("znSr"),j=c("TU8p"),P=c("lJxs");let y=(()=>{class t{constructor(t,e){this.notificationsService=t,this.el=e,this.notificationsNumber=0}ngOnInit(){this.notificationsService.getNotificationsUnchecked("",0,1e5).pipe(Object(P.a)(t=>t.notifications)).subscribe(t=>{this.notificationsNumber=t.length,this.matBadge=this.el.nativeElement.querySelector(".mat-badge-content"),this.notificationsNumber>0&&(this.matBadge.hidden=!1,this.matBadge.style.display="flex",this.matBadge.style.alignItems="center",this.matBadge.style.justifyContent="center",this.matBadge.innerHTML=""+this.notificationsNumber)}),this.notSubs=this.notificationsService.notificationsUnchecked$.subscribe(t=>{t?this.notificationsNumber++:this.notificationsNumber>0&&this.notificationsNumber--,this.notificationsNumber?(this.matBadge.hidden=!1,this.matBadge.style.display="flex",this.matBadge.style.alignItems="center",this.matBadge.style.justifyContent="center",this.matBadge.innerHTML=""+this.notificationsNumber):this.matBadge.style.display="none"})}ngOnDestroy(){this.notSubs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.bc(h.a),r.bc(r.o))},t.\u0275dir=r.Wb({type:t,selectors:[["","appNotifications",""]]}),t})();var x=c("Brg/"),D=c("7EHt"),C=c("bXur"),w=c("Wp6s");function M(t,e){if(1&t){const t=r.ic();r.hc(0,"mat-expansion-panel",2),r.hc(1,"mat-expansion-panel-header",3),r.hc(2,"div",4),r.hc(3,"a",5),r.pc("click",(function(e){return r.Hc(t),r.tc().postProject(),e.stopPropagation()})),r.hc(4,"mat-icon",6),r.Pc(5,"add"),r.gc(),r.gc(),r.hc(6,"div",7),r.Pc(7),r.gc(),r.gc(),r.gc(),r.hc(8,"app-projects",8),r.pc("projectSelectedOut",(function(e){return r.Hc(t),r.tc().selectProject(e)}))("deleteProject",(function(e){return r.Hc(t),r.tc().deleteProject(e)}))("putProject",(function(e){return r.Hc(t),r.tc().putProject(e)})),r.gc(),r.gc()}if(2&t){const t=r.tc();r.Ob(1),r.zc("collapsedHeight","50px")("expandedHeight","50px"),r.Ob(6),r.Rc(" ",t.projectSelected?t.projectName:""," "),r.Ob(1),r.zc("projects",t.projects)("projectSelectedIn",t.projectSelected)}}function T(t,e){if(1&t){const t=r.ic();r.hc(0,"mat-card",9),r.hc(1,"div",10),r.hc(2,"a",11),r.pc("click",(function(){return r.Hc(t),r.tc().postProject()})),r.hc(3,"mat-icon",12),r.Pc(4,"add"),r.gc(),r.gc(),r.gc(),r.hc(5,"div",13),r.Pc(6),r.gc(),r.hc(7,"div",10),r.hc(8,"a",14),r.hc(9,"mat-icon",15),r.pc("click",(function(){return r.Hc(t),r.tc().openProjectList()})),r.Pc(10,"list"),r.gc(),r.gc(),r.gc(),r.gc()}if(2&t){const t=r.tc();r.Ob(6),r.Rc(" ",t.projectSelected?t.projectName:""," ")}}let I=(()=>{class t{constructor(t,e,c){this.projectService=t,this.dialogsService=e,this.mdService=c,this.projects=[]}get projectName(){return this.projects.find(t=>t._id===this.projectSelected).name}ngOnInit(){this.projectService.selectedProject$.subscribe(t=>{this.projectSelected=t._id}),this.projectSubs=this.projectService.project$.subscribe(t=>{this.projects=x.a.update(this.projects,t.project,t.action),"DELETE"===t.action&&this.projectSelected===t.project._id&&this.projectService.selectProject(null)}),this.projectService.getProjects().subscribe(t=>{this.projects=t;const e=x.c.get("state-data","project"),c=e?this.projects.find(t=>t._id===e):void 0;c?this.projectService.selectProject(c):this.projects.length>0&&this.projectService.selectProject(this.projects[0])})}selectProject(t){this.projectService.selectProject(t),this.expHeader&&this.expHeader._toggle()}putProject(t){this.dialogsService.openEditProjectDialog(t)}postProject(){this.dialogsService.openPostProjectDialog()}deleteProject(t){this.projectService.deleteProject(t).subscribe()}openProjectList(){this.dialogsService.openProjectList(this.projects).subscribe(t=>{switch(t.order){case"put":this.putProject(t.project);break;case"delete":this.deleteProject(t.project);break;case"select":this.selectProject(t.project)}})}ngOnDestroy(){this.projectSubs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.bc(o.a),r.bc(p.a),r.bc(g.a))},t.\u0275cmp=r.Vb({type:t,selectors:[["app-projects-smart"]],viewQuery:function(t,e){var c;1&t&&r.Vc(D.c,!0),2&t&&r.Ec(c=r.qc())&&(e.expHeader=c.first)},decls:2,vars:2,consts:[["fxLayoutAlilgn","center","class","expansion-panel",4,"ngIf"],["class","mat-card-project",4,"ngIf"],["fxLayoutAlilgn","center",1,"expansion-panel"],[3,"collapsedHeight","expandedHeight"],["fxLayout","row","fxLayoutAlign","space-between"],["fxLayoutAlign","center","fxFlex","10",3,"click"],["color","primary"],["fxFlex","90","fxLayout","row","fxLayoutAlign","center"],[3,"projects","projectSelectedIn","projectSelectedOut","deleteProject","putProject"],[1,"mat-card-project"],["fxFlex","10"],["fxLayout","column","fxLayoutAlign","center",3,"click"],["fxLayoutAlign","flex-start","color","primary"],["fxFlex","80","fxLayout","row","fxLayoutAlign","center"],["fxLayout","column","fxLayoutAlign","center"],["color","primary",3,"click"]],template:function(t,e){1&t&&(r.Nc(0,M,9,5,"mat-expansion-panel",0),r.Nc(1,T,11,1,"mat-card",1)),2&t&&(r.zc("ngIf",e.mdService.desktop),r.Ob(1),r.zc("ngIf",!e.mdService.desktop))},directives:[i.l,D.b,D.c,b.c,b.b,b.a,k.a,C.a,w.a],styles:[".expansion-panel[_ngcontent-%COMP%]{z-index:99999;position:absolute;top:1%;left:35%;right:30%} .mat-expansion-panel-body{padding:0!important}.mat-expansion-panel-body[_ngcontent-%COMP%]{padding:0}.mat-form-project[_ngcontent-%COMP%]{width:200px!important}mat-expansion-panel-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%!important}  .mat-select-value{text-align:center}.mat-cell-selector[_ngcontent-%COMP%]{cursor:pointer}.mat-card-project[_ngcontent-%COMP%]{height:3vh!important;font-size:13px;box-sizing:initial!important;padding-bottom:20px!important}"]}),t})();var N=c("STbY"),_=c("Dx4h"),L=c("bTqV");let E=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Vb({type:t,selectors:[["app-no-projects"]],decls:3,vars:0,consts:[["fxLayoutAlign","center"]],template:function(t,e){1&t&&(r.hc(0,"div",0),r.hc(1,"h3"),r.Pc(2,"THE USER HAS NO PROJECTS"),r.gc(),r.gc())},directives:[b.b],styles:[""]}),t})();function F(t,e){1&t&&r.cc(0,"span",26)}function z(t,e){if(1&t){const t=r.ic();r.hc(0,"div",27),r.hc(1,"button",28),r.pc("click",(function(){return r.Hc(t),r.tc(2).postTask()})),r.hc(2,"span"),r.Pc(3,"ADD TASK"),r.gc(),r.gc(),r.gc()}if(2&t){const t=r.tc(2);r.Mc("margin-left","10px"),r.Ob(1),r.zc("disabled",!t.selectedProject)}}function R(t,e){1&t&&(r.hc(0,"div"),r.cc(1,"router-outlet",29,30),r.gc())}function H(t,e){1&t&&r.cc(0,"app-no-projects")}function A(t,e){if(1&t){const t=r.ic();r.hc(0,"mat-sidenav-container"),r.hc(1,"mat-sidenav",1,2),r.hc(3,"mat-list"),r.hc(4,"mat-list-item",3),r.hc(5,"mat-icon",4,5),r.pc("click",(function(){return r.Hc(t),r.tc().navigate("home")})),r.Pc(7,"home"),r.gc(),r.gc(),r.hc(8,"mat-list-item",6),r.hc(9,"mat-icon",7),r.pc("click",(function(){return r.Hc(t),r.tc().navigate("calendar")})),r.Pc(10," calendar_today "),r.gc(),r.gc(),r.hc(11,"mat-list-item",8),r.hc(12,"mat-icon",7),r.pc("click",(function(){return r.Hc(t),r.tc().navigate("task-manager")})),r.Pc(13," assignment "),r.gc(),r.gc(),r.hc(14,"mat-list-item",9),r.hc(15,"a",10),r.pc("click",(function(){r.Hc(t);const e=r.tc();return e.dialogService.openUserInfo(e.authService.userOnline)})),r.hc(16,"mat-icon",11),r.Pc(17,"account_circle"),r.gc(),r.gc(),r.gc(),r.hc(18,"mat-list-item",9),r.hc(19,"a"),r.hc(20,"mat-icon",12),r.pc("click",(function(){return r.Hc(t),r.tc().logout()})),r.Pc(21,"exit_to_app"),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.hc(22,"mat-sidenav-content"),r.hc(23,"mat-toolbar"),r.hc(24,"mat-toolbar-row"),r.hc(25,"div",13),r.hc(26,"a"),r.hc(27,"mat-icon",14),r.pc("click",(function(){return r.Hc(t),r.Fc(2).toggle()})),r.Pc(28,"menu"),r.gc(),r.gc(),r.gc(),r.hc(29,"a",15),r.hc(30,"mat-icon",16,5),r.pc("click",(function(){return r.Hc(t),r.tc().navigate("home")})),r.Pc(32,"home"),r.gc(),r.gc(),r.hc(33,"a",15),r.hc(34,"mat-icon",17),r.pc("click",(function(){return r.Hc(t),r.tc().navigate("calendar")})),r.Pc(35,"calendar_today"),r.gc(),r.gc(),r.hc(36,"a",15),r.hc(37,"mat-icon",18),r.pc("click",(function(){return r.Hc(t),r.tc().navigate("task-manager")})),r.Pc(38,"assignment"),r.gc(),r.gc(),r.Nc(39,F,1,0,"span",19),r.cc(40,"app-projects-smart",20),r.Nc(41,z,4,3,"div",21),r.hc(42,"a",15),r.hc(43,"mat-icon",22),r.Pc(44,"account_circle"),r.gc(),r.hc(45,"mat-menu",null,23),r.cc(47,"app-user-info",24),r.gc(),r.gc(),r.hc(48,"a",15),r.hc(49,"mat-icon",12),r.pc("click",(function(){return r.Hc(t),r.tc().logout()})),r.Pc(50,"exit_to_app"),r.gc(),r.gc(),r.gc(),r.gc(),r.hc(51,"div",25),r.Nc(52,R,3,0,"div",0),r.Nc(53,H,1,0,"app-no-projects",0),r.gc(),r.gc(),r.gc()}if(2&t){const t=r.Fc(46),e=r.tc();r.Ob(1),r.zc("mode","side"),r.Ob(4),r.zc("color","home"===e.path?"primary":"accent"),r.Ob(4),r.zc("color","calendar"===e.path?"primary":"accent"),r.Ob(3),r.zc("color","task-manager"===e.path?"primary":"accent"),r.Ob(18),r.zc("color","home"===e.path?"primary":"accent"),r.Ob(4),r.zc("color","calendar"===e.path?"primary":"accent"),r.Ob(3),r.zc("color","task-manager"===e.path?"primary":"accent"),r.Ob(2),r.zc("ngIf",e.mdService.desktop),r.Ob(2),r.zc("ngIf",e.selectedProject),r.Ob(2),r.zc("matMenuTriggerFor",t),r.Ob(4),r.zc("user",e.authService.userOnline),r.Ob(5),r.zc("ngIf",e.selectedProject),r.Ob(1),r.zc("ngIf",!e.selectedProject)}}let V=(()=>{class t{constructor(t,e,c,i,n,a,r,s,o,l){this.wSService=t,this.projectService=e,this.authService=c,this.dialogService=i,this.taskService=n,this.notificationsService=a,this.lpDialogs=r,this.router=s,this.ar=o,this.mdService=l,this.display=!1,this.path=this.router.url.split("/")[2]}ngOnInit(){this.projectsSubs=this.projectService.selectedProject$.pipe(Object(a.a)(()=>{})).subscribe(t=>{this.selectedProject=t._id,this.wSService.emit("user-in-project",{projectId:t})}),this.wSService.emit("user-in-app",{userId:this.authService.userOnline._id},t=>{t.ok?this.display=!0:(this.lpDialogs.openInfoDialog(t.message,"USER BUSSY"),this.authService.logout().subscribe())}),this.projectService.listenningProjectSockets(),this.taskService.listenningTasksEvents(),this.notificationsService.listenningNotificationsEvents()}navigate(t){this.router.url.includes(t)||(this.router.navigate([t],{relativeTo:this.ar}),this.path=t)}postTask(){this.dialogService.openEditCreateTaskDialog()}logout(){this.lpDialogs.openConfirmDialog("ARE YOU SURE?","").subscribe(t=>{t&&this.authService.logout().subscribe()})}ngOnDestroy(){this.wSService.emit("user-out-app"),this.projectsSubs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.bc(s.a),r.bc(o.a),r.bc(l.a),r.bc(p.a),r.bc(d.a),r.bc(h.a),r.bc(u.b),r.bc(n.b),r.bc(n.a),r.bc(g.a))},t.\u0275cmp=r.Vb({type:t,selectors:[["app-pages"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"mode"],["start",""],["fxLayoutAlign","center","matTooltip","navigate to notifications"],["routerLinkActive","router-link-active","color","accent","matTooltip","navigate to home",3,"color","click"],["homeIcon",""],["fxLayoutAlign","center","matTooltip","navigate to calendar"],["routerLinkActive","router-link-active",3,"color","click"],["fxLayoutAlign","center","matTooltip","navigate to task manager"],["fxLayoutAlign","center"],[3,"click"],["color","accent"],["color","warn",3,"click"],["fxFlex.lt-md","20","fxHide.gt-sm","","fxShow.lt-md",""],["color","accent","matBadge","","matBadgeOverlap","false","appNotifications","",3,"click"],["fxShow.gt-sm","","fxHide",""],["routerLinkActive","router-link-active","matBadge","","matBadgeOverlap","false","appNotifications","","color","accent","matTooltip","navigate to home",1,"icon-pages",3,"color","click"],["routerLinkActive","router-link-active","matTooltip","navigate to calendar","color","accent",1,"icon-pages",3,"color","click"],["routerLinkActive","router-link-active","matTooltip","navigate to task manager","color","accent",1,"icon-pages",3,"color","click"],["class","spacer",4,"ngIf"],["fxFlex.lt-md","55","id","project-selector"],["fxFlex.lt-md","22","fxLayoutAlign.gt-sm","center","fxFlex.gt-sm","20",3,"margin-left",4,"ngIf"],["color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],[3,"user"],[1,"main"],[1,"spacer"],["fxFlex.lt-md","22","fxLayoutAlign.gt-sm","center","fxFlex.gt-sm","20"],["fxLayout","center","ngClass.gt-sm","new-task-btn-desktop","ngClass.lt-md","new-task-btn-mobile","id","new-task","color","accent","mat-raised-button","","fxLayoutAlign","center",3,"disabled","click"],["id","main-content"],["outlet","outlet"]],template:function(t,e){1&t&&r.Nc(0,A,54,13,"mat-sidenav-container",0),2&t&&r.zc("ngIf",e.display)},directives:[i.l,m.b,m.a,f.a,f.b,b.b,v.a,k.a,n.c,m.c,O.a,O.c,b.a,S.b,j.a,y,I,N.c,N.d,_.a,L.a,b.c,S.a,n.f,E],styles:[".main[_ngcontent-%COMP%]{height:85vh;width:100%}@media (max-width:1279px){.main[_ngcontent-%COMP%]{height:89vh;width:100%}}mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%!important;margin:0;padding:0}mat-sidenav[_ngcontent-%COMP%]{width:30px;position:absolute;z-index:99999;background-color:#1b1b1b}.new-task-btn-desktop[_ngcontent-%COMP%]{font-weight:bolder;width:100px;font-size:15px;text-align:center}.new-task-btn-mobile[_ngcontent-%COMP%]{font-weight:bolder;width:100%;font-size:11px;text-align:center;padding:0;margin-left:0}.spacer[_ngcontent-%COMP%]{flex:1 1 auto;width:50px}mat-icon[_ngcontent-%COMP%]{margin:.5em}.icon-pages[_ngcontent-%COMP%]{font-size:30px;margin-left:2em}mat-toolbar-row[_ngcontent-%COMP%]{background-color:#1b1b1b;padding:5px!important;margin-top:0!important}.div-task-btn-desktop[_ngcontent-%COMP%]{margin-right:7vw}.div-task-btn-mobile[_ngcontent-%COMP%]{margin-right:0}.div-not-display[_ngcontent-%COMP%]{color:#7b87cc;margin:25px}"]}),t})();var q=c("cYj3");let $=[{path:"",component:V,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",canActivate:[q.a],loadChildren:()=>Promise.all([c.e(4),c.e(0),c.e(11)]).then(c.bind(null,"99Un")).then(t=>t.HomeModule)},{path:"calendar",loadChildren:()=>Promise.all([c.e(5),c.e(4),c.e(10)]).then(c.bind(null,"E0IO")).then(t=>t.CalendarSchedulerModule),canActivate:[q.a],data:{animation:"calendar-scheduler"}},{path:"task-manager",loadChildren:()=>c.e(17).then(c.bind(null,"d6DY")).then(t=>t.TaskManagerModule),canActivate:[q.a],data:{animation:"task-manager"}}]}],U=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(e){return new(e||t)},imports:[[i.c,n.e.forChild($)]]}),t})();var B=c("YUcS"),X=c("jAig"),Y=c("3Pt+");let Q=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(e){return new(e||t)},imports:[[i.c,X.a,Y.g,B.a]]}),t})();var G=c("yGOH"),K=c("mvOm");let W=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(e){return new(e||t)},imports:[[i.c,X.a,Y.g,B.a,K.b]]}),t})();var Z=c("9Xeq");let J=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(e){return new(e||t)},imports:[[i.c,X.a,Z.a]]}),t})(),tt=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(e){return new(e||t)},imports:[[i.c,U,n.e,X.a,B.a,Q,W,G.a,J]]}),t})()},"e/WU":function(t,e,c){"use strict";c.d(e,"a",(function(){return k})),c.d(e,"b",(function(){return O}));var i=c("fXoL"),n=c("ofXK"),a=c("3Pt+"),r=c("z17N"),s=c("bTqV"),o=c("qFsG"),l=c("d3UM"),p=c("Qu3c"),d=c("iadO"),h=c("FKr1"),u=c("kmnG");function g(t,e){if(1&t){const t=i.ic();i.hc(0,"div",3),i.hc(1,"mat-form-field",4),i.hc(2,"mat-label"),i.Pc(3),i.gc(),i.hc(4,"input",5,6),i.pc("ngModelChange",(function(e){return i.Hc(t),i.tc().setDate(e)})),i.gc(),i.cc(6,"mat-datepicker-toggle",7),i.cc(7,"mat-datepicker",null,8),i.gc(),i.gc()}if(2&t){const t=i.Fc(8),e=i.tc();i.Ob(3),i.Qc(e.label),i.Ob(1),i.zc("min",e.minDate)("max",e.maxDate)("disabled",e.disabled)("ngModel",e.selectedDate)("matDatepicker",t),i.Ob(2),i.zc("for",t)}}function m(t,e){if(1&t&&(i.hc(0,"mat-option",16),i.Pc(1),i.gc()),2&t){const t=e.$implicit,c=i.tc(2);i.zc("value",c.monthValue(t)),i.Ob(1),i.Rc(" ",t," ")}}function f(t,e){if(1&t){const t=i.ic();i.hc(0,"div",9),i.hc(1,"mat-form-field",10),i.hc(2,"mat-label"),i.Pc(3,"Year"),i.gc(),i.hc(4,"input",11,12),i.pc("keyup",(function(){i.Hc(t);const e=i.Fc(5),c=i.Fc(10);return i.tc().setDate(null,e.value,c.value)})),i.gc(),i.gc(),i.hc(6,"mat-form-field",10),i.hc(7,"mat-label"),i.Pc(8,"Month"),i.gc(),i.hc(9,"mat-select",13,14),i.pc("selectionChange",(function(){i.Hc(t);const e=i.Fc(5),c=i.Fc(10);return i.tc().setDate(void 0,e.value,c.value)})),i.Nc(11,m,2,2,"mat-option",15),i.gc(),i.gc(),i.gc()}if(2&t){const t=i.Fc(5),e=i.tc();i.Ob(4),i.zc("disabled",e.disabled)("min",e.min?e.min.getFullYear():null)("max",e.max?e.max.getFullYear():null)("value",e.selectedDate?e.selectedDate.getFullYear().toString():null),i.Ob(5),i.zc("value",e.selectedDate?e.selectedDate.getMonth().toString():null)("disabled",!t.value||e.disabled),i.Ob(2),i.zc("ngForOf",e.monthOptions)}}function b(t,e){if(1&t&&(i.hc(0,"label",22),i.Pc(1),i.gc()),2&t){const t=i.tc(2);i.Ob(1),i.Qc(t.label)}}function v(t,e){if(1&t){const t=i.ic();i.hc(0,"div",17),i.Nc(1,b,2,1,"label",18),i.hc(2,"input",19,20),i.pc("ngModelChange",(function(e){return i.Hc(t),i.tc().setDate(e)})),i.gc(),i.cc(4,"owl-date-time",null,21),i.gc()}if(2&t){const t=i.Fc(5),e=i.tc();i.Ob(1),i.zc("ngIf",e.label),i.Ob(1),i.zc("owlDateTime",t)("owlDateTimeTrigger",t)("disabled",e.disabled)("placeholder",e.placeholder)("min",e.minDate)("max",e.maxDate)("ngModel",e.selectedDate)}}let k=(()=>{class t{constructor(){this.disabled=!1,this.monthOptions=["january","february","march","april","may","june","july","august","september","october","november","december"],this.propagateChange=t=>{}}writeValue(t){this.selectedDate=t}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}setDate(t,e,c){t?(this.selectedDate=t,this.propagateChange(this.selectedDate)):4===e.length&&(this.selectedDate=new Date(Number(e),Number(c),1,0,0,0,0),this.propagateChange(this.selectedDate))}monthValue(t){return class{static dateComparison(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}static isRangeInRange(t,e){return t.start<=e.start&&t.end>=e.end}static createMonthlyRange(t){let e=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),c=new Date(t.getFullYear(),t.getMonth(),e,0,0,0,0),i=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),n={start:null,end:null},a=new Date(t.getFullYear(),t.getMonth(),1-i.getDay()),r=new Date(t.getFullYear(),t.getMonth(),e+(6-c.getDay()),23,59,59,0);return n.start=a,n.end=r,n}static milisecondsToPeriod(t,e){let c=[],i=(e-t)/1e3;if(Number(String(i).split(".")[0])>0){i=Number(String(i).split(".")[0]);let t=i/60;if(Number(String(t).split(".")[0])>0){t=Number(String(t).split(".")[0]);let e=t/60;if(Math.round(60*Number("0."+String(e).split(".")[1]))>=1&&c.push(Math.round(60*Number("0."+String(e).split(".")[1]))+(Math.round(60*Number("0."+String(e).split(".")[1]))>1?" minutes":" minute")),Number(String(e).split(".")[0])>0){e=Number(String(e).split(".")[0]);let t=e/24;Math.round(24*Number("0."+String(t).split(".")[1]))>=1&&c.push(Math.round(24*Number("0."+String(t).split(".")[1]))+(Math.round(24*Number("0."+String(t).split(".")[1]))>1?" hours":" hour")),Number(String(t).split(".")[0])>0&&(t=Number(String(t).split(".")[0]),c.push(t+" days"))}}}return c.reverse()}static milisecsToString(t){return this.milisecondsToPeriod(0,t)}static monthValue(t){let e;if("string"==typeof t)switch(t){case"january":e=0;break;case"february":e=1;break;case"march":e=2;break;case"april":e=3;break;case"may":e=4;break;case"june":e=5;break;case"july":e=6;break;case"august":e=7;break;case"september":e=8;break;case"october":e=9;break;case"november":e=10;break;case"december":e=11}else switch(t){case 0:e="january";break;case 1:e="february";break;case 2:e="march";break;case 3:e="april";break;case 4:e="may";break;case 5:e="june";break;case 6:e="july";break;case 7:e="august";break;case 8:e="september";break;case 9:case 10:e="october";break;case 11:e="december"}return e.toString()}}.monthValue(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Vb({type:t,selectors:[["lp-date-selector"]],inputs:{disabled:"disabled",selectedDate:"selectedDate",dateFormat:"dateFormat",minDate:"minDate",maxDate:"maxDate",placeholder:"placeholder",label:"label"},features:[i.Nb([{provide:a.j,useExisting:Object(i.hb)(()=>t),multi:!0}])],decls:3,vars:3,consts:[["class","div-date","fxLayoutAlign","center",4,"ngIf"],["class","div-date","fxLayout.gt-xs","row","fxLayoutAlign","center","fxLayout.xs","column",4,"ngIf"],["class","div-date","fxLayout","column","fxLayoutAlign","center",4,"ngIf"],["fxLayoutAlign","center",1,"div-date"],["fxFlex","100","appearance","fill"],["name","date","matInput","",3,"min","max","disabled","ngModel","matDatepicker","ngModelChange"],["daySelection",""],["matSuffix","",3,"for"],["picker",""],["fxLayout.gt-xs","row","fxLayoutAlign","center","fxLayout.xs","column",1,"div-date"],["fxFlex","40","fxLayoutAlign","center","appearance","fill"],["matInput","","onkeypress","return event.charCode >= 48 && event.charCode <= 57","placeholder","Year",3,"disabled","min","max","value","keyup"],["yearSelection",""],[3,"value","disabled","selectionChange"],["monthSelection",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["fxLayout","column","fxLayoutAlign","center",1,"div-date"],["for","endDate",4,"ngIf"],["required","","matInput","","readonly","",1,"input-date",3,"owlDateTime","owlDateTimeTrigger","disabled","placeholder","min","max","ngModel","ngModelChange"],["timeSelection",""],["dt2",""],["for","endDate"]],template:function(t,e){1&t&&(i.Nc(0,g,9,7,"div",0),i.Nc(1,f,12,7,"div",1),i.Nc(2,v,6,8,"div",2)),2&t&&(i.zc("ngIf","day"===e.dateFormat),i.Ob(1),i.zc("ngIf","month"===e.dateFormat),i.Ob(1),i.zc("ngIf","time"===e.dateFormat))},directives:[n.l,u.c,u.f,o.b,a.c,d.b,a.l,a.o,d.d,u.g,d.a,l.a,n.k,h.n,r.b,a.q,r.d,r.a],styles:[".div-date[_ngcontent-%COMP%]{margin:5px}.div-date[_ngcontent-%COMP%]   .input-date[_ngcontent-%COMP%]{cursor:pointer}.div-date[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:200px!important}"]}),t})(),O=(()=>{class t{}return t.\u0275mod=i.Zb({type:t}),t.\u0275inj=i.Yb({factory:function(e){return new(e||t)},imports:[[n.c,r.c,r.e,s.b,o.c,l.b,p.b,d.c,h.l,a.g,a.p]]}),t})()},l5mm:function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));var i=c("HDdC"),n=c("D0XW"),a=c("Y7HM");function r(t=0,e=n.a){return(!Object(a.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=n.a),new i.a(c=>(c.add(e.schedule(s,t,{subscriber:c,counter:0,period:t})),c))}function s(t){const{subscriber:e,counter:c,period:i}=t;e.next(c),this.schedule({subscriber:e,counter:c+1,period:i},i)}},mVP8:function(t,e,c){"use strict";c.d(e,"a",(function(){return j}));var i=c("fXoL");const n=["Task","Project"],a=[{label:"CREATION",value:"POST"},{label:"EDITION",value:"PUT"},{label:"DELETION ",value:"DELETE"}];var r=c("3Pt+"),s=c("XiUz"),o=c("kmnG"),l=c("qFsG"),p=c("mvOm"),d=c("ofXK"),h=c("d3UM"),u=c("FKr1"),g=c("e/WU"),m=c("bTqV"),f=c("PyEr");function b(t,e){if(1&t){const t=i.ic();i.hc(0,"button",16),i.pc("click",(function(){return i.Hc(t),i.tc().queryFilters.project=""})),i.Pc(1,"x"),i.gc()}}function v(t,e){if(1&t&&(i.hc(0,"mat-option",17),i.Pc(1),i.gc()),2&t){const t=e.$implicit;i.zc("value",t),i.Ob(1),i.Rc(" ",t," ")}}function k(t,e){if(1&t&&(i.hc(0,"mat-option",17),i.Pc(1),i.gc()),2&t){const t=e.$implicit;i.zc("value",t.value),i.Ob(1),i.Rc(" ",t.label," ")}}function O(t,e){if(1&t){const t=i.ic();i.hc(0,"button",16),i.pc("click",(function(){return i.Hc(t),i.tc().queryFilters.from=null})),i.Pc(1,"x"),i.gc()}}function S(t,e){if(1&t){const t=i.ic();i.hc(0,"button",16),i.pc("click",(function(){return i.Hc(t),i.tc().queryFilters.to=null})),i.Pc(1,"x"),i.gc()}}let j=(()=>{class t{constructor(){this.typesOpt=n,this.methodsOpt=a,this.queryFilters={project:"",type:"",method:"",from:null,to:null},this.getNotifications=new i.r}ngOnChanges(t){if(t.queryString&&this.queryString){const t=this.queryString.split("?")[1].split("&"),e=t.reduce((e,c,i)=>e+`${'"'+c.split("=")[0]+'"'}:${'"'+c.split("=")[1]+'"'}${t[i+1]?",":""}`,"{")+"}",c=JSON.parse(e);Object.keys(c).forEach(t=>{Object.keys(this.queryFilters).includes(t.toString())&&(this.queryFilters[t]="from"===t||"to"===t?Number(c[t]):c[t])})}}setDate(t,e){this.queryFilters[t]=e.getTime()}search(){let t=Object.keys(this.queryFilters).reduce((t,e)=>t+(t?this.queryFilters[e]&&null!=this.queryFilters[e]?`&${e}=${this.queryFilters[e]}`:"":this.queryFilters[e]&&null!=this.queryFilters[e]?`?${e}=${this.queryFilters[e]}`:""),"");this.getNotifications.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Vb({type:t,selectors:[["app-notifications-filter"]],inputs:{queryString:"queryString"},outputs:{getNotifications:"getNotifications"},features:[i.Mb],decls:31,vars:16,consts:[["fxLayout.gt-sm","row","fxLayout.lt-md","column","action","",3,"ngSubmit"],["notificationForm","ngForm"],["fxFlex","16",1,"mat-form-field-input"],["matInput","","lpInputTrimmer","","autocomplete","off","name","project",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["fxFlex","16","appearance","fill"],["name","type",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","method",3,"ngModel","ngModelChange"],["fxFlex","18","fxLayoutAlign","center"],["name","from","dateFormat","time","placeholder","Start date",3,"ngModel","ngModelChange"],["from","ngModel"],["name","to","dateFormat","time","placeholder","End date",3,"ngModel","ngModelChange"],["to","ngModel"],["fxLayoutAlign","center","fxFlex","5","type","submit","mat-raised-button",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"]],template:function(t,e){1&t&&(i.hc(0,"form",0,1),i.pc("ngSubmit",(function(){return e.search()})),i.hc(2,"mat-form-field",2),i.hc(3,"mat-label"),i.Pc(4,"Project"),i.gc(),i.hc(5,"input",3),i.pc("ngModelChange",(function(t){return e.queryFilters.project=t})),i.gc(),i.Nc(6,b,2,0,"button",4),i.gc(),i.hc(7,"mat-form-field",5),i.hc(8,"mat-label"),i.Pc(9,"Type"),i.gc(),i.hc(10,"mat-select",6),i.pc("ngModelChange",(function(t){return e.queryFilters.type=t})),i.cc(11,"mat-option",7),i.Nc(12,v,2,2,"mat-option",8),i.gc(),i.gc(),i.hc(13,"mat-form-field",5),i.hc(14,"mat-label"),i.Pc(15,"Method"),i.gc(),i.hc(16,"mat-select",9),i.pc("ngModelChange",(function(t){return e.queryFilters.method=t})),i.cc(17,"mat-option",7),i.Nc(18,k,2,2,"mat-option",8),i.gc(),i.gc(),i.hc(19,"div",10),i.hc(20,"lp-date-selector",11,12),i.pc("ngModelChange",(function(t){return e.setDate("from",t)})),i.uc(22,"lpParseDate"),i.gc(),i.Nc(23,O,2,0,"button",4),i.gc(),i.hc(24,"div",10),i.hc(25,"lp-date-selector",13,14),i.pc("ngModelChange",(function(t){return e.setDate("to",t)})),i.uc(27,"lpParseDate"),i.gc(),i.Nc(28,S,2,0,"button",4),i.gc(),i.hc(29,"button",15),i.Pc(30,"SEARCH"),i.gc(),i.gc()),2&t&&(i.Ob(5),i.zc("ngModel",e.queryFilters.project),i.Ob(1),i.zc("ngIf",e.queryFilters.project),i.Ob(4),i.zc("ngModel",e.queryFilters.type),i.Ob(2),i.zc("ngForOf",e.typesOpt),i.Ob(4),i.zc("ngModel",e.queryFilters.method),i.Ob(2),i.zc("ngForOf",e.methodsOpt),i.Ob(2),i.zc("ngModel",i.wc(22,10,e.queryFilters.from,"date")),i.Ob(3),i.zc("ngIf",e.queryFilters.from),i.Ob(2),i.zc("ngModel",i.wc(27,13,e.queryFilters.to,"date")),i.Ob(3),i.zc("ngIf",e.queryFilters.to))},directives:[r.s,r.m,r.n,s.c,o.c,s.a,o.f,l.b,r.c,p.a,r.l,r.o,d.l,h.a,u.n,d.k,s.b,g.a,m.a,o.g],pipes:[f.b],styles:["form[_ngcontent-%COMP%]{margin:0!important}mat-form-field[_ngcontent-%COMP%]{height:38px!important;padding:0!important;margin:5px;width:100%!important}  .mat-form-field-appearance-legacy .mat-form-field-infix{margin-top:1px!important;padding:0 0 3px}  .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:1.7em}  .mat-form-field-appearance-fill .mat-form-field-infix{padding:3px}  .mat-form-field-appearance-fill .mat-form-field-flex{background-color:#fbfbfb}button[_ngcontent-%COMP%]{height:40px}  .input-date{margin:0!important;font-size:13px}  .mat-select{padding:0}  .mat-form-field-appearance-fill .mat-form-field-flex{padding:2px}"]}),t})()},mvOm:function(t,e,c){"use strict";c.d(e,"a",(function(){return a})),c.d(e,"b",(function(){return r}));var i=c("fXoL"),n=c("3Pt+");let a=(()=>{class t{constructor(t,e){this.el=t,this.renderer=e,this.propagateChange=t=>{}}onChange(t){this.propagateChange(t.trim())}writeValue(t){this.renderer.setProperty(this.el.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}}return t.\u0275fac=function(e){return new(e||t)(i.bc(i.o),i.bc(i.Q))},t.\u0275dir=i.Wb({type:t,selectors:[["","lpInputTrimmer",""]],hostBindings:function(t,e){1&t&&i.pc("input",(function(t){return e.onChange(t.target.value)}))},features:[i.Nb([{provide:n.j,useExisting:Object(i.hb)(()=>t),multi:!0}])]}),t})(),r=(()=>{class t{}return t.\u0275mod=i.Zb({type:t}),t.\u0275inj=i.Yb({factory:function(e){return new(e||t)},imports:[[]]}),t})()},qmzK:function(t,e,c){"use strict";c.d(e,"a",(function(){return St}));var i=c("0IaG"),n=c("Brg/"),a=c("fXoL"),r=c("S6We"),s=c("O31/"),o=c("RCfm"),l=c("XiUz"),p=c("bTqV");let d=(()=>{class t{constructor(t,e,c,i,n){this.dialogRef=t,this.data=e,this.taskService=c,this.cdr=i,this.authService=n,this.date=(new Date).getTime()}ngOnInit(){this.taskService.getTaskById(this.data.taskId).subscribe(t=>{n.c.set("state-data",this.data.taskId,"task-on-screen"),this.taskSelected=t}),this.prevDialog=this.data.prevDialog}editTask(t){this.dialogRef.close({nextDialog:"editCreateTask",dataRequired:t})}restoreVersion(t){let e=n.d.copyObject(t.taskChanges);t.taskChanges.user=this.authService.userOnline._id,t.taskChanges.participants&&(t.taskChanges.participants=t.taskChanges.participants.map(t=>t._id)),this.taskService.putTask(t.taskChanges,t.id).subscribe(t=>{this.taskSelected=n.d.mergeObjects(t,e),this.cdr.detectChanges()})}back(){this.dialogRef.close({prevDialog:this.prevDialog})}closeDialog(t){this.dialogRef.close(t?{date:t}:void 0),n.c.remove("state-data","task-on-screen")}}return t.\u0275fac=function(e){return new(e||t)(a.bc(i.h),a.bc(i.a),a.bc(r.a),a.bc(a.i),a.bc(s.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-task-dialog-smart"]],decls:5,vars:3,consts:[[3,"taskSelected","prevDialog","date","back","editTask","restoreVersion"],["fxLayoutAlign","center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(a.hc(0,"mat-dialog-content"),a.hc(1,"app-task-detail",0),a.pc("back",(function(){return e.back()}))("editTask",(function(t){return e.editTask(t)}))("restoreVersion",(function(t){return e.restoreVersion(t)})),a.gc(),a.gc(),a.hc(2,"mat-dialog-actions",1),a.hc(3,"button",2),a.pc("click",(function(){return e.closeDialog()})),a.Pc(4," Close "),a.gc(),a.gc()),2&t&&(a.Ob(1),a.zc("taskSelected",e.taskSelected)("prevDialog",e.prevDialog)("date",e.date))},directives:[i.f,o.a,i.c,l.b,p.a],styles:["h3[_ngcontent-%COMP%]{margin:0;padding:0}h5[_ngcontent-%COMP%]{font-weight:bolder;margin-bottom:5px;text-align:center}.div-category[_ngcontent-%COMP%]{margin-top:10px;height:12vh;width:100%}.div-category[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.div-category[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px}@media (max-width:1279px){.div-category[_ngcontent-%COMP%]{margin-top:5px;height:12vh}}.property-changed[_ngcontent-%COMP%]{color:#d1870c}.div-labels[_ngcontent-%COMP%]{height:20px;width:100%}.p-description[_ngcontent-%COMP%]{max-width:100%!important;max-height:100%!important;word-break:break-all}.small-current-state[_ngcontent-%COMP%], .small-user[_ngcontent-%COMP%]{font-weight:bolder;color:#7b87cc}mat-dialog-content[_ngcontent-%COMP%]{margin-bottom:0!important;max-height:100vh!important}"]}),t})();var h=c("lJxs"),u=c("T1xj"),g=c("+0xr"),m=c("ofXK"),f=c("NFeN"),b=c("STbY");function v(t,e){if(1&t){const t=a.ic();a.hc(0,"mat-icon",11),a.pc("click",(function(){return a.Hc(t),a.tc().back.emit()})),a.Pc(1,"keyboard_backspace"),a.gc()}}function k(t,e){1&t&&(a.hc(0,"th",12),a.Pc(1," Name "),a.gc())}function O(t,e){if(1&t&&(a.hc(0,"td",13),a.Pc(1),a.gc()),2&t){const t=e.$implicit;a.Ob(1),a.Rc(" ",t.name," ")}}function S(t,e){1&t&&(a.hc(0,"th",12),a.Pc(1," Time "),a.gc())}function j(t,e){if(1&t&&(a.hc(0,"td",13),a.hc(1,"p"),a.Pc(2),a.uc(3,"date"),a.gc(),a.hc(4,"p"),a.Pc(5),a.uc(6,"date"),a.gc(),a.gc()),2&t){const t=e.$implicit;a.Ob(2),a.Qc(a.vc(3,2,t.startDate)),a.Ob(3),a.Qc(a.vc(6,4,t.endDate))}}function P(t,e){1&t&&a.cc(0,"th",12)}function y(t,e){if(1&t){const t=a.ic();a.hc(0,"td",13),a.hc(1,"mat-icon",14),a.Pc(2,"more_vert"),a.gc(),a.hc(3,"mat-menu",15,16),a.hc(5,"button",17),a.pc("click",(function(){a.Hc(t);const c=e.$implicit;return a.tc().checkDetails.emit(c._id)})),a.Pc(6,"View details"),a.gc(),a.hc(7,"button",18),a.pc("click",(function(){a.Hc(t);const c=e.$implicit;return a.tc().editTask.emit(c._id)})),a.Pc(8,"Edit"),a.gc(),a.hc(9,"button",18),a.pc("click",(function(){a.Hc(t);const c=e.$implicit;return a.tc().deleteTask.emit(c._id)})),a.Pc(10,"Delete"),a.gc(),a.gc(),a.gc()}if(2&t){const t=e.$implicit,c=a.Fc(4),i=a.tc();a.Ob(1),a.zc("matMenuTriggerFor",c),a.Ob(6),a.zc("disabled",i.taskService.taskTimeStarted(t)),a.Ob(2),a.zc("disabled",!t.editable)}}function x(t,e){1&t&&a.cc(0,"tr",19)}function D(t,e){1&t&&a.cc(0,"tr",20)}let C=(()=>{class t{constructor(t){this.taskService=t,this.dataSource=new g.k([]),this.close=new a.r,this.checkDetails=new a.r,this.editTask=new a.r,this.deleteTask=new a.r,this.back=new a.r,this.displayedColumns=["name","time","opt"]}ngOnChanges(t){t.tasks&&this.tasks&&(this.dataSource.data=this.tasks)}}return t.\u0275fac=function(e){return new(e||t)(a.bc(r.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-tasks-list-dialog"]],inputs:{tasks:"tasks",prevDialog:"prevDialog"},outputs:{close:"close",checkDetails:"checkDetails",editTask:"editTask",deleteTask:"deleteTask",back:"back"},features:[a.Mb],decls:18,vars:6,consts:[[3,"click",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","time"],["matColumnDef","opt"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center"],["mat-raised-button","",3,"click"],[3,"click"],["mat-header-cell",""],["mat-cell",""],[3,"matMenuTriggerFor"],["yPosition","below","xPosition","after"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.hc(0,"mat-dialog-content"),a.hc(1,"div"),a.Nc(2,v,2,0,"mat-icon",0),a.gc(),a.hc(3,"table",1),a.fc(4,2),a.Nc(5,k,2,0,"th",3),a.Nc(6,O,2,1,"td",4),a.ec(),a.fc(7,5),a.Nc(8,S,2,0,"th",3),a.Nc(9,j,7,6,"td",4),a.ec(),a.fc(10,6),a.Nc(11,P,1,0,"th",3),a.Nc(12,y,11,3,"td",4),a.ec(),a.Nc(13,x,1,0,"tr",7),a.Nc(14,D,1,0,"tr",8),a.gc(),a.gc(),a.hc(15,"mat-dialog-actions",9),a.hc(16,"button",10),a.pc("click",(function(){return e.close.emit()})),a.Pc(17," Close "),a.gc(),a.gc()),2&t&&(a.Ob(2),a.zc("ngIf",e.prevDialog),a.Ob(1),a.zc("dataSource",e.dataSource),a.Ob(10),a.zc("matHeaderRowDef",e.displayedColumns),a.Ob(1),a.zc("matRowDefColumns",e.displayedColumns),a.Ob(1),a.Mc("margin-top","25px"))},directives:[i.f,m.l,g.j,g.c,g.e,g.b,g.g,g.i,i.c,l.b,p.a,f.a,g.d,g.a,b.c,b.d,b.a,g.f,g.h],pipes:[m.e],styles:["mat-dialog-content[_ngcontent-%COMP%]{margin:0!important;padding:0!important}table[_ngcontent-%COMP%]{width:100%;height:200px;overflow:auto}"]}),t})(),w=(()=>{class t{constructor(t,e,c,i){this.taskService=t,this.dialogRef=e,this.projectService=c,this.data=i,this.tasks=[]}ngOnInit(){this.selectedDate=n.c.get("state-data","date-selected"),this.selectedDate=this.selectedDate?new Date(this.selectedDate):void 0,this.prevDialog=this.data.prevDialog,this.selectedProject=this.projectService.selectedProject._id,this.getTasks(new Date(this.data.date))}getTasks(t){let e=[t.getTime(),null];this.taskService.getTasks("day",n.d.toQueryString({project:this.selectedProject,from:e[0],to:e[1]})).pipe(Object(h.a)(t=>t.tasks)).subscribe(t=>{this.tasks=t})}checkDetails(t){this.dialogRef.close({nextDialog:"taskInfo",taskId:t})}editTask(t){this.dialogRef.close({nextDialog:"editCreateTask",taskId:t})}close(t,e){this.dialogRef.close(t&&e?{id:t,action:e}:void 0)}back(){this.dialogRef.close({prevDialog:this.prevDialog})}}return t.\u0275fac=function(e){return new(e||t)(a.bc(r.a),a.bc(i.h),a.bc(u.a),a.bc(i.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-tasks-list-dialog-smart"]],decls:1,vars:2,consts:[[3,"prevDialog","tasks","close","back","editTask","checkDetails"]],template:function(t,e){1&t&&(a.hc(0,"app-tasks-list-dialog",0),a.pc("close",(function(){return e.close()}))("back",(function(){return e.back()}))("editTask",(function(t){return e.editTask(t)}))("checkDetails",(function(t){return e.checkDetails(t)})),a.gc()),2&t&&a.zc("prevDialog",e.prevDialog)("tasks",e.tasks)},directives:[C],styles:["mat-dialog-content[_ngcontent-%COMP%]{margin:0!important;padding:0!important}table[_ngcontent-%COMP%]{width:100%;height:200px;overflow:auto}"]}),t})();var M=c("QmO0"),T=c("IzEk"),I=c("PyEr"),N=c("SV+Y"),_=c("3Pt+"),L=c("kmnG"),E=c("qFsG"),F=c("svyN"),z=c("ihCf"),R=c("d3UM"),H=c("FKr1"),A=c("e/WU");const V=["autosize"];function q(t,e){if(1&t){const t=a.ic();a.hc(0,"mat-icon",21),a.pc("click",(function(){return a.Hc(t),a.tc(2).dialogBack.emit()})),a.Pc(1,"keyboard_backspace"),a.gc()}}function $(t,e){if(1&t&&(a.hc(0,"mat-option",13),a.Pc(1),a.gc()),2&t){const t=e.$implicit;a.zc("value",t._id),a.Ob(1),a.Rc(" ",t.name,"")}}function U(t,e){if(1&t&&(a.hc(0,"mat-option",13),a.Pc(1),a.gc()),2&t){const t=e.$implicit;a.zc("value",t._id),a.Ob(1),a.Rc(" ",t.name,"")}}function B(t,e){if(1&t&&(a.hc(0,"div"),a.Pc(1),a.gc()),2&t){const t=e.$implicit;a.Ob(1),a.Qc(t)}}function X(t,e){if(1&t){const t=a.ic();a.hc(0,"button",22),a.pc("click",(function(){a.Hc(t);const e=a.tc(2);return e.postTask.emit(e.task)})),a.Pc(1," create "),a.gc()}if(2&t){a.tc();const t=a.Fc(2);a.zc("disabled",t.invalid)}}function Y(t,e){if(1&t){const t=a.ic();a.hc(0,"button",22),a.pc("click",(function(){a.Hc(t);const e=a.tc(2);return e.putTask.emit(e.checkChangesToPatch())})),a.Pc(1," save changes "),a.gc()}if(2&t){a.tc();const t=a.Fc(2),e=a.tc();a.zc("disabled",e.taskHasChanges()||t.invalid)}}function Q(t,e){if(1&t){const t=a.ic();a.hc(0,"mat-dialog-content"),a.hc(1,"form",1,2),a.hc(3,"div",3),a.hc(4,"div",4),a.hc(5,"div"),a.Nc(6,q,2,0,"mat-icon",5),a.gc(),a.hc(7,"mat-form-field"),a.hc(8,"mat-label"),a.Pc(9,"Task name"),a.gc(),a.hc(10,"input",6),a.pc("ngModelChange",(function(e){return a.Hc(t),a.tc().task.name=e})),a.gc(),a.gc(),a.hc(11,"mat-form-field"),a.hc(12,"mat-label"),a.Pc(13,"Description"),a.gc(),a.hc(14,"textarea",7,8),a.pc("ngModelChange",(function(e){return a.Hc(t),a.tc().task.description=e})),a.gc(),a.gc(),a.hc(16,"mat-form-field"),a.hc(17,"mat-label"),a.Pc(18,"Participants"),a.gc(),a.hc(19,"mat-select",9),a.pc("ngModelChange",(function(e){return a.Hc(t),a.tc().participantsChange(e)})),a.Nc(20,$,2,2,"mat-option",10),a.gc(),a.gc(),a.hc(21,"mat-form-field"),a.hc(22,"mat-label"),a.Pc(23,"Reviewers"),a.gc(),a.hc(24,"mat-select",11),a.pc("ngModelChange",(function(e){return a.Hc(t),a.tc().task.reviewers=e})),a.Nc(25,U,2,2,"mat-option",10),a.gc(),a.gc(),a.hc(26,"mat-form-field"),a.hc(27,"mat-select",12),a.pc("ngModelChange",(function(e){return a.Hc(t),a.tc().task.priority=e})),a.hc(28,"mat-option",13),a.Pc(29,"HIGH"),a.gc(),a.hc(30,"mat-option",13),a.Pc(31,"MEDIUM"),a.gc(),a.hc(32,"mat-option",13),a.Pc(33,"LOW"),a.gc(),a.gc(),a.gc(),a.gc(),a.hc(34,"div",14),a.hc(35,"lp-date-selector",15),a.pc("ngModelChange",(function(e){return a.Hc(t),a.tc().setDate("startDate",e)})),a.uc(36,"lpParseDate"),a.gc(),a.hc(37,"lp-date-selector",16),a.pc("ngModelChange",(function(e){return a.Hc(t),a.tc().setDate("endDate",e)})),a.uc(38,"lpParseDate"),a.uc(39,"lpParseDate"),a.gc(),a.hc(40,"div",1),a.Nc(41,B,2,1,"div",17),a.gc(),a.gc(),a.gc(),a.hc(42,"div",18),a.Nc(43,X,2,1,"button",19),a.Nc(44,Y,2,1,"button",19),a.hc(45,"button",20),a.pc("click",(function(){return a.Hc(t),a.tc().close.emit()})),a.Pc(46," Close "),a.gc(),a.gc(),a.gc(),a.gc()}if(2&t){const t=a.tc();a.Ob(6),a.zc("ngIf",t.prevDialog),a.Ob(4),a.zc("ngModel",t.task.name),a.Ob(4),a.zc("ngModel",t.task.description),a.Ob(5),a.zc("ngModel",t.task.participants),a.Ob(1),a.zc("ngForOf",t.projectParticipants),a.Ob(4),a.zc("ngModel",t.task.reviewers),a.Ob(1),a.zc("ngForOf",t.reviewersOptions),a.Ob(2),a.zc("ngModel",t.task.priority),a.Ob(1),a.zc("value",3),a.Ob(2),a.zc("value",2),a.Ob(2),a.zc("value",1),a.Ob(3),a.zc("disabled",t.task._id&&t.taskService.taskTimeStarted(t.task))("minDate",t.today)("ngModel",a.wc(36,22,t.task.startDate,"date")),a.Ob(2),a.zc("disabled",!t.task.startDate||t.task._id&&t.taskService.taskTimeStarted(t.task))("ngModel",a.wc(38,25,t.task.endDate,"date"))("minDate",a.wc(39,28,t.task.startDate,"date")),a.Ob(4),a.zc("ngForOf",t.timeString),a.Ob(1),a.Mc("margin-top",t.mdService.desktop?"25px":"0px"),a.Ob(1),a.zc("ngIf",!t.task._id),a.Ob(1),a.zc("ngIf",t.task._id)}}let G=(()=>{class t{constructor(t,e,c,i){this._ngZone=t,this.authService=e,this.taskService=c,this.mdService=i,this.isDialog=!0,this.panelOpenState=!1,this.projectParticipants=[],this.postTask=new a.r,this.putTask=new a.r,this.close=new a.r,this.back=new a.r,this.dialogBack=new a.r,this.today=new Date}ngOnInit(){this.task={name:"",description:"",createdBy:this.authService.userOnline._id,participants:[],reviewers:[],project:this.selectedProject,priority:1,status:"",startDate:null,endDate:null}}ngOnChanges(t){t.task&&this.task&&(this.taskPristine=n.d.copyObject(this.task))}taskHasChanges(){return n.d.areEquals(this.task,this.taskPristine)}onRecursiveOptChange(t){t&&(this.task.endDate=null)}triggerResize(){this._ngZone.onStable.pipe(Object(T.a)(1)).subscribe(()=>this.autosize.resizeToFitContent(!0))}setDate(t,e){"startDate"===t&&(this.task.endDate=null);const c=new I.b;this.task[t]=c.transform(e,"miliseconds")}checkChangesToPatch(){let t=n.d.getObjectDifferences(this.taskPristine,this.task);return t.user=this.authService.userOnline._id,{taskChanges:t,id:this.task._id}}startTimeMin(){let t=new Date;return n.b.dateComparison(new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate(),0,0,0,0),new Date(this.task.startDate))?(new I.c,`${t.getHours()}:${t.getMinutes()}`):"07:00 am"}participantsChange(t){this.task.participants=t,this.task.reviewers=this.task.reviewers.filter(t=>this.task.participants.includes(t))}get timeString(){return this.task.startDate&&this.task.endDate?n.b.milisecondsToPeriod(this.task.startDate,this.task.endDate):null}get reviewersOptions(){return this.projectParticipants.filter(t=>this.task.participants.includes(t._id))}}return t.\u0275fac=function(e){return new(e||t)(a.bc(a.J),a.bc(s.a),a.bc(r.a),a.bc(N.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-task-edition-and-creation"]],viewQuery:function(t,e){var c;1&t&&a.Vc(V,!0),2&t&&a.Ec(c=a.qc())&&(e.autosize=c.first)},inputs:{isDialog:"isDialog",projectParticipants:"projectParticipants",selectedProject:"selectedProject",task:"task",prevDialog:"prevDialog"},outputs:{postTask:"postTask",putTask:"putTask",close:"close",back:"back",dialogBack:"dialogBack"},features:[a.Mb],decls:1,vars:1,consts:[[4,"ngIf"],["fxLayout","column"],["taskForm","ngForm"],["fxLayout.gt-xs","row","fxLayout.xs","column","fxLayoutAlign","space-around","fxLayoutGap","10px"],["fxFlex","50","fxLayoutGap.gt-md","25px","fxLayout","column"],[3,"click",4,"ngIf"],["matInput","","lpInputTrimmer","","name","name","autocomplete","off","required","",3,"ngModel","ngModelChange"],["cdkTextareaAutosize","","matInput","","lpInputTrimmer","","name","description","required","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","4",3,"ngModel","ngModelChange"],["autosize","cdkTextareaAutosize"],["name","participants","required","","multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","reviewers","required","","multiple","",3,"ngModel","ngModelChange"],["name","priority","required","",3,"ngModel","ngModelChange"],[3,"value"],["fxLayout","column","fxLayoutAlign","space-around","fxFlex.gt-xs","50","fxLayoutGap","25px"],["dateFormat","time","placeholder","Start date","required","","name","startDate",3,"disabled","minDate","ngModel","ngModelChange"],["dateFormat","time","placeholder","End date","required","","name","endDate","id","endDate",3,"disabled","ngModel","minDate","ngModelChange"],[4,"ngFor","ngForOf"],["fxLayoutAlign","center"],["mat-raised-button","",3,"disabled","click",4,"ngIf"],["mat-raised-button","",3,"click"],[3,"click"],["mat-raised-button","",3,"disabled","click"]],template:function(t,e){1&t&&a.Nc(0,Q,47,31,"mat-dialog-content",0),2&t&&a.zc("ngIf",e.isDialog&&e.task)},directives:[m.l,i.f,_.s,_.m,_.n,l.c,l.b,l.d,l.a,L.c,L.f,E.b,_.c,F.a,_.q,_.l,_.o,z.b,R.a,m.k,H.n,A.a,p.a,f.a],pipes:[I.b],styles:["ngx-material-timepicker[_ngcontent-%COMP%]{z-index:1!important;position:absolute}.date-picker-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.input-date[_ngcontent-%COMP%]{cursor:pointer}.mat-dialog-content[_ngcontent-%COMP%]{max-height:100%}"]}),t})(),K=(()=>{class t{constructor(t,e,c,i,n,a){this.projectService=t,this.userService=e,this.taskService=c,this.authService=i,this.dialogRef=n,this.data=a,this.projectParticipants=[]}ngOnInit(){this.data&&this.data.taskId&&(this.getTask(this.data.taskId),n.c.set("state-data",this.data.taskId,"task-on-screen")),this.selectedProject=this.projectService.selectedProject._id,this.getPanelData(this.selectedProject),this.prevDialog=this.data?this.data.prevDialog:void 0}getTask(t){this.taskService.getTaskById(t).subscribe(t=>{let e=n.d.copyObject(t);e.participants=e.participants.map(t=>t._id),e.reviewers=e.reviewers.map(t=>t._id),e.createdBy=e.createdBy._id,e.project=e.project,this.taskSelected=e,n.c.set("state-data",this.taskSelected._id,"task")})}getPanelData(t){t?this.projectService.getParticipants(t).subscribe(t=>{this.projectParticipants=t}):this.userService.getUsers(0,999999).subscribe(t=>{t.push(this.authService.userOnline),this.projectParticipants=t})}postTask(t){this.taskService.postTask(t).subscribe(t=>{this.closeDialog()})}putTask(t){this.taskService.putTask(t.taskChanges,t.id).subscribe(e=>{this.taskSelected=n.d.mergeObjects(e,t.taskChanges)})}dialogBack(){this.dialogRef.close({prevDialog:this.prevDialog})}closeDialog(){this.dialogRef.close(),n.c.remove("state-data","task-on-screen")}}return t.\u0275fac=function(e){return new(e||t)(a.bc(u.a),a.bc(M.a),a.bc(r.a),a.bc(s.a),a.bc(i.h),a.bc(i.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-task-dialog-edition-and-creation-smart"]],inputs:{taskSelected:"taskSelected"},decls:1,vars:4,consts:[[3,"selectedProject","projectParticipants","task","prevDialog","postTask","putTask","close","dialogBack"]],template:function(t,e){1&t&&(a.hc(0,"app-task-edition-and-creation",0),a.pc("postTask",(function(t){return e.postTask(t)}))("putTask",(function(t){return e.putTask(t)}))("close",(function(){return e.closeDialog()}))("dialogBack",(function(){return e.dialogBack()})),a.gc()),2&t&&a.zc("selectedProject",e.selectedProject)("projectParticipants",e.projectParticipants)("task",e.taskSelected)("prevDialog",e.prevDialog)},directives:[G],styles:["ngx-material-timepicker[_ngcontent-%COMP%]{z-index:1!important;position:absolute}.date-picker-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.input-date[_ngcontent-%COMP%]{cursor:pointer}.mat-dialog-content[_ngcontent-%COMP%]{max-height:100%}"]}),t})();class W{constructor(t,e,c,i,n,a,r,s,o){this.name=t,this.createdBy=e,this.participants=c,this.administrators=i,this.messages=n,this.tasks=a,this.status=r,this._id=s,this.prevStates=o}}var Z=c("mvOm"),J=c("bSwM"),tt=c("MutI");function et(t,e){1&t&&(a.hc(0,"p",21),a.Pc(1,"Min 5 characters"),a.gc())}function ct(t,e){if(1&t&&(a.hc(0,"mat-option",22),a.Pc(1),a.gc()),2&t){const t=e.$implicit;a.zc("value",t._id),a.Ob(1),a.Qc(t.name)}}function it(t,e){if(1&t&&(a.hc(0,"mat-list-item",23),a.Pc(1),a.gc()),2&t){const t=e.$implicit;a.Ob(1),a.Qc(t.name)}}function nt(t,e){if(1&t&&(a.hc(0,"mat-option",22),a.Pc(1),a.gc()),2&t){const t=e.$implicit;a.zc("value",t._id),a.Ob(1),a.Qc(t.name)}}function at(t,e){if(1&t&&(a.hc(0,"mat-list-item",23),a.Pc(1),a.gc()),2&t){const t=e.$implicit;a.Ob(1),a.Qc(t.name)}}function rt(t,e){if(1&t){const t=a.ic();a.hc(0,"button",24),a.pc("click",(function(){return a.Hc(t),a.tc().createProject()})),a.hc(1,"strong"),a.Pc(2,"Create project"),a.gc(),a.gc()}if(2&t){a.tc();const t=a.Fc(4);a.zc("disabled",t.invalid)}}function st(t,e){if(1&t){const t=a.ic();a.hc(0,"button",24),a.pc("click",(function(){return a.Hc(t),a.tc().saveProjectChanges()})),a.hc(1,"strong"),a.Pc(2,"Save Changes"),a.gc(),a.gc()}if(2&t){const t=a.tc(),e=a.Fc(4);a.zc("disabled",e.invalid||e.pristine||t.checkProjectState())}}let ot=(()=>{class t{constructor(){this.participantsOptions=[],this.admOptions=[],this.participantsSelected=[],this.admSelected=[],this.hide=new a.r,this.postProject=new a.r,this.putProject=new a.r}ngOnChanges(t){t.project&&(this.project||(this.project=new W("",this.userOnline._id,[this.userOnline._id],[this.userOnline._id],[],[],!0),this.participantsSelected=[this.userOnline],this.admSelected=[this.userOnline],this.admOptions=[this.userOnline]),this.projectPristine=n.d.copyObject(this.project)),t.participantsOptions&&this.participantsOptions.length>0&&(this.project&&this.project._id?(this.participantsSelected=this.project.participants,this.admOptions=this.project.participants,this.admSelected=this.project.administrators):(this.project=new W("",this.userOnline._id,[this.userOnline],[this.userOnline],[],[],!0),this.participantsSelected=[this.userOnline],this.admSelected=[this.userOnline],this.admOptions=[this.userOnline]),this.project.participants=this.project.participants.map(t=>t._id),this.project.administrators=this.project.administrators.map(t=>t._id),this.projectPristine=n.d.copyObject(this.project))}participantsChange(t){this.project.participants=t,this.participantsSelected=this.participantsOptions.filter(e=>t.includes(e._id)),this.project.administrators=this.project.administrators.filter(t=>this.project.participants.includes(t)),this.admSelected=this.admSelected.filter(t=>this.project.participants.includes(t._id)),this.admOptions=this.participantsOptions.filter(t=>this.project.participants.includes(t._id))}administratorsChange(t){this.project.administrators=t,this.admSelected=this.admOptions.filter(e=>t.includes(e._id))}createProject(){this.postProject.emit(this.project)}saveProjectChanges(){const t=n.d.getObjectDifferences(this.projectPristine,this.project);this.putProject.emit(t)}checkProjectState(){return n.d.areEquals(this.project,this.projectPristine)}hideModal(){this.hide.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Vb({type:t,selectors:[["app-project-edition-and-creation"]],inputs:{participantsOptions:"participantsOptions",project:"project",userOnline:"userOnline"},outputs:{hide:"hide",postProject:"postProject",putProject:"putProject"},features:[a.Mb],decls:37,vars:20,consts:[["mat-dialog-title",""],["fxFlex","100%"],["fxLayout","column"],["projectForm","ngForm"],["fxFlex","100%","fxLayout.gt-xs","row","fxLayout.xs","column","fxLayoutGap.gt-xs","20px","fxLayoutAlign","center","fxLayoutAlign","space-around"],["autocomplete","off","matInput","","lpInputTrimmer","","minlength","5","required","","id","name","name","name","type","text","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["nameControl","ngModel"],["class","error-message",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center"],["name","status",3,"ngModel","ngModelChange"],["statusControl",""],["fxFlex","100%","fxLayout.gt-xs","row","fxLayoutAlign","space-around","fxLayout.xs","column"],["fxFlex","45%"],["required","","multiple","","name","participants",1,"form-control","mb-2",3,"disabled","ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["role","list"],["role","listitem",4,"ngFor","ngForOf"],["required","","multiple","","name","administrators",3,"disabled","ngModel","selectionChange"],["fxLayoutAlign","center"],["class","mat-raised-button",3,"disabled","click",4,"ngIf"],[1,"mat-raised-button",3,"click"],[1,"error-message"],[3,"value"],["role","listitem"],[1,"mat-raised-button",3,"disabled","click"]],template:function(t,e){if(1&t&&(a.cc(0,"h2",0),a.hc(1,"mat-dialog-content"),a.hc(2,"div",1),a.hc(3,"form",2,3),a.hc(5,"div",4),a.hc(6,"div"),a.hc(7,"mat-form-field"),a.hc(8,"input",5,6),a.pc("ngModelChange",(function(t){return e.project.name=t})),a.gc(),a.gc(),a.Nc(10,et,2,0,"p",7),a.gc(),a.hc(11,"div",8),a.hc(12,"mat-checkbox",9,10),a.pc("ngModelChange",(function(t){return e.project.status=t})),a.Pc(14),a.gc(),a.gc(),a.gc(),a.hc(15,"div",11),a.hc(16,"div",12),a.hc(17,"mat-form-field"),a.hc(18,"mat-label"),a.Pc(19,"Participants"),a.gc(),a.hc(20,"mat-select",13),a.pc("selectionChange",(function(t){return e.participantsChange(t.value)})),a.Nc(21,ct,2,2,"mat-option",14),a.gc(),a.gc(),a.hc(22,"mat-list",15),a.Nc(23,it,2,1,"mat-list-item",16),a.gc(),a.gc(),a.hc(24,"div",12),a.hc(25,"mat-form-field"),a.hc(26,"mat-label"),a.Pc(27,"Administrators"),a.gc(),a.hc(28,"mat-select",17),a.pc("selectionChange",(function(t){return e.administratorsChange(t.value)})),a.Nc(29,nt,2,2,"mat-option",14),a.gc(),a.gc(),a.hc(30,"mat-list",15),a.Nc(31,at,2,1,"mat-list-item",16),a.gc(),a.gc(),a.gc(),a.gc(),a.gc(),a.gc(),a.hc(32,"mat-dialog-actions",18),a.Nc(33,rt,3,1,"button",19),a.Nc(34,st,3,1,"button",19),a.hc(35,"button",20),a.pc("click",(function(){return e.hideModal()})),a.Pc(36,"Close"),a.gc(),a.gc()),2&t){const t=a.Fc(9);a.Ob(8),a.zc("ngModel",e.project.name),a.Ob(2),a.zc("ngIf",(null==t.errors?null:t.errors.minlength)&&!(null!=t.errors&&t.errors.required)),a.Ob(2),a.zc("ngModel",e.project.status),a.Ob(2),a.Rc(" Status :",e.project.status?"active":"unactive",""),a.Ob(2),a.Mc("margin-top","15px"),a.Ob(4),a.zc("disabled",0===e.participantsOptions.length)("ngModel",e.project.participants),a.Ob(1),a.zc("ngForOf",e.participantsOptions),a.Ob(2),a.zc("ngForOf",e.participantsSelected),a.Ob(1),a.Mc("margin-top","15px")("margin-bottom","15px"),a.Ob(4),a.zc("disabled",0===e.admOptions.length&&0===e.project.administrators.length)("ngModel",e.project.administrators),a.Ob(1),a.zc("ngForOf",e.admOptions),a.Ob(2),a.zc("ngForOf",e.admSelected),a.Ob(2),a.zc("ngIf",!e.project._id),a.Ob(1),a.zc("ngIf",e.project._id)}},directives:[i.i,i.f,l.a,_.s,_.m,_.n,l.c,l.d,l.b,L.c,E.b,_.c,Z.a,_.h,_.q,_.l,_.o,m.l,J.a,L.f,R.a,m.k,tt.a,i.c,H.n,tt.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%!important}mat-list-item[_ngcontent-%COMP%]{font-size:1rem!important}"]}),t})(),lt=(()=>{class t{constructor(t,e,c,i,n){this.userService=t,this.projectService=e,this.authService=c,this.dialogRef=i,this.data=n,this.participantsOptions=[],this.userOnline=this.authService.userOnline}ngOnInit(){var t;(null===(t=this.data)||void 0===t?void 0:t.project)&&(this.project=n.d.copyObject(this.data.project),n.c.set("state-data",this.project._id,"project-on-screen")),this.userService.getUsers(0,999999).subscribe(t=>{this.participantsOptions=t})}postProject(t){this.projectService.postProject(t).subscribe(()=>{this.hideModal()})}putProject(t){this.projectService.putProject(t,this.project._id).subscribe(()=>{this.hideModal()})}hideModal(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(a.bc(M.a),a.bc(u.a),a.bc(s.a),a.bc(i.h),a.bc(i.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-project-edition-and-creation-smart"]],decls:1,vars:3,consts:[[3,"participantsOptions","userOnline","project","hide","postProject","putProject"]],template:function(t,e){1&t&&(a.hc(0,"app-project-edition-and-creation",0),a.pc("hide",(function(){return e.hideModal()}))("postProject",(function(t){return e.postProject(t)}))("putProject",(function(t){return e.putProject(t)})),a.gc()),2&t&&a.zc("participantsOptions",e.participantsOptions)("userOnline",e.userOnline)("project",e.project)},directives:[ot],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%!important}mat-list-item[_ngcontent-%COMP%]{font-size:1rem!important}"]}),t})();var pt=c("st1D");let dt=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e,this.onActionResolved=new a.r}close(){this.dialogRef.close()}actionResolved(t){this.onActionResolved.emit(t),this.actionsRequired=this.actionsRequired.filter(e=>e.property!=Object.keys(t)[0]),0===this.actionsRequired.length&&this.close()}ngOnInit(){this.actionsRequired=this.data.actionsRequired}}return t.\u0275fac=function(e){return new(e||t)(a.bc(i.a),a.bc(i.h))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-actions-required-smart-dialog"]],outputs:{onActionResolved:"onActionResolved"},decls:6,vars:1,consts:[[1,"mat-typography"],[1,"div-actions-required"],[3,"actions","setAction"],["fxLayoutAlign","center","align","end"],["mat-button","","mat-dialog-close",""]],template:function(t,e){1&t&&(a.hc(0,"mat-dialog-content",0),a.hc(1,"div",1),a.hc(2,"app-actions-required",2),a.pc("setAction",(function(t){return e.actionResolved(t)})),a.gc(),a.gc(),a.gc(),a.hc(3,"mat-dialog-actions",3),a.hc(4,"button",4),a.Pc(5,"CLOSE"),a.gc(),a.gc()),2&t&&(a.Ob(2),a.zc("actions",e.actionsRequired))},directives:[i.f,pt.a,i.c,l.b,p.a,i.d],styles:[".div-actions-required[_ngcontent-%COMP%]{\n      max-height: 40vh;\n  overflow- y: scroll;"]}),t})();var ht=c("mVP8");let ut=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.getNotifications=new a.r}ngOnInit(){this.queryString=this.data.queryString}closeDialog(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(a.bc(i.h),a.bc(i.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-notifications-filter-smart-dialog"]],outputs:{getNotifications:"getNotifications"},decls:5,vars:1,consts:[[3,"queryString","getNotifications"],["fxLayoutAlign","center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(a.hc(0,"mat-dialog-content"),a.hc(1,"app-notifications-filter",0),a.pc("getNotifications",(function(t){return e.getNotifications.emit(t),e.dialogRef.close()})),a.gc(),a.gc(),a.hc(2,"mat-dialog-actions",1),a.hc(3,"button",2),a.pc("click",(function(){return e.closeDialog()})),a.Pc(4," Close "),a.gc(),a.gc()),2&t&&(a.Ob(1),a.zc("queryString",e.queryString))},directives:[i.f,ht.a,i.c,l.b,p.a],styles:[".mat-dialog-content[_ngcontent-%COMP%]{\n    max-height:75vh !important\n  }"]}),t})();var gt=c("VRyK"),mt=c("Dx4h");let ft=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){this.user=this.data.user}closeDialog(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(a.bc(i.h),a.bc(i.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-user-info-smart-dialog"]],decls:5,vars:1,consts:[[3,"user"],["fxLayoutAlign","center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(a.hc(0,"mat-dialog-content"),a.cc(1,"app-user-info",0),a.gc(),a.hc(2,"mat-dialog-actions",1),a.hc(3,"button",2),a.pc("click",(function(){return e.closeDialog()})),a.Pc(4," Close "),a.gc(),a.gc()),2&t&&(a.Ob(1),a.zc("user",e.user))},directives:[i.f,mt.a,i.c,p.a],styles:[".img-user[_ngcontent-%COMP%]{width:15vh;height:15vh;margin:2rem}.div-user-property[_ngcontent-%COMP%]{margin:15px}.div-user-property[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#7b87cc;text-align:center;margin-bottom:5px}.div-user-property[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),t})();var bt=c("HlmG");let vt=(()=>{class t{constructor(t,e,c,i,n,a){this.authService=t,this.projectService=e,this.cdr=c,this.dialogRef=i,this.data=n,this.dialogsService=a,this.date=(new Date).getTime()}ngOnInit(){this.projectService.getProjectById(this.data.projectId).subscribe(t=>{n.c.set("state-data",this.data.projectId,"project-on-screen"),this.projectSelected=t}),this.date=this.data.date?this.data.date:this.date,this.prevDialog=this.data.prevDialog}restoreVersion(t){let e=n.d.copyObject(t.projectChanges);t.projectChanges.user=this.authService.userOnline._id,t.projectChanges.participants&&(t.projectChanges.participants=t.projectChanges.participants.map(t=>t._id)),this.projectService.putProject(t.projectChanges,this.projectSelected._id).pipe(Object(h.a)(t=>t.project)).subscribe(t=>{this.projectSelected=n.d.mergeObjects(t,e),this.cdr.detectChanges()})}editProject(){this.dialogsService.openEditProjectDialog(this.projectSelected),this.closeDialog()}back(){this.dialogRef.close({prevDialog:this.prevDialog})}closeDialog(t){this.dialogRef.close(t?{date:t}:void 0),n.c.remove("state-data","task-on-screen")}}return t.\u0275fac=function(e){return new(e||t)(a.bc(s.a),a.bc(u.a),a.bc(a.i),a.bc(i.h),a.bc(i.a),a.bc(St))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-projects-detail-dialog-smart"]],decls:5,vars:2,consts:[[3,"date","projectSelected","editProject","restoreVersion"],["fxLayoutAlign","center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(a.hc(0,"mat-dialog-content"),a.hc(1,"app-project-detail",0),a.pc("editProject",(function(){return e.editProject()}))("restoreVersion",(function(t){return e.restoreVersion(t)})),a.gc(),a.gc(),a.hc(2,"mat-dialog-actions",1),a.hc(3,"button",2),a.pc("click",(function(){return e.closeDialog()})),a.Pc(4,"CLOSE"),a.gc(),a.gc()),2&t&&(a.Ob(1),a.zc("date",e.date)("projectSelected",e.projectSelected))},directives:[i.f,bt.a,i.c,l.b,p.a],encapsulation:2}),t})();var kt=c("bXur");let Ot=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.projects=[],this.putProject=new a.r,this.deleteProject=new a.r,this.selectProject=new a.r}ngOnInit(){console.log(this.data.projects),this.projects=this.data.projects||[],this.dialogRef.updatePosition({top:"17%"})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(a.bc(i.h),a.bc(i.a))},t.\u0275cmp=a.Vb({type:t,selectors:[["app-projects-dialog"]],outputs:{putProject:"putProject",deleteProject:"deleteProject",selectProject:"selectProject"},decls:5,vars:2,consts:[[3,"projects","projectSelectedIn","projectSelectedOut","deleteProject","putProject"],["fxLayoutAlign","center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(a.hc(0,"mat-dialog-content"),a.hc(1,"app-projects",0),a.pc("projectSelectedOut",(function(t){return e.selectProject.emit({project:t,order:"select"}),e.close()}))("deleteProject",(function(t){return e.deleteProject.emit({project:t,order:"put"}),e.close()}))("putProject",(function(t){return e.putProject.emit({project:t,order:"put"}),e.close()})),a.gc(),a.gc(),a.hc(2,"mat-dialog-actions",1),a.hc(3,"button",2),a.pc("click",(function(){return e.close()})),a.Pc(4,"CLOSE"),a.gc(),a.gc()),2&t&&(a.Ob(1),a.zc("projects",e.projects)("projectSelectedIn",e.projectSelected))},directives:[i.f,kt.a,i.c,l.b,p.a],styles:["mat-dialog-content[_ngcontent-%COMP%]{padding:0} .cdk-overlay-pane{margin-top:0!important}"]}),t})(),St=(()=>{class t{constructor(t){this.dialog=t}openTaskInfoDialog(t,e){this.taskId=t;const c=new i.e;c.disableClose=!0,c.autoFocus=!0,c.width="500px",c.maxHeight="900px",c.data=e?{taskId:t,prevDialog:e}:{taskId:t};let n=this.dialog.open(d,c).afterClosed().subscribe(t=>{t&&(t.prevDialog?this.checkPrevDialog(t.prevDialog):t.nextDialog&&this.checkNextDialog(t.nextDialog,t.dataRequired,"taskInfo")),n.unsubscribe()})}openTasksListInfoDialog(t,e){this.tasksDate=t;const c=new i.e;c.disableClose=!0,c.autoFocus=!0,c.data=e?{date:t,prevDialog:e}:{date:t},c.width="500px";let n=this.dialog.open(w,c).afterClosed().subscribe(t=>{t&&(t.prevDialog?this.checkPrevDialog(t.prevDialog):t.nextDialog&&this.checkNextDialog(t.nextDialog,t.taskId,"tasksList")),n.unsubscribe()})}openEditCreateTaskDialog(t,e){const c=new i.e;c.disableClose=!0,c.autoFocus=!0,c.maxHeight="900px",c.width="500px",c.data=t?e?{taskId:t,prevDialog:e}:{taskId:t}:null;let n=this.dialog.open(K,c).afterClosed().subscribe(t=>{t&&(t.prevDialog?this.checkPrevDialog(t.prevDialog):t.nextDialog&&this.checkNextDialog(t.nextDialog,t.taskId,"editCreateTask")),n.unsubscribe()})}openEditProjectDialog(t){const e=new i.e;e.disableClose=!0,e.autoFocus=!0,e.data={project:t},e.width="500px",this.dialog.open(lt,e)}openPostProjectDialog(){const t=new i.e;t.disableClose=!0,t.autoFocus=!0,t.width="500px",this.dialog.open(lt,t)}openProjectInfoDialog(t){const e=new i.e;e.disableClose=!0,e.autoFocus=!0,e.width="500px",e.data={projectId:t},this.dialog.open(vt,e)}checkPrevDialog(t){switch(t){case"tasksList":this.openTasksListInfoDialog(this.tasksDate);break;case"taskInfo":this.openTaskInfoDialog(this.taskId);break;case"editCreateTask":this.openEditCreateTaskDialog(this.taskId)}}checkNextDialog(t,e,c){switch(t){case"tasksList":"number"==typeof e&&this.openTasksListInfoDialog(e,c);break;case"taskInfo":"string"==typeof e&&this.openTaskInfoDialog(e,c);break;case"editCreateTask":"string"==typeof e&&this.openEditCreateTaskDialog(e,c)}}showActionsRequired(t){const e=new i.e;return e.disableClose=!0,e.autoFocus=!0,e.maxHeight="500px",e.width="650px",e.data={actionsRequired:t},this.dialog.open(dt,e).componentInstance.onActionResolved}openNotificationsFilters(t){const e=new i.e;return e.disableClose=!0,e.autoFocus=!0,e.maxHeight="100vh",e.width="250px",e.data={queryString:t},this.dialog.open(ut,e).componentInstance.getNotifications}openProjectList(t){const e=new i.e;e.disableClose=!0,e.autoFocus=!0,e.data={projects:t};let c=this.dialog.open(Ot,e);return Object(gt.a)(c.componentInstance.putProject,c.componentInstance.deleteProject,c.componentInstance.selectProject)}openUserInfo(t){const e=new i.e;e.disableClose=!0,e.autoFocus=!0,e.data={user:t},this.dialog.open(ft,e)}}return t.\u0275fac=function(e){return new(e||t)(a.lc(i.b))},t.\u0275prov=a.Xb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},st1D:function(t,e,c){"use strict";c.d(e,"a",(function(){return m}));var i=c("fXoL"),n=c("ofXK"),a=c("XiUz"),r=c("3Pt+"),s=c("kmnG"),o=c("d3UM"),l=c("dNRF"),p=c("FKr1"),d=c("bTqV");function h(t,e){if(1&t&&(i.hc(0,"mat-option",11),i.Pc(1),i.gc()),2&t){const t=e.$implicit;i.zc("value",t),i.Ob(1),i.Qc(t)}}function u(t,e){if(1&t&&(i.hc(0,"button",12),i.Pc(1,"Submit action"),i.gc()),2&t){i.tc();const t=i.Fc(18);i.zc("disabled",t.invalid)}}function g(t,e){if(1&t){const t=i.ic();i.hc(0,"div",2),i.hc(1,"div"),i.Pc(2,"The property "),i.hc(3,"strong"),i.Pc(4),i.gc(),i.Pc(5," of "),i.hc(6,"strong"),i.Pc(7),i.gc(),i.Pc(8," has been changed by "),i.hc(9,"strong"),i.Pc(10),i.gc(),i.Pc(11,"to "),i.hc(12,"strong"),i.Pc(13),i.gc(),i.Pc(14,", "),i.hc(15,"strong"),i.Pc(16,"ACTION IS REQUIRED"),i.gc(),i.gc(),i.hc(17,"form",3,4),i.pc("ngSubmit",(function(){return i.Hc(t),i.tc().showThinkingTimeProgress=!0})),i.hc(19,"mat-form-field",5),i.hc(20,"mat-select",6),i.Nc(21,h,2,2,"mat-option",7),i.gc(),i.gc(),i.Nc(22,u,2,1,"button",8),i.hc(23,"div",9),i.hc(24,"lp-thinking-time-progress",10),i.pc("end",(function(c){i.Hc(t);const n=e.$implicit,a=i.Fc(18),r=i.tc();return c?r.setActionValue(a.value,n.item._id):r.showThinkingTimeProgress=!1})),i.gc(),i.gc(),i.gc(),i.gc()}if(2&t){const t=e.$implicit,c=i.tc();i.Ob(1),i.Mc("margin-bottom","7px"),i.Ob(3),i.Qc(t.property),i.Ob(3),i.Qc(t.item.type),i.Ob(3),i.Rc("",t.userFrom.name," "),i.Ob(3),i.Rc("'",t.currentValue,"'"),i.Ob(2),i.Mc("color","red"),i.Ob(5),i.zc("name",t.property),i.Ob(1),i.zc("ngForOf",t.options),i.Ob(1),i.zc("ngIf",!c.showThinkingTimeProgress),i.Ob(2),i.zc("show",c.showThinkingTimeProgress)}}let m=(()=>{class t{constructor(){this.setAction=new i.r,this.actions=[]}setActionValue(t,e){this.setAction.emit(Object.assign({[Object.keys(t)[0]]:t[Object.keys(t)[0]]},{itemId:e})),this.showThinkingTimeProgress=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Vb({type:t,selectors:[["app-actions-required"]],inputs:{actions:"actions"},outputs:{setAction:"setAction"},decls:2,vars:1,consts:[[1,"div-actions-required"],["fxLayout","column",4,"ngFor","ngForOf"],["fxLayout","column"],["fxLayoutAlign","space-around","fxLayout.gt-sm","row","fxLayout.lt-md","column",3,"ngSubmit"],["actionForm","ngForm"],["fxFlex.gt-sm","60","fxLayoutGap","20px","appearance","fill"],["ngModel","","required","",3,"name"],[3,"value",4,"ngFor","ngForOf"],["class","btn-submit","fxFlex.gt-sm","25","type","submit","mat-raised-button","",3,"disabled",4,"ngIf"],["fxLayoutAlign","center"],[3,"show","end"],[3,"value"],["fxFlex.gt-sm","25","type","submit","mat-raised-button","",1,"btn-submit",3,"disabled"]],template:function(t,e){1&t&&(i.hc(0,"div",0),i.Nc(1,g,25,12,"div",1),i.gc()),2&t&&(i.Ob(1),i.zc("ngForOf",e.actions))},directives:[n.k,a.c,r.s,r.m,r.n,a.b,s.c,a.a,a.d,o.a,r.l,r.o,r.q,n.l,l.a,p.n,d.a],styles:[".btn-submit[_ngcontent-%COMP%]{height:40px}.div-actions-required[_ngcontent-%COMP%]{overflow-y:scroll}.div-actions-required[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (min-width:0px) and (max-width:1279px){  .cdk-overlay-pane{position:absolute!important;top:5px!important}}"]}),t})()},yGOH:function(t,e,c){"use strict";c.d(e,"a",(function(){return a}));var i=c("ofXK"),n=c("fXoL");let a=(()=>{class t{}return t.\u0275mod=n.Zb({type:t}),t.\u0275inj=n.Yb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})()}}]);