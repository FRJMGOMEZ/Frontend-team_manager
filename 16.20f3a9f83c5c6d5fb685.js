(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"e+hA":function(e,t,c){"use strict";c.r(t),c.d(t,"TaskManagerPanelModule",(function(){return ht}));var i=c("ofXK"),s=c("tyNb"),n=c("EY2u"),a=c("eIep"),r=c("fXoL"),o=c("O31/"),l=c("S6We"),d=c("qmzK"),g=c("WLNs"),f=c("wZkO"),h=c("XiUz"),u=c("NFeN"),m=c("SV+Y"),p=c("Wp6s"),b=c("PqYM"),v=c("l5mm"),x=c("Brg/"),O=c("vkgz"),S=c("znSr");function k(e,t){if(1&e&&(r.hc(0,"p"),r.Pc(1),r.gc()),2&e){const e=t.$implicit,c=t.index,i=r.tc(2);r.Ob(1),r.Sc("",e||0,"",i.extraTimeStringArray[c+1]?", ":""," ")}}function w(e,t){if(1&e&&(r.hc(0,"div",9),r.hc(1,"div",10),r.hc(2,"div",11),r.cc(3,"div",7),r.gc(),r.gc(),r.hc(4,"div",12),r.hc(5,"div",10),r.Pc(6," EXTRA TIME "),r.gc(),r.hc(7,"div",10),r.Pc(8," ("),r.Nc(9,k,2,2,"p",13),r.Pc(10,") "),r.gc(),r.gc(),r.gc()),2&e){const e=r.tc();r.Ob(1),r.Mc("width","100","%"),r.Ob(2),r.Mc("width",e.extraTimeProgress,"%"),r.Ob(6),r.zc("ngForOf",e.extraTimeStringArray)}}const y=function(){return{"font-size":"10px"}};let M=(()=>{class e{constructor(e){this.cdr=e}ngOnChanges(e){e.taskSelected&&Object(b.a)().subscribe(()=>{this.extraTimeSubs&&this.extraTimeSubs.unsubscribe(),this.extraTimeSubs=this.calculateExtraTime().subscribe(),this.cdr.detectChanges()})}get timelineProgress(){return this.taskSelected&&(new Date).getTime()>=this.taskSelected.startDate?Math.round(100*((new Date).getTime()-this.taskSelected.startDate)/(this.taskSelected.endDate-this.taskSelected.startDate))<100?Math.ceil(100*((new Date).getTime()-this.taskSelected.startDate)/(this.taskSelected.endDate-this.taskSelected.startDate)):100:0}calculateExtraTime(){const e=()=>{this.extraTimeMilisec="on review"===this.taskSelected.status?this.taskSelected.extraTime?this.taskSelected.extraTime+((new Date).getTime()-this.taskSelected.deliverDate):(new Date).getTime()-this.taskSelected.deliverDate:this.taskSelected.extraTime?this.taskSelected.extraTime:(new Date).getTime()-this.taskSelected.deliverDate,this.extraTimeProgress=this.taskSelected.endDate<=(new Date).getTime()&&this.taskSelected.extraTime?((new Date).getTime()-100*this.taskSelected.deliverDate)/this.extraTimeMilisec:0,this.extraTimeStringArray=x.b.milisecsToString(this.extraTimeMilisec).filter((e,t)=>!e.includes("seconds"))};return e(),Object(v.a)(1e3).pipe(Object(O.a)(()=>{e()}))}ngOnDestroy(){this.extraTimeSubs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.bc(r.i))},e.\u0275cmp=r.Vb({type:e,selectors:[["app-task-manager-progress"]],inputs:{taskSelected:"taskSelected"},features:[r.Mb],decls:23,vars:22,consts:[["fxLayout","column","fxLayout","column",1,"div-progress-container",3,"ngStyle.xs"],["fxShow.lt-md","","fxHide.gt-sm","","fxLayoutAlign","space-between"],["fxLayoutAlign","center",1,"div-date"],["fxLayoutGap","5px","fxLayout","row",1,"div-progress",3,"fxFlex"],["fxHide.lt-md","","fxShow.gt-sm","","fxLayoutAlign","center","fxFlex","10"],["fxFlex.gt-sm","80","fxFlex.lt-md","100","fxLayoutAlign","center"],["fxFlex","90","fxLayout","column",1,"progress-bar-container"],[1,"progress-bar"],["fxFlex","40","class","div-progress","fxLayout","column",4,"ngIf"],["fxFlex","40","fxLayout","column",1,"div-progress"],["fxLayoutAlign","center"],["fxFlex","60","fxLayout","column",1,"progress-bar-container"],["fxFlex","10","fxLayout","row","fxLayoutAlign","center",1,"div-extratime-info"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(r.hc(0,"div",0),r.hc(1,"div",1),r.hc(2,"div",2),r.hc(3,"span"),r.Pc(4),r.uc(5,"date"),r.gc(),r.gc(),r.hc(6,"div",2),r.hc(7,"span"),r.Pc(8),r.uc(9,"date"),r.gc(),r.gc(),r.gc(),r.hc(10,"div",3),r.hc(11,"div",4),r.hc(12,"span"),r.Pc(13),r.uc(14,"date"),r.gc(),r.gc(),r.hc(15,"div",5),r.hc(16,"div",6),r.cc(17,"div",7),r.gc(),r.gc(),r.hc(18,"div",4),r.hc(19,"span"),r.Pc(20),r.uc(21,"date"),r.gc(),r.gc(),r.gc(),r.Nc(22,w,11,5,"div",8),r.gc()),2&e&&(r.zc("ngStyle.xs",r.Ac(21,y)),r.Ob(4),r.Qc(r.wc(5,9,t.taskSelected.startDate,"M/d/yy, H:mm ")),r.Ob(4),r.Rc(" ",r.wc(9,12,t.taskSelected.endDate,"M/d/yy, H:mm ")," "),r.Ob(2),r.zc("fxFlex",t.taskSelected.deliverDate?"40":"100"),r.Ob(3),r.Qc(r.wc(14,15,t.taskSelected.startDate,"M/d/yy, H:mm ")),r.Ob(4),r.Mc("width",t.timelineProgress,"%"),r.Ob(3),r.Rc(" ",r.wc(21,18,t.taskSelected.endDate,"M/d/yy, H:mm ")," "),r.Ob(2),r.zc("ngIf",t.extraTimeMilisec))},directives:[h.c,S.c,S.b,h.b,h.d,h.a,i.l,i.k],pipes:[i.e],styles:[".div-progress-container[_ngcontent-%COMP%]{width:100%;line-height:10pt;font-weight:bolder}.div-progress-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0!important;margin:0!important}.div-progress-container[_ngcontent-%COMP%]   .div-progress[_ngcontent-%COMP%]{margin-top:5px!important;width:100%;align-items:center}.div-progress-container[_ngcontent-%COMP%]   .div-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{height:18px;width:100%;background-color:wheat;border:1px solid #000;border-radius:5px}.div-progress-container[_ngcontent-%COMP%]   .div-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background-color:#7b87cc;height:100%;width:100%}.div-progress-container[_ngcontent-%COMP%]   .div-extratime-info[_ngcontent-%COMP%]{margin-top:10px!important}.div-progress-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{word-break:break-all}.div-progress-container[_ngcontent-%COMP%]   .div-date[_ngcontent-%COMP%]{margin:7px!important}"]}),e})();var F=c("Qu3c"),P=c("kmnG"),I=c("st1D");let C=(()=>{class e{constructor(){this.onActionResolved=new r.r}actionResolved(e){this.onActionResolved.emit(e),this.actionsRequired=this.actionsRequired.filter(t=>t.property!=Object.keys(e)[0])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Vb({type:e,selectors:[["app-actions-required-smart"]],inputs:{actionsRequired:"actionsRequired"},outputs:{onActionResolved:"onActionResolved"},decls:1,vars:1,consts:[[3,"actions","setAction"]],template:function(e,t){1&e&&(r.hc(0,"app-actions-required",0),r.pc("setAction",(function(e){return t.actionResolved(e)})),r.gc()),2&e&&r.zc("actions",t.actionsRequired)},directives:[I.a],encapsulation:2}),e})();function T(e,t){1&e&&(r.hc(0,"mat-label",23),r.Pc(1," TOGGLE STATUS "),r.gc())}function z(e,t){1&e&&(r.hc(0,"mat-label",23),r.Pc(1," EDIT "),r.gc())}function L(e,t){1&e&&(r.hc(0,"mat-label",23),r.Pc(1," DELETE TASK "),r.gc())}function _(e,t){if(1&e&&(r.hc(0,"li",24),r.Pc(1),r.gc()),2&e){const e=t.$implicit;r.Ob(1),r.Qc(e.name)}}function R(e,t){if(1&e&&(r.hc(0,"li",24),r.Pc(1),r.gc()),2&e){const e=t.$implicit;r.Ob(1),r.Qc(e.name)}}function A(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",25),r.hc(1,"h4"),r.Pc(2," Actions required "),r.gc(),r.hc(3,"mat-icon",5),r.pc("click",(function(){return r.Hc(e),r.tc(2).showActionsRequired()})),r.Pc(4,"assignment_late"),r.gc(),r.gc()}}function E(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",26),r.hc(1,"h4"),r.Pc(2," Actions required "),r.gc(),r.hc(3,"app-actions-required-smart",27),r.pc("onActionResolved",(function(t){return r.Hc(e),r.tc(2).actionResolved.emit(t)})),r.gc(),r.gc()}if(2&e){const e=r.tc(2);r.Ob(1),r.Mc("color","red"),r.Ob(2),r.zc("actionsRequired",e.taskSelected.actionsRequired)}}const D=function(e){return{"icon-disabled":e}};function N(e,t){if(1&e){const e=r.ic();r.hc(0,"div",1),r.hc(1,"mat-card",2),r.hc(2,"div",3),r.hc(3,"h4",4),r.Pc(4," Name: "),r.gc(),r.hc(5,"p",4),r.Pc(6),r.gc(),r.gc(),r.hc(7,"div",3),r.hc(8,"h4",4),r.Pc(9," Description: "),r.gc(),r.hc(10,"div",4),r.hc(11,"mat-icon",5),r.pc("click",(function(){return r.Hc(e),r.tc().showDescription()})),r.Pc(12,"pageview"),r.gc(),r.gc(),r.gc(),r.gc(),r.hc(13,"mat-card",2),r.hc(14,"div",3),r.hc(15,"h4",4),r.Pc(16," Status: "),r.gc(),r.hc(17,"p",4),r.Pc(18),r.gc(),r.gc(),r.hc(19,"div",3),r.hc(20,"h4",4),r.Pc(21," Priority: "),r.gc(),r.hc(22,"p",4),r.Pc(23),r.gc(),r.gc(),r.gc(),r.hc(24,"mat-card",6),r.hc(25,"h4",7),r.Pc(26," Progress "),r.gc(),r.cc(27,"app-task-manager-progress",8),r.gc(),r.hc(28,"mat-card",9),r.hc(29,"h4",10),r.Pc(30," Options "),r.gc(),r.hc(31,"div",11),r.hc(32,"div",12),r.hc(33,"div",13),r.hc(34,"mat-icon",14),r.pc("click",(function(){return r.Hc(e),r.tc().toggleStat()})),r.Pc(35),r.gc(),r.gc(),r.Nc(36,T,2,0,"mat-label",15),r.gc(),r.hc(37,"div",12),r.hc(38,"div",13),r.hc(39,"mat-icon",16),r.pc("click",(function(){r.Hc(e);const t=r.tc();return t.taskService.canBeEdited(t.taskSelected)?t.editTask.emit():null})),r.Pc(40,"edit"),r.gc(),r.gc(),r.Nc(41,z,2,0,"mat-label",15),r.gc(),r.hc(42,"div",12),r.hc(43,"div",13),r.hc(44,"mat-icon",17),r.pc("click",(function(){r.Hc(e);const t=r.tc();return t.taskService.taskTimeStarted(t.taskSelected)?null:t.deleteTask.emit()})),r.Pc(45,"delete"),r.gc(),r.gc(),r.Nc(46,L,2,0,"mat-label",15),r.gc(),r.gc(),r.gc(),r.hc(47,"mat-card",2),r.hc(48,"div",18),r.hc(49,"h4",19),r.Pc(50,"Participants"),r.gc(),r.hc(51,"ul"),r.Nc(52,_,2,1,"li",20),r.gc(),r.gc(),r.hc(53,"div",18),r.hc(54,"h4",19),r.Pc(55,"Reviewers"),r.gc(),r.hc(56,"ul"),r.Nc(57,R,2,1,"li",20),r.gc(),r.gc(),r.gc(),r.Nc(58,A,5,0,"mat-card",21),r.Nc(59,E,4,3,"mat-card",22),r.gc()}if(2&e){const e=r.tc();r.Ob(1),r.zc("fxFlex",e.mdService?8:10),r.Ob(5),r.Rc(" ",e.taskSelected.name," "),r.Ob(7),r.zc("fxFlex",e.mdService?8:10),r.Ob(5),r.Rc(" ",e.taskSelected.status.toUpperCase()," "),r.Ob(5),r.Rc(" ",1===e.taskSelected.priority?"HIGH":2===e.taskSelected.priority?"MEDIUM":"LOW"," "),r.Ob(1),r.zc("fxFlex",e.mdService.desktop?e.hasActsRequired?26:36:"42"),r.Ob(3),r.zc("taskSelected",e.taskSelected),r.Ob(1),r.zc("fxFlex",e.mdService.desktop?e.hasActsRequired?10:20:"35"),r.Ob(6),r.zc("matTooltip","on review"===e.taskSelected.status?"Task is being reviewed":"")("ngClass",r.Bc(21,D,!e.taskService.taskTimeStarted(e.taskSelected))),r.Ob(1),r.Rc(" ","pending"===e.taskSelected.status?"move_to_inbox":"on review"===e.taskSelected.status?"hourglass_full":"assignment_turned_in"," "),r.Ob(1),r.zc("ngIf",e.mdService.desktop),r.Ob(3),r.zc("ngClass",r.Bc(23,D,!e.taskService.canBeEdited(e.taskSelected))),r.Ob(2),r.zc("ngIf",e.mdService.desktop),r.Ob(3),r.zc("ngClass",r.Bc(25,D,e.taskService.taskTimeStarted(e.taskSelected))),r.Ob(2),r.zc("ngIf",e.mdService.desktop),r.Ob(1),r.zc("fxFlex",e.mdService.desktop&&e.hasActsRequired?15:30),r.Ob(5),r.zc("ngForOf",e.taskSelected.participants),r.Ob(5),r.zc("ngForOf",e.taskSelected.reviewers),r.Ob(1),r.zc("ngIf",e.hasActsRequired&&!e.mdService.desktop),r.Ob(1),r.zc("ngIf",e.hasActsRequired&&e.mdService.desktop)}}let H=(()=>{class e{constructor(e,t,c,i,s){this.taskService=e,this.authService=t,this.lpDialogsService=c,this.mdService=i,this.dialogsService=s,this.deleteTask=new r.r,this.toggleStatus=new r.r,this.editTask=new r.r,this.actionResolved=new r.r,this.hasActsRequired=!1,this.display=!1}ngOnInit(){}ngOnChanges(e){e.taskSelected&&this.taskSelected&&(this.hasActsRequired=!!(this.taskSelected.actionsRequired&&this.taskSelected.actionsRequired.length>0&&this.taskSelected.actionsRequired.find(e=>e.usersTo.map(e=>e._id).includes(this.authService.userOnline._id))))}toggleStat(){let e;switch(this.taskSelected.status){case"pending":e="on review";break;case"done":e="pending"}e&&this.taskService.taskTimeStarted(this.taskSelected)&&this.toggleStatus.emit(e)}showDescription(){this.lpDialogsService.openInfoDialog(this.taskSelected.description,"TASK DESCRIPTION")}showActionsRequired(){this.dialogsService.showActionsRequired(this.taskSelected.actionsRequired).subscribe(e=>{this.actionResolved.emit(e)})}}return e.\u0275fac=function(t){return new(t||e)(r.bc(l.a),r.bc(o.a),r.bc(g.b),r.bc(m.a),r.bc(d.a))},e.\u0275cmp=r.Vb({type:e,selectors:[["app-task-manager-info"]],inputs:{taskSelected:"taskSelected"},outputs:{deleteTask:"deleteTask",toggleStatus:"toggleStatus",editTask:"editTask",actionResolved:"actionResolved"},features:[r.Mb],decls:1,vars:1,consts:[["class","div-info-container","fxLayout","column",4,"ngIf"],["fxLayout","column",1,"div-info-container"],["fxLayout","row",3,"fxFlex"],["fxLayout","row","fxFlex","50"],["fxFlex.gt-sm","50","fxLayout.gt-sm","column","fxLayoutAlign","center"],["color","primary",3,"click"],["fxLayout","column",3,"fxFlex"],["fxLayout.gt-sm","column","fxLayoutAlign","center"],[3,"taskSelected"],[3,"fxFlex"],["fxFlex.gt-xs","15","fxFlex.xs","50"],["fxFlex","80","fxLayout","row"],["fxFlex.gt-xs","20","fxFlex.xs","33","fxLayout","row"],["fxLayoutAlign","center"],["color","primary",3,"matTooltip","ngClass","click"],["class","label-action",4,"ngIf"],["color","primary",3,"ngClass","click"],["color","warn",3,"ngClass","click"],["fxLayout.gt-sm","row","fxLayout.lt-md","column","fxFlex","50"],["fxLayout.gt-sm","column","fxLayoutAlign.lt-md","center"],["role","listitem",4,"ngFor","ngForOf"],["fxLayoutAlign","center","fxLayout","row","fxFlex","10",4,"ngIf"],["fxLayout","column","fxFlex","35",4,"ngIf"],[1,"label-action"],["role","listitem"],["fxLayoutAlign","center","fxLayout","row","fxFlex","10"],["fxLayout","column","fxFlex","35"],[3,"actionsRequired","onActionResolved"]],template:function(e,t){1&e&&r.Nc(0,N,60,27,"div",0),2&e&&r.zc("ngIf",t.taskSelected)},directives:[i.l,h.c,p.a,h.a,h.b,u.a,M,F.a,i.j,S.a,i.k,P.f,C],styles:[".div-info-container[_ngcontent-%COMP%]{height:82vh}.div-info-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px}.div-info-container[_ngcontent-%COMP%]   .icon-disabled[_ngcontent-%COMP%]{cursor:auto;opacity:.3}.div-info-container[_ngcontent-%COMP%]   .div-task-name[_ngcontent-%COMP%]{background-color:#7b87cc;color:#f5f5f5;height:25px;font-weight:bolder}.div-info-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#7b87cc;margin:0;padding:0 0 0 25px}.div-info-container[_ngcontent-%COMP%]   .label-action[_ngcontent-%COMP%]{font-weight:700;font-size:12px;text-align:center;margin-top:5px}.div-info-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{padding:0}.div-info-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:5px}.div-info-container[_ngcontent-%COMP%]   .div-description[_ngcontent-%COMP%]{max-width:100%;overflow-x:hidden;overflow-y:none;cursor:pointer}@media (max-width:1279px){h4[_ngcontent-%COMP%]{padding-left:5px!important}.div-info-container[_ngcontent-%COMP%]{height:77vh}}"]}),e})();var U=c("XNiG"),j=c("tk/3"),q=c("lJxs"),$=c("JIr8"),V=c("IZH3"),Q=c("KwZR"),B=c("z7jA");let K=(()=>{class e{constructor(e,t,c,i){this.http=e,this.wsService=t,this.lpDialogsService=c,this.errorHandlerService=i,this.messagesSource=new U.a,this.messages$=this.messagesSource.asObservable()}getMessages(e,t,c=10){const i=new j.d({skip:t.toString(),limit:c.toString()});return this.http.get(`${V.a}messages/${e}`,{headers:i}).pipe(Object(q.a)(e=>({count:e.data.count,messages:e.data.messages})),Object($.a)(e=>(this.lpDialogsService.openInfoDialog(e.message,e.status,"ERROR"),this.errorHandlerService.handleError(e))))}postMessage(e,t){e.date=(new Date).getTime();const c=new FormData;return e.files.forEach((e,t)=>{c.append(t,e,e.name)}),Object.keys(e).forEach(t=>{"files"!=t&&c.append(t,e[t])}),this.http.post(`${V.a}message/${t}`,c).pipe(Object(q.a)(e=>e.message)).pipe(Object($.a)(e=>(this.lpDialogsService.openInfoDialog(e.message,e.status,"ERROR"),this.errorHandlerService.handleError(e))))}deleteMessage(e){return this.http.delete(`${V.a}message/${e}`).pipe(Object(O.a)(e=>{this.messagesSource.next({message:e.message,order:"delete"})}),Object($.a)(e=>(this.lpDialogsService.openInfoDialog(e.message,e.status,"ERROR"),this.errorHandlerService.handleError(e))))}listenningMessages(){return this.wsService.listen("message-in")}}return e.\u0275fac=function(t){return new(t||e)(r.lc(j.b),r.lc(Q.a),r.lc(g.b),r.lc(B.a))},e.\u0275prov=r.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var G=c("LRne");let Y=(()=>{class e{constructor(e,t,c){this.http=e,this.lpDialogsService=t,this.errorHandlerService=c,this.textFormats=["pdf"],this.fileSrc=new U.a,this.file$=this.fileSrc.asObservable()}getDbFile(e){return this.http.get(`${V.a}file/${e}`,{responseType:"blob"}).pipe(Object($.a)(e=>(this.lpDialogsService.openInfoDialog(e.message,e.status,"ERROR"),this.errorHandlerService.handleError(e))))}spreadFile(e,t){this.fileSrc.next({order:t,file:e})}deleteFile(e){const t=this.http.delete(`${V.a}delete-file/${e._id}`).pipe(Object(q.a)(e=>e.file),Object(O.a)(e=>{this.spreadFile(e,"DELETE")}),Object($.a)(e=>(this.lpDialogsService.openInfoDialog(e.message,e.status,"ERROR"),this.errorHandlerService.handleError(e))));return this.lpDialogsService.openConfirmDialog("FILE DELETION",`The file ${e.title} will be deleted`).pipe(Object(a.a)(e=>e?t:Object(n.b)()))}getFileById(e){return this.http.get(`${V.a}searchById/file/${e}`).pipe(Object(q.a)(e=>e.file),Object($.a)(e=>(this.lpDialogsService.openInfoDialog(e.message,e.status,"ERROR"),this.errorHandlerService.handleError(e))))}downloadFile(e){const{src:t,file:c}=e;return this.lpDialogsService.openConfirmDialog("DOWNLOAD FILE?",c.title).pipe(Object(a.a)(e=>e?(t.includes("blob")?Object(G.a)({src:t,title:c.title}):this.getDbFile(c.name).pipe(Object(q.a)(e=>({src:URL.createObjectURL(e),title:c.title})))).pipe(Object(O.a)(e=>{const t=document.createElement("a");t.href=e.src,t.download=e.title,document.body.appendChild(t),t.click()})):Object(n.b)()))}}return e.\u0275fac=function(t){return new(t||e)(r.lc(j.b),r.lc(g.b),r.lc(B.a))},e.\u0275prov=r.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var X=c("2Vo4"),Z=c("0IaG"),W=c("qFsG"),J=c("ihCf"),ee=c("3Pt+"),te=c("mvOm"),ce=c("bTqV"),ie=c("jhN1");let se=(()=>{class e{constructor(e,t){this.filesService=e,this.domSanitizer=t,this.textFormats=[{icon:"word",mime:"application/msword"},{icon:"odt",mime:"application/vnd.oasis.opendocument.text"},{icon:"xml",mime:"text/xml"},{icon:"pdf",mime:"application/pdf"},{icon:"word",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{icon:"xml",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{icon:"text",mime:"text/plain"}]}transform(e){let t=this.textFormats.find(t=>t.mime===e.type);return t?Object(G.a)(`../../../assets/icons/files/${t.icon}.png`):e instanceof File?Object(G.a)(this.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e))):this.filesService.getDbFile(e.name).pipe(Object(q.a)(e=>this.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e))))}}return e.\u0275fac=function(t){return new(t||e)(r.bc(Y),r.bc(ie.b))},e.\u0275pipe=r.ac({name:"fileIcon",type:e,pure:!0}),e})();function ne(e,t){if(1&e&&(r.hc(0,"div",1),r.cc(1,"img",7),r.uc(2,"async"),r.uc(3,"fileIcon"),r.hc(4,"div",8),r.Pc(5),r.gc(),r.gc()),2&e){const e=t.$implicit;r.Ob(1),r.zc("src",r.vc(2,2,r.vc(3,4,e)),r.Ic),r.Ob(4),r.Rc(" ",e.name," ")}}function ae(e,t){if(1&e){const e=r.ic();r.hc(0,"div",1),r.hc(1,"div",2),r.Nc(2,ne,6,6,"div",3),r.gc(),r.hc(3,"div"),r.hc(4,"mat-form-field",4),r.hc(5,"mat-label"),r.Pc(6,"You can write a message"),r.gc(),r.hc(7,"textarea",5),r.pc("ngModelChange",(function(t){return r.Hc(e),r.tc().text=t})),r.gc(),r.gc(),r.gc(),r.hc(8,"div"),r.hc(9,"button",6),r.pc("click",(function(){return r.Hc(e),r.tc().accept()})),r.Pc(10,"OK"),r.gc(),r.hc(11,"button",6),r.pc("click",(function(){return r.Hc(e),r.tc().cancel()})),r.Pc(12,"cancel"),r.gc(),r.gc(),r.gc()}if(2&e){const e=r.tc();r.Ob(2),r.zc("ngForOf",e.files),r.Ob(5),r.Mc("margin-top","10px"),r.zc("ngModel",e.text)}}let re=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.files=t.files}accept(){this.dialogRef.close({accepted:!0,text:this.text})}cancel(){this.dialogRef.close({accepted:!1})}}return e.\u0275fac=function(t){return new(t||e)(r.bc(Z.h),r.bc(Z.a))},e.\u0275cmp=r.Vb({type:e,selectors:[["app-chat-files-dialog"]],decls:1,vars:1,consts:[["fxLayout","column",4,"ngIf"],["fxLayout","column"],["fxLayout","row",1,"div-files"],["fxLayout","column",4,"ngFor","ngForOf"],[1,"mat-form-full-width"],["matInput","","lpInputTrimmer","","cdkTextareaAutosize","","cdkAutosizeMaxRows","3","rows","3","cols","40",1,"textarea",3,"ngModel","ngModelChange"],["fxFlex","50","mat-raised-button","",3,"click"],["alt","",1,"file-icon-temp",3,"src"],[1,"div-file-title"]],template:function(e,t){1&e&&r.Nc(0,ae,13,4,"div",0),2&e&&r.zc("ngIf",t.files)},directives:[i.l,h.c,i.k,P.c,P.f,W.b,J.b,ee.c,te.a,ee.l,ee.o,ce.a,h.a],pipes:[i.b,se],styles:[".div-files[_ngcontent-%COMP%]{margin:8px;max-width:250px;overflow-x:scroll;font-size:9px}.div-files[_ngcontent-%COMP%]   .file-icon-temp[_ngcontent-%COMP%]{height:70px;width:70px}textarea[_ngcontent-%COMP%]{padding:0!important}"]}),e})();class oe{constructor(e,t,c,i){this.text=e,this.files=t,this.date=c,this._id=i}}const le=[{format:".gif",mimeType:"image/gif"},{format:".jpeg",mimeType:"image/jpeg"},{format:".png",mimeType:"image/png"},{format:".doc",mimeType:"application/msword"},{format:".odt",mimeType:"application/vnd.oasis.opendocument.text"},{format:".txt",mimeType:"text/plain"},{format:".pdf",mimeType:"application/pdf"},{format:".docx",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{format:"xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}];var de=c("41FU"),ge=c("zP0r");const fe=["fileInput"],he=["fileInputCtrl"];let ue=(()=>{class e{constructor(){this.config={},this.propagateChange=e=>{}}validate(){return this.errors}ngAfterViewInit(){if(!this.trigger)throw new Error("Component needs a trigger");this.trigger.nativeElement.addEventListener("click",()=>{this.fileInput.nativeElement.click()}),this.fileInputController.valueChanges.pipe(Object(ge.a)(1)).subscribe(()=>{let e=this.fileInputController.control.errors;e?(this.errors=e,this.propagateChange(null)):(this.errors=null,this.propagateChange(this.fileInput.nativeElement.files)),this.fileInput.nativeElement.files=null,this.fileInput.nativeElement.value=null})}writeValue(e){}registerOnChange(e){this.propagateChange=e}registerOnTouched(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Vb({type:e,selectors:[["lp-files-uploader"]],viewQuery:function(e,t){var c;1&e&&(r.Lc(fe,!0),r.Lc(he,!0)),2&e&&(r.Ec(c=r.qc())&&(t.fileInput=c.first),r.Ec(c=r.qc())&&(t.fileInputController=c.first))},inputs:{config:"config",trigger:"trigger"},features:[r.Nb([{provide:ee.j,useExisting:Object(r.hb)(()=>e),multi:!0},{provide:ee.i,useExisting:Object(r.hb)(()=>e),multi:!0}])],decls:5,vars:5,consts:[["form","ngForm"],["hidden","","ngModel","","name","files-input","type","file","lpFilesUploader","",2,"display","none",3,"multiple","allowedMimeTypes","notAllowedMimeTypes","maxSizeKb","maxNameLength"],["fileInput","","fileInputCtrl","ngModel"]],template:function(e,t){1&e&&(r.hc(0,"form",null,0),r.cc(2,"input",1,2),r.gc()),2&e&&(r.Ob(2),r.zc("multiple",t.config.multiple)("allowedMimeTypes",t.config.allowedMimeTypes)("notAllowedMimeTypes",t.config.notAllowedMimeTypes)("maxSizeKb",t.config.maxSizeKb)("maxNameLength",t.config.maxNameLength))},directives:function(){return[ee.s,ee.m,ee.n,ee.c,ee.l,ee.o,me]},encapsulation:2}),e})(),me=(()=>{class e{constructor(e){this.el=e}validate(){let e=this.el.nativeElement.files;return this.validateTypes(e)?this.validateTypes(e):this.validateSize(e)?this.validateSize(e):this.validateNameLength(e)?this.validateNameLength(e):null}validateTypes(e){let t=null;return Array.from(e).forEach(e=>{this.allowedMimeTypes&&this.allowedMimeTypes.indexOf(e.type)<0&&(t={invalidMimeType:!0})}),this.notAllowedMimeTypes&&Array.from(e).forEach(e=>{this.notAllowedMimeTypes.indexOf(e.type)>=0&&(t={invalidMimeType:!0})}),t}validateSize(e){let t=null;return this.maxSizeKb&&Array.from(e).forEach(e=>{e.size/1024>this.maxSizeKb&&(t={invalidFileSize:!0})}),t}validateNameLength(e){let t=null;return this.maxNameLength&&Array.from(e).forEach(e=>{e.name.length>this.maxNameLength&&(t={invalidNameLength:!0})}),t}}return e.\u0275fac=function(t){return new(t||e)(r.bc(r.o))},e.\u0275dir=r.Wb({type:e,selectors:[["","lpFilesUploader",""]],inputs:{allowedMimeTypes:"allowedMimeTypes",notAllowedMimeTypes:"notAllowedMimeTypes",maxSizeKb:"maxSizeKb",maxNameLength:"maxNameLength"},features:[r.Nb([{provide:ee.i,useExisting:Object(r.hb)(()=>e),multi:!0}])]}),e})(),pe=(()=>{class e{}return e.\u0275mod=r.Zb({type:e}),e.\u0275inj=r.Yb({factory:function(t){return new(t||e)},imports:[[i.c,ee.g,ee.p]]}),e})();const be=["fileUploader"];let ve=(()=>{class e{constructor(e){this.lpSnackbarNotificationsService=e,this.files=new r.r,this.showUsers=new r.r,this.imgValidationConfig={allowedMimeTypes:le.map(e=>e.mimeType),maxSizeKb:3e3,maxNameLength:150,multiple:!0}}ngOnInit(){this.filesInfo=`Allowed formats: ${le.reduce((e,t)=>(this.imgValidationConfig.allowedMimeTypes.indexOf(t.mimeType)>=0&&(e+=""+(e?", "+t.format:t.format)),e),"")}\nmax size kb: ${this.imgValidationConfig.maxSizeKb}\nmax name length: ${this.imgValidationConfig.maxNameLength}`}ngAfterViewInit(){this.filesUploaderChanges=this.fileUploader.valueChanges.subscribe(()=>{if(this.fileUploader.errors)switch(Object.keys(this.fileUploader.errors)[0]){case"invalidMimeType":this.lpSnackbarNotificationsService.validationError("INVALID FILE FORMAT");break;case"invalidFileSize":this.lpSnackbarNotificationsService.validationError("INVALID FILE SIZE");break;case"invalidNameLength":this.lpSnackbarNotificationsService.validationError("INVALID FILE NAME LENGTH")}})}setFiles(e){if(null!=e){const t=[];Array.from(e).forEach(e=>{t.push(e)}),this.files.emit(t)}}ngOnDestroy(){this.filesUploaderChanges.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.bc(de.a))},e.\u0275cmp=r.Vb({type:e,selectors:[["chat-tools"]],viewQuery:function(e,t){var c;1&e&&r.Vc(be,!0),2&e&&r.Ec(c=r.qc())&&(t.fileUploader=c.first)},outputs:{files:"files",showUsers:"showUsers"},decls:9,vars:3,consts:[["fxLayoutGap","20px",1,"card-tools"],[3,"color","click"],["color","primary"],["filesUploaderTrigger",""],["action",""],["ngModel","","name","files",3,"trigger","config","ngModelChange"],["fileUploader","ngModel"]],template:function(e,t){if(1&e&&(r.hc(0,"mat-card",0),r.hc(1,"mat-icon",1),r.pc("click",(function(){return t.showU=!t.showU,t.showUsers.emit(t.showU)})),r.Pc(2,"supervised_user_circle"),r.gc(),r.hc(3,"mat-icon",2,3),r.Pc(5," attach_file"),r.gc(),r.hc(6,"form",4),r.hc(7,"lp-files-uploader",5,6),r.pc("ngModelChange",(function(e){return t.setFiles(e)})),r.gc(),r.gc(),r.gc()),2&e){const e=r.Fc(4);r.Ob(1),r.zc("color",t.showU?"accent":"primary"),r.Ob(6),r.zc("trigger",e._elementRef)("config",t.imgValidationConfig)}},directives:[p.a,h.d,u.a,ee.s,ee.m,ee.n,ue,ee.l,ee.o],styles:[".card-tools[_ngcontent-%COMP%]{height:15px!important}  .mat-tooltip{white-space:pre-line}"]}),e})();const xe=["textArea"];let Oe=(()=>{class e{constructor(e){this.dialog=e,this.message=new oe("",[],null),this.sendMsg=new r.r,this.showUsers=new r.r}ngOnInit(){}sendMessage(){this.sendMsg.emit(this.message),this.message=new oe("",[],null),this.textArea.nativeElement.focus()}setFiles(e){this.dialog.open(re,{data:{files:e}}).afterClosed().subscribe(t=>{t.accepted&&(this.message.text=t.text?t.text:"",this.message.files.push(...e),this.sendMessage())})}}return e.\u0275fac=function(t){return new(t||e)(r.bc(Z.b))},e.\u0275cmp=r.Vb({type:e,selectors:[["chat-input"]],viewQuery:function(e,t){var c;1&e&&r.Vc(xe,!0),2&e&&r.Ec(c=r.qc())&&(t.textArea=c.first)},outputs:{sendMsg:"sendMsg",showUsers:"showUsers"},decls:8,vars:6,consts:[["fxLayout","column"],["fxLayout","row"],["mat-raised-button","",3,"disabled","click"],["fxFlex","90",3,"files","showUsers"],[1,"mat-form-full-width"],["matInput","","lpInputTrimmer","","cdkTextareaAutosize","","cdkAutosizeMaxRows","4","cdkAutosizeMinRows","4","cols","40","placeholder","write something",1,"textarea",3,"ngModel","ngModelChange"],["textArea",""]],template:function(e,t){1&e&&(r.hc(0,"div",0),r.hc(1,"div",1),r.hc(2,"button",2),r.pc("click",(function(){return t.sendMessage()})),r.Pc(3,"send"),r.gc(),r.hc(4,"chat-tools",3),r.pc("files",(function(e){return t.setFiles(e)}))("showUsers",(function(e){return t.showUsers.emit(e)})),r.gc(),r.gc(),r.hc(5,"mat-form-field",4),r.hc(6,"textarea",5,6),r.pc("ngModelChange",(function(e){return t.message.text=e})),r.gc(),r.gc(),r.gc()),2&e&&(r.Ob(2),r.Mc("width",100,"%"),r.zc("disabled",!t.message.text),r.Ob(4),r.Mc("margin-top","10px"),r.zc("ngModel",t.message.text))},directives:[h.c,ce.a,ve,h.a,P.c,W.b,J.b,ee.c,te.a,ee.l,ee.o],styles:["textarea[_ngcontent-%COMP%]{padding:0!important}"]}),e})();function Se(e,t){if(1&e&&(r.hc(0,"div",2),r.hc(1,"p"),r.Pc(2),r.gc(),r.hc(3,"mat-icon",3),r.Pc(4,"face"),r.gc(),r.gc()),2&e){const e=t.$implicit;r.Ob(2),r.Qc(e.name),r.Ob(1),r.zc("color",e.connected?"primary":"accent")}}let ke=(()=>{class e{constructor(){this.users=[]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Vb({type:e,selectors:[["chat-users"]],inputs:{users:"users"},decls:2,vars:1,consts:[[1,"div-users"],["fxLayoutAlign","space-around","fxLayout","row",4,"ngFor","ngForOf"],["fxLayoutAlign","space-around","fxLayout","row"],[3,"color"]],template:function(e,t){1&e&&(r.hc(0,"div",0),r.Nc(1,Se,5,2,"div",1),r.gc()),2&e&&(r.Ob(1),r.zc("ngForOf",t.users))},directives:[i.k,h.b,h.c,u.a],styles:[".div-users[_ngcontent-%COMP%]{margin:10px;overflow-y:scroll;max-height:55vh}.div-users[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (max-width:1279px){.div-users[_ngcontent-%COMP%]{max-height:100%;border-bottom:1px solid #d3d3d3}}"]}),e})();var we=c("Xa2L");const ye=["divMessages"];function Me(e,t){1&e&&r.cc(0,"mat-spinner",5),2&e&&r.zc("diameter",50)}function Fe(e,t){if(1&e){const e=r.ic();r.hc(0,"div",11),r.hc(1,"img",12,13),r.pc("click",(function(){r.Hc(e);const c=t.$implicit,i=r.Fc(2);return r.tc(3).downloadFile.emit({src:i.src,file:c})})),r.uc(3,"async"),r.uc(4,"fileIcon"),r.gc(),r.hc(5,"div",14),r.Pc(6),r.gc(),r.gc()}if(2&e){const e=t.$implicit;r.Ob(1),r.zc("src",r.vc(3,2,r.vc(4,4,e)),r.Ic),r.Ob(5),r.Rc(" ",e.title," ")}}function Pe(e,t){if(1&e&&(r.hc(0,"div",9),r.Nc(1,Fe,7,6,"div",10),r.gc()),2&e){const e=r.tc().$implicit;r.Ob(1),r.zc("ngForOf",e.files)}}const Ie=function(e){return{color:e}};function Ce(e,t){if(1&e&&(r.hc(0,"mat-card"),r.hc(1,"div",6),r.hc(2,"small"),r.Pc(3),r.uc(4,"date"),r.gc(),r.gc(),r.Nc(5,Pe,2,1,"div",7),r.hc(6,"p",8),r.Pc(7),r.gc(),r.gc()),2&e){const e=t.$implicit,c=r.tc();r.Ob(1),r.zc("ngStyle",r.Bc(9,Ie,e.user._id===c.userOnline._id?"#7b87cc":"#d1870c"))("fxLayoutAlign",e.user._id===c.userOnline._id?"flex-start":"flex-end"),r.Ob(2),r.Sc(" ",r.wc(4,6,e.date,"M/d/yy, h:mm a")," ",e.user.name,""),r.Ob(2),r.zc("ngIf",e.files.length>0),r.Ob(2),r.Qc(e.text)}}let Te=(()=>{class e{constructor(e){this.renderer=e,this.getMessages=new r.r,this.downloadFile=new r.r,this.showSpinner=!1,this.ngAfterViewCheckedTriggered=0}ngOnChanges(e){e.messages&&this.divMessages&&!e.messages.firstChange&&(this.showSpinner=!1,this.divMessages.nativeElement.scrollTop=5),e.newMessage&&this.newMessage&&(this.messages.push(this.newMessage),this.messagesCount++,Object(b.a)().subscribe(()=>{this.scrollToBottom()}))}ngAfterViewInit(){this.renderer.listen(this.divMessages.nativeElement,"scroll",e=>{0===e.target.scrollTop&&this.messages.length<this.messagesCount?(this.showSpinner=!0,this.getMessages.emit({from:this.messages.length})):this.showSpinner=!1})}ngAfterViewChecked(){this.ngAfterViewCheckedTriggered<2&&this.scrollToBottom()}scrollToBottom(){const e=this.divMessages;e.nativeElement.scrollTop=e.nativeElement.scrollHeight,this.ngAfterViewCheckedTriggered++}ngOnDestroy(){this.dialogSubs&&this.dialogSubs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.bc(r.Q))},e.\u0275cmp=r.Vb({type:e,selectors:[["chat-messages"]],viewQuery:function(e,t){var c;1&e&&r.Vc(ye,!0),2&e&&r.Ec(c=r.qc())&&(t.divMessages=c.first)},inputs:{messages:"messages",messagesCount:"messagesCount",userOnline:"userOnline",newMessage:"newMessage"},outputs:{getMessages:"getMessages",downloadFile:"downloadFile"},features:[r.Mb],decls:5,vars:2,consts:[[1,"div-messages"],["divMessages",""],["fxLayoutAlign","center"],[3,"diameter",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"diameter"],[3,"ngStyle","fxLayoutAlign"],["class","div-files","fxLayout","row",4,"ngIf"],[1,"p-message"],["fxLayout","row",1,"div-files"],["class","div-file","fxLayout","column",4,"ngFor","ngForOf"],["fxLayout","column",1,"div-file"],["alt","",1,"file-icon",3,"src","click"],["fileImg",""],[1,"div-file-title"]],template:function(e,t){1&e&&(r.hc(0,"div",0,1),r.hc(2,"div",2),r.Nc(3,Me,1,1,"mat-spinner",3),r.gc(),r.Nc(4,Ce,8,11,"mat-card",4),r.gc()),2&e&&(r.Ob(3),r.zc("ngIf",t.showSpinner),r.Ob(1),r.zc("ngForOf",t.messages))},directives:[h.b,i.l,i.k,we.c,p.a,i.m,S.c,h.c],pipes:[i.e,i.b,se],styles:[".div-messages[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.div-messages[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.file-icon[_ngcontent-%COMP%]{height:70px;width:70px;cursor:pointer}.div-files[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden;max-height:500px}.div-files[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.div-file[_ngcontent-%COMP%]{width:100px;height:150px}.div-file[_ngcontent-%COMP%]   .div-file-title[_ngcontent-%COMP%]{max-height:20px;font-size:10px;word-break:break-all}.p-message[_ngcontent-%COMP%]{word-break:break-all}"],changeDetection:0}),e})();function ze(e,t){if(1&e&&r.cc(0,"chat-users",7),2&e){const e=r.tc(2);r.zc("users",e.users)}}function Le(e,t){if(1&e&&(r.hc(0,"div",5),r.Nc(1,ze,1,1,"chat-users",6),r.gc()),2&e){const e=r.tc();r.Ob(1),r.zc("ngIf",e.showUsers)}}function _e(e,t){if(1&e){const e=r.ic();r.hc(0,"chat-messages",8),r.pc("getMessages",(function(t){return r.Hc(e),r.tc().getMessages.emit(t)}))("downloadFile",(function(t){return r.Hc(e),r.tc().downloadFile.emit(t)})),r.gc()}if(2&e){const e=r.tc();r.zc("userOnline",e.userOnline)("messages",e.messages)("newMessage",e.newMessage)("msg",e.msg)("messagesCount",e.messagesCount)}}let Re=(()=>{class e{constructor(){this.users=[],this.sendMsg=new r.r,this.getMessages=new r.r,this.downloadFile=new r.r,this.msg=new X.a([]),this.showUsers=!1}sendMessage(e){this.sendMsg.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Vb({type:e,selectors:[["app-chat"]],inputs:{users:"users",messages:"messages",newMessage:"newMessage",messagesCount:"messagesCount",userOnline:"userOnline"},outputs:{sendMsg:"sendMsg",getMessages:"getMessages",downloadFile:"downloadFile"},decls:5,vars:4,consts:[["fxLayout.lt-md","column",1,"div-chat-container"],["fxFlex.lt-md","15","fxFlex.gt-sm","10",4,"ngIf"],["fxLayout","column",3,"fxFlex.lt-md","fxFlex.gt-sm"],["fxFlex","75",3,"userOnline","messages","newMessage","msg","messagesCount","getMessages","downloadFile",4,"ngIf"],["fxFlex","25",3,"sendMsg","showUsers"],["fxFlex.lt-md","15","fxFlex.gt-sm","10"],[3,"users",4,"ngIf"],[3,"users"],["fxFlex","75",3,"userOnline","messages","newMessage","msg","messagesCount","getMessages","downloadFile"]],template:function(e,t){1&e&&(r.hc(0,"div",0),r.Nc(1,Le,2,1,"div",1),r.hc(2,"div",2),r.Nc(3,_e,1,5,"chat-messages",3),r.hc(4,"chat-input",4),r.pc("sendMsg",(function(e){return t.sendMessage(e)}))("showUsers",(function(e){return t.showUsers=e})),r.gc(),r.gc(),r.gc()),2&e&&(r.Ob(1),r.zc("ngIf",t.showUsers),r.Ob(1),r.zc("fxFlex.lt-md",t.showUsers?"85":"100")("fxFlex.gt-sm",t.showUsers?"90":"100"),r.Ob(1),r.zc("ngIf",t.messages))},directives:[h.c,i.l,h.a,Oe,ke,Te],styles:[".div-chat-container[_ngcontent-%COMP%]{height:100%;overflow-y:hidden}"]}),e})(),Ae=(()=>{class e{constructor(e,t,c,i,s){this.chatService=e,this.taskService=t,this.filesService=c,this.authService=i,this.mdService=s,this.users=[]}ngOnInit(){this.listenningMessages(),this.listenningUsersConnected(),this.getMessages(0)}ngOnChanges(e){e.taskSelected&&this.taskSelected&&(this.users=this.taskSelected.participants)}sendMessage(e){this.chatService.postMessage(e,this.taskSelected._id).subscribe(e=>{this.newMessage=e})}getMessages(e){this.chatService.getMessages(this.taskSelected._id,e).subscribe(e=>{let t=this.messages?this.messages:[];t.unshift(...e.messages),this.messages=[...t.sort((e,t)=>e.date-t.date)],this.messagesCount=e.count})}listenningUsersConnected(){this.usersConnectedSubs&&this.usersConnectedSubs.unsubscribe(),this.usersConnectedSubs=this.taskService.usersConnected().subscribe(e=>{this.taskSelected.participants.forEach((t,c)=>{this.taskSelected.participants[c].connected=!!e.includes(t._id)}),this.users=[...this.taskSelected.participants]})}listenningMessages(){this.messagesSubs=this.chatService.listenningMessages().subscribe(e=>{this.newMessage=e,this.spreadFiles(e.files)})}spreadFiles(e){e.forEach(e=>{this.filesService.spreadFile(e,"POST")})}ngOnDestroy(){this.messagesSubs&&this.messagesSubs.unsubscribe(),this.usersConnectedSubs&&this.usersConnectedSubs.unsubscribe(),this.dialogSubs&&this.dialogSubs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.bc(K),r.bc(l.a),r.bc(Y),r.bc(o.a),r.bc(m.a))},e.\u0275cmp=r.Vb({type:e,selectors:[["app-task-manager-chat"]],inputs:{taskSelected:"taskSelected"},features:[r.Mb],decls:2,vars:7,consts:[[3,"messages","newMessage","messagesCount","userOnline","users","sendMsg","getMessages","downloadFile"]],template:function(e,t){1&e&&(r.hc(0,"div"),r.hc(1,"app-chat",0),r.pc("sendMsg",(function(e){return t.sendMessage(e)}))("getMessages",(function(e){return t.getMessages(e.from)}))("downloadFile",(function(e){return t.filesService.downloadFile(e).subscribe()})),r.gc(),r.gc()),2&e&&(r.Mc("height",t.mdService.desktop?"82vh":"74vh"),r.Ob(1),r.zc("messages",t.messages)("newMessage",t.newMessage)("messagesCount",t.messagesCount)("userOnline",t.authService.userOnline)("users",t.users))},directives:[Re],styles:[""]}),e})();function Ee(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+1]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+1])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+1])),r.Ic),r.Ob(7),r.Qc(t.files[e+1].title)}}function De(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+2]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+2])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+2])),r.Ic),r.Ob(7),r.Qc(t.files[e+2].title)}}function Ne(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+3]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+3])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+3])),r.Ic),r.Ob(7),r.Qc(t.files[e+3].title)}}function He(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+4]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+4])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+4])),r.Ic),r.Ob(7),r.Qc(t.files[e+4].title)}}function Ue(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+5]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+5])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+5])),r.Ic),r.Ob(7),r.Qc(t.files[e+5].title)}}function je(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+6]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+6])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+6])),r.Ic),r.Ob(7),r.Qc(t.files[e+6].title)}}function qe(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+7]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+7])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+7])),r.Ic),r.Ob(7),r.Qc(t.files[e+7].title)}}function $e(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+8]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+8])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+8])),r.Ic),r.Ob(7),r.Qc(t.files[e+8].title)}}function Ve(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",5),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+9]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+9])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+9])),r.Ic),r.Ob(7),r.Qc(t.files[e+9].title)}}function Qe(e,t){if(1&e){const e=r.ic();r.hc(0,"div",4),r.hc(1,"mat-card",5),r.hc(2,"div",6),r.hc(3,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(4),c=r.tc().$implicit;return r.tc().filesService.downloadFile({src:t.src,file:c}).subscribe()})),r.uc(5,"async"),r.uc(6,"fileIcon"),r.gc(),r.hc(7,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc().$implicit;return r.tc().deleteFile(t)})),r.Pc(8,"delete"),r.gc(),r.gc(),r.hc(9,"p",10),r.Pc(10),r.gc(),r.gc(),r.Nc(11,Ee,10,6,"mat-card",11),r.Nc(12,De,10,6,"mat-card",11),r.Nc(13,Ne,10,6,"mat-card",11),r.Nc(14,He,10,6,"mat-card",11),r.Nc(15,Ue,10,6,"mat-card",11),r.Nc(16,je,10,6,"mat-card",11),r.Nc(17,qe,10,6,"mat-card",11),r.Nc(18,$e,10,6,"mat-card",11),r.Nc(19,Ve,10,6,"mat-card",11),r.gc()}if(2&e){const e=r.tc(),t=e.$implicit,c=e.index,i=r.tc();r.Ob(3),r.zc("src",r.vc(5,11,r.vc(6,13,t)),r.Ic),r.Ob(7),r.Qc(t.title),r.Ob(1),r.zc("ngIf",c+1<i.files.length),r.Ob(1),r.zc("ngIf",c+2<i.files.length),r.Ob(1),r.zc("ngIf",c+3<i.files.length),r.Ob(1),r.zc("ngIf",c+4<i.files.length),r.Ob(1),r.zc("ngIf",c+5<i.files.length),r.Ob(1),r.zc("ngIf",c+6<i.files.length),r.Ob(1),r.zc("ngIf",c+7<i.files.length),r.Ob(1),r.zc("ngIf",c+8<i.files.length),r.Ob(1),r.zc("ngIf",c+9<i.files.length)}}function Be(e,t){if(1&e&&(r.hc(0,"div"),r.Nc(1,Qe,20,15,"div",3),r.gc()),2&e){const e=t.index;r.Ob(1),r.zc("ngIf",e%10==0)}}function Ke(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",12),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+1]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+1])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+1])),r.Ic),r.Ob(7),r.Qc(t.files[e+1].title)}}function Ge(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",12),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+2]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+2])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+2])),r.Ic),r.Ob(7),r.Qc(t.files[e+2].title)}}function Ye(e,t){if(1&e){const e=r.ic();r.hc(0,"mat-card",12),r.hc(1,"div",6),r.hc(2,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(3),c=r.tc(2).index,i=r.tc();return i.filesService.downloadFile({src:t.src,file:i.files[c+3]}).subscribe()})),r.uc(4,"async"),r.uc(5,"fileIcon"),r.gc(),r.hc(6,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc(2).index,c=r.tc();return c.deleteFile(c.files[t+3])})),r.Pc(7,"delete"),r.gc(),r.gc(),r.hc(8,"p",10),r.Pc(9),r.gc(),r.gc()}if(2&e){const e=r.tc(2).index,t=r.tc();r.Ob(2),r.zc("src",r.vc(4,2,r.vc(5,4,t.files[e+3])),r.Ic),r.Ob(7),r.Qc(t.files[e+3].title)}}function Xe(e,t){if(1&e){const e=r.ic();r.hc(0,"div",4),r.hc(1,"mat-card",12),r.hc(2,"div",6),r.hc(3,"img",7,8),r.pc("click",(function(){r.Hc(e);const t=r.Fc(4),c=r.tc().$implicit;return r.tc().filesService.downloadFile({src:t.src,file:c}).subscribe()})),r.uc(5,"async"),r.uc(6,"fileIcon"),r.gc(),r.hc(7,"mat-icon",9),r.pc("click",(function(){r.Hc(e);const t=r.tc().$implicit;return r.tc().deleteFile(t)})),r.Pc(8,"delete"),r.gc(),r.gc(),r.hc(9,"p",10),r.Pc(10),r.gc(),r.gc(),r.Nc(11,Ke,10,6,"mat-card",13),r.Nc(12,Ge,10,6,"mat-card",13),r.Nc(13,Ye,10,6,"mat-card",13),r.gc()}if(2&e){const e=r.tc(),t=e.$implicit,c=e.index,i=r.tc();r.Ob(3),r.zc("src",r.vc(5,5,r.vc(6,7,t)),r.Ic),r.Ob(7),r.Qc(t.title),r.Ob(1),r.zc("ngIf",c+1<i.files.length),r.Ob(1),r.zc("ngIf",c+2<i.files.length),r.Ob(1),r.zc("ngIf",c+3<i.files.length)}}function Ze(e,t){if(1&e&&(r.hc(0,"div"),r.Nc(1,Xe,14,9,"div",3),r.gc()),2&e){const e=t.index;r.Ob(1),r.zc("ngIf",e%4==0)}}let We=(()=>{class e{constructor(e,t){this.filesService=e,this.taskService=t,this.from=0,this.total=0}ngOnInit(){this.fileSubscription=this.filesService.file$.subscribe(e=>{switch(e.order){case"POST":this.files.push(e.file);break;case"DELETE":this.files=this.files.filter(t=>t._id!=e.file._id)}})}ngOnChanges(e){e.taskSelected&&this.taskSelected&&this.taskService.getTaskFiles(this.taskSelected._id,0,100).subscribe(e=>{this.files=e})}deleteFile(e){this.filesService.deleteFile(e).subscribe(e=>{e&&(this.files=this.files.filter(t=>t._id!=e._id),this.filesService.spreadFile(e,"DELETE"))})}ngOnDestroy(){this.fileSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.bc(Y),r.bc(l.a))},e.\u0275cmp=r.Vb({type:e,selectors:[["app-task-manager-files"]],inputs:{taskSelected:"taskSelected"},features:[r.Mb],decls:4,vars:2,consts:[["fxShow.gt-md","","fxHide.lt-lg","",1,"div-files"],[4,"ngFor","ngForOf"],["fxHide.gt-md","","fxShow.lt-lg","",1,"div-files"],["fxLayout","row",4,"ngIf"],["fxLayout","row"],["fxLayout","column","fxFlex","10"],["fxFlex","80"],["fxFlex","80","alt","",3,"src","click"],["img",""],["color","warn","fxFlex","20",3,"click"],["fxFlex","20"],["fxLayout","column","fxFlex","10",4,"ngIf"],["fxLayout","column","fxFlex","25"],["fxLayout","column","fxFlex","25",4,"ngIf"]],template:function(e,t){1&e&&(r.hc(0,"div",0),r.Nc(1,Be,2,1,"div",1),r.gc(),r.hc(2,"div",2),r.Nc(3,Ze,2,1,"div",1),r.gc()),2&e&&(r.Ob(1),r.zc("ngForOf",t.files),r.Ob(2),r.zc("ngForOf",t.files))},directives:[S.b,i.k,i.l,h.c,p.a,h.a,u.a],pipes:[i.b,se],styles:[".div-files[_ngcontent-%COMP%]{height:80vh;overflow-y:auto}.div-files[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:14vh;padding:5px!important}.div-files[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:0}.div-files[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}@media (max-width:1279px){.div-files[_ngcontent-%COMP%]{height:75vh!important}}"]}),e})();function Je(e,t){1&e&&(r.Pc(0," Task info "),r.hc(1,"mat-icon",6),r.Pc(2,"poll"),r.gc())}function et(e,t){if(1&e){const e=r.ic();r.hc(0,"app-task-manager-info",7),r.pc("deleteTask",(function(){return r.Hc(e),r.tc().deleteTask()}))("toggleStatus",(function(t){return r.Hc(e),r.tc().toggleStatus(t)}))("editTask",(function(){return r.Hc(e),r.tc().editTask()}))("actionResolved",(function(t){return r.Hc(e),r.tc().resolveAction(t)})),r.gc()}if(2&e){const e=r.tc();r.zc("taskSelected",e.taskSelected)}}function tt(e,t){1&e&&(r.Pc(0," Chat "),r.hc(1,"mat-icon",6),r.Pc(2," chat"),r.gc())}function ct(e,t){if(1&e&&r.cc(0,"app-task-manager-chat",8),2&e){const e=r.tc();r.zc("users",e.users)("taskSelected",e.taskSelected)}}function it(e,t){1&e&&(r.Pc(0," Files "),r.hc(1,"mat-icon",6),r.Pc(2,"folder"),r.gc())}function st(e,t){if(1&e&&r.cc(0,"app-task-manager-files",9),2&e){const e=r.tc();r.zc("taskSelected",e.taskSelected)}}let nt=[{path:"",component:(()=>{class e{constructor(e,t,c,i,s){this.authService=e,this.taskService=t,this.dialogsService=c,this.ar=i,this.lpDialogsService=s,this.tabIndex=0}ngOnInit(){this.ar.paramMap.subscribe(e=>{this.getTaskById(e.get("id")).then(()=>{this.taskService.userInTask(this.taskSelected._id).then(e=>{this.taskSelected.participants.forEach((t,c)=>{this.taskSelected.participants[c].connected=!!e.includes(t._id)})})})}),this.taskSubscription=this.taskService.task$.subscribe(e=>{if(e)switch(e.action){case"PUT":e.task._id===this.taskSelected._id&&(this.taskSelected=e.task)}})}getTaskById(e){return new Promise((t,c)=>{this.taskService.getTaskById(e).subscribe(e=>{this.taskSelected=e,t(!0)})})}toggleStatus(e){this.lpDialogsService.openConfirmDialog("ARE YOU SURE?",`The task status will switch to "${e}" status`).pipe(Object(a.a)(t=>t?this.taskService.putTask({status:e},this.taskSelected._id):Object(n.b)())).subscribe()}editTask(){this.dialogsService.openEditCreateTaskDialog(this.taskSelected._id)}deleteTask(){this.taskService.deleteTask(this.taskSelected._id).subscribe()}resolveAction(e){this.taskService.putTask({[Object.keys(e)[0]]:e[Object.keys(e)[0]]},e.itemId).subscribe()}ngOnDestroy(){this.taskService.userOutTask(this.taskSelected._id),this.taskSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.bc(o.a),r.bc(l.a),r.bc(d.a),r.bc(s.a),r.bc(g.b))},e.\u0275cmp=r.Vb({type:e,selectors:[["app-task-manager-panel"]],decls:11,vars:3,consts:[["mat-stretch-tabs","","fxFlex","100","mat-align-tabs","center",3,"selectedIndexChange"],["tabGroup",""],["mat-tab-label",""],[3,"taskSelected","deleteTask","toggleStatus","editTask","actionResolved",4,"ngIf"],[3,"users","taskSelected",4,"ngIf"],[3,"taskSelected",4,"ngIf"],["color","primary"],[3,"taskSelected","deleteTask","toggleStatus","editTask","actionResolved"],[3,"users","taskSelected"],[3,"taskSelected"]],template:function(e,t){1&e&&(r.hc(0,"mat-tab-group",0,1),r.pc("selectedIndexChange",(function(e){return t.tabIndex=e})),r.hc(2,"mat-tab"),r.Nc(3,Je,3,0,"ng-template",2),r.Nc(4,et,1,1,"app-task-manager-info",3),r.gc(),r.hc(5,"mat-tab"),r.Nc(6,tt,3,0,"ng-template",2),r.Nc(7,ct,1,2,"app-task-manager-chat",4),r.gc(),r.hc(8,"mat-tab"),r.Nc(9,it,3,0,"ng-template",2),r.Nc(10,st,1,1,"app-task-manager-files",5),r.gc(),r.gc()),2&e&&(r.Ob(4),r.zc("ngIf",t.taskSelected&&0===t.tabIndex),r.Ob(3),r.zc("ngIf",t.taskSelected&&1===t.tabIndex),r.Ob(3),r.zc("ngIf",t.taskSelected&&2===t.tabIndex))},directives:[f.b,h.a,f.a,f.c,i.l,u.a,H,Ae,We],styles:[".mat-tab-group[_ngcontent-%COMP%]{height:100%;width:100%}.div-task-name[_ngcontent-%COMP%]{background-color:#7b87cc;color:#f5f5f5;height:25px;font-weight:bolder}  .mat-tab-body-wrapper{height:100%!important;margin:0!important}  .mat-tab-header,   .mat-tab-labels{height:6vh!important}  .mat-tab-label{height:6vh!important;padding:0!important}"]}),e})()}],at=(()=>{class e{}return e.\u0275mod=r.Zb({type:e}),e.\u0275inj=r.Yb({factory:function(t){return new(t||e)},imports:[[i.c,s.e.forChild(nt)],s.e]}),e})();var rt=c("YUcS"),ot=c("9Xeq"),lt=c("jAig");let dt=(()=>{class e{}return e.\u0275mod=r.Zb({type:e}),e.\u0275inj=r.Yb({factory:function(t){return new(t||e)},imports:[[i.c,rt.a,ee.g,pe,lt.a,ot.a,te.b]]}),e})();var gt=c("+Mmm"),ft=c("CDL9");let ht=(()=>{class e{}return e.\u0275mod=r.Zb({type:e}),e.\u0275inj=r.Yb({factory:function(t){return new(t||e)},imports:[[i.c,at,gt.a,ee.g,dt,lt.a,rt.a,ot.a,at,ft.a]]}),e})()}}]);